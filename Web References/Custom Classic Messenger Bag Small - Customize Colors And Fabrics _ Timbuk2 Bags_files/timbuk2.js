(function($){if($.fn.carouFredSel){return}$.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(this.length==0){debug(true,'No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){$(this).carouFredSel(options,configs)})}var $cfs=this,$tt0=this[0],starting_position=false;if($cfs.data("_cfs_isCarousel")){$cfs.trigger("_cfs_triggerEvent",["destroy",true])}var FN={};FN._init=function(o,setOrig,start){o=go_getObject($tt0,o);o.items=go_getItemsObject($tt0,o.items);o.scroll=go_getScrollObject($tt0,o.scroll);o.auto=go_getAutoObject($tt0,o.auto);o.prev=go_getPrevNextObject($tt0,o.prev);o.next=go_getPrevNextObject($tt0,o.next);o.pagination=go_getPaginationObject($tt0,o.pagination);o.swipe=go_getSwipeObject($tt0,o.swipe);o.mousewheel=go_getMousewheelObject($tt0,o.mousewheel);if(setOrig){opts_orig=$.extend(true,{},$.fn.carouFredSel.defaults,o)}opts=$.extend(true,{},$.fn.carouFredSel.defaults,o);opts.d=cf_getDimensions(opts);crsl.direction=(opts.direction=="up"||opts.direction=="left")?"next":"prev";var a_itm=$cfs.children(),avail_primary=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)){opts.cookie="caroufredsel_cookie_"+conf.serialNumber}opts.maxDimension=ms_getMaxDimension(opts,avail_primary);opts.items=in_complementItems(opts.items,opts,a_itm,start);opts[opts.d.width]=in_complementPrimarySize(opts[opts.d.width],opts,a_itm);opts[opts.d.height]=in_complementSecondarySize(opts[opts.d.height],opts,a_itm);if(opts.responsive){if(!is_percentage(opts[opts.d.width])){opts[opts.d.width]="100%"}}if(is_percentage(opts[opts.d.width])){crsl.upDateOnWindowResize=true;crsl.primarySizePercentage=opts[opts.d.width];opts[opts.d.width]=ms_getPercentage(avail_primary,crsl.primarySizePercentage);if(!opts.items.visible){opts.items.visibleConf.variable=true}}if(opts.responsive){opts.usePadding=false;opts.padding=[0,0,0,0];opts.align=false;opts.items.visibleConf.variable=false}else{if(!opts.items.visible){opts=in_complementVisibleItems(opts,avail_primary)}if(!opts[opts.d.width]){if(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d.width])&&opts.items.filter=="*"){opts[opts.d.width]=opts.items.visible*opts.items[opts.d.width];opts.align=false}else{opts[opts.d.width]="variable"}}if(is_undefined(opts.align)){opts.align=(is_number(opts[opts.d.width]))?"center":false}if(opts.items.visibleConf.variable){opts.items.visible=gn_getVisibleItemsNext(a_itm,opts,0)}}if(opts.items.filter!="*"&&!opts.items.visibleConf.variable){opts.items.visibleConf.org=opts.items.visible;opts.items.visible=gn_getVisibleItemsNextFilter(a_itm,opts,0)}opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0);opts.items.visibleConf.old=opts.items.visible;if(opts.responsive){if(!opts.items.visibleConf.min){opts.items.visibleConf.min=opts.items.visible}if(!opts.items.visibleConf.max){opts.items.visibleConf.max=opts.items.visible}opts=in_getResponsiveValues(opts,a_itm,avail_primary)}else{opts.padding=cf_getPadding(opts.padding);if(opts.align=="top"){opts.align="left"}else{if(opts.align=="bottom"){opts.align="right"}}switch(opts.align){case"center":case"left":case"right":if(opts[opts.d.width]!="variable"){opts=in_getAlignPadding(opts,a_itm);opts.usePadding=true}break;default:opts.align=false;opts.usePadding=(opts.padding[0]==0&&opts.padding[1]==0&&opts.padding[2]==0&&opts.padding[3]==0)?false:true;break}}if(!is_number(opts.scroll.duration)){opts.scroll.duration=500}if(is_undefined(opts.scroll.items)){opts.scroll.items=(opts.responsive||opts.items.visibleConf.variable||opts.items.filter!="*")?"visible":opts.items.visible}opts.auto=$.extend(true,{},opts.scroll,opts.auto);opts.prev=$.extend(true,{},opts.scroll,opts.prev);opts.next=$.extend(true,{},opts.scroll,opts.next);opts.pagination=$.extend(true,{},opts.scroll,opts.pagination);opts.auto=go_complementAutoObject($tt0,opts.auto);opts.prev=go_complementPrevNextObject($tt0,opts.prev);opts.next=go_complementPrevNextObject($tt0,opts.next);opts.pagination=go_complementPaginationObject($tt0,opts.pagination);opts.swipe=go_complementSwipeObject($tt0,opts.swipe);opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel);if(opts.synchronise){opts.synchronise=cf_getSynchArr(opts.synchronise)}if(opts.auto.onPauseStart){opts.auto.onTimeoutStart=opts.auto.onPauseStart;deprecated("auto.onPauseStart","auto.onTimeoutStart")}if(opts.auto.onPausePause){opts.auto.onTimeoutPause=opts.auto.onPausePause;deprecated("auto.onPausePause","auto.onTimeoutPause")}if(opts.auto.onPauseEnd){opts.auto.onTimeoutEnd=opts.auto.onPauseEnd;deprecated("auto.onPauseEnd","auto.onTimeoutEnd")}if(opts.auto.pauseDuration){opts.auto.timeoutDuration=opts.auto.pauseDuration;deprecated("auto.pauseDuration","auto.timeoutDuration")}};FN._build=function(){$cfs.data("_cfs_isCarousel",true);var a_itm=$cfs.children(),orgCSS=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),newPosition="relative";switch(orgCSS.position){case"absolute":case"fixed":newPosition=orgCSS.position;break}if(conf.wrapper=="parent"){sz_storeOrigCss($wrp)}else{$wrp.css(orgCSS)}$wrp.css({overflow:"hidden",position:newPosition});sz_storeOrigCss($cfs);$cfs.data("_cfs_origCssZindex",orgCSS.zIndex);$cfs.css({textAlign:"left","float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0});sz_storeMargin(a_itm,opts);sz_storeOrigCss(a_itm);if(opts.responsive){sz_setResponsiveSizes(opts,a_itm)}};FN._bind_events=function(){FN._unbind_events();$cfs.bind(cf_e("stop",conf),function(e,imm){e.stopPropagation();if(!crsl.isStopped){if(opts.auto.button){opts.auto.button.addClass(cf_c("stopped",conf))}}crsl.isStopped=true;if(opts.auto.play){opts.auto.play=false;$cfs.trigger(cf_e("pause",conf),imm)}return true});$cfs.bind(cf_e("finish",conf),function(e){e.stopPropagation();if(crsl.isScrolling){sc_stopScroll(scrl)}return true});$cfs.bind(cf_e("pause",conf),function(e,imm,res){e.stopPropagation();tmrs=sc_clearTimers(tmrs);if(imm&&crsl.isScrolling){scrl.isStopped=true;var nst=getTime()-scrl.startTime;scrl.duration-=nst;if(scrl.pre){scrl.pre.duration-=nst}if(scrl.post){scrl.post.duration-=nst}sc_stopScroll(scrl,false)}if(!crsl.isPaused&&!crsl.isScrolling){if(res){tmrs.timePassed+=getTime()-tmrs.startTime}}if(!crsl.isPaused){if(opts.auto.button){opts.auto.button.addClass(cf_c("paused",conf))}}crsl.isPaused=true;if(opts.auto.onTimeoutPause){var dur1=opts.auto.timeoutDuration-tmrs.timePassed,perc=100-Math.ceil(dur1*100/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,perc,dur1)}return true});$cfs.bind(cf_e("play",conf),function(e,dir,del,res){e.stopPropagation();tmrs=sc_clearTimers(tmrs);var v=[dir,del,res],t=["string","number","boolean"],a=cf_sortParams(v,t);dir=a[0];del=a[1];res=a[2];if(dir!="prev"&&dir!="next"){dir=crsl.direction}if(!is_number(del)){del=0}if(!is_boolean(res)){res=false}if(res){crsl.isStopped=false;opts.auto.play=true}if(!opts.auto.play){e.stopImmediatePropagation();return debug(conf,"Carousel stopped: Not scrolling.")}if(crsl.isPaused){if(opts.auto.button){opts.auto.button.removeClass(cf_c("stopped",conf));opts.auto.button.removeClass(cf_c("paused",conf))}}crsl.isPaused=false;tmrs.startTime=getTime();var dur1=opts.auto.timeoutDuration+del;dur2=dur1-tmrs.timePassed;perc=100-Math.ceil(dur2*100/dur1);if(opts.auto.progress){tmrs.progress=setInterval(function(){var pasd=getTime()-tmrs.startTime+tmrs.timePassed,perc=Math.ceil(pasd*100/dur1);opts.auto.progress.updater.call(opts.auto.progress.bar[0],perc)},opts.auto.progress.interval)}tmrs.auto=setTimeout(function(){if(opts.auto.progress){opts.auto.progress.updater.call(opts.auto.progress.bar[0],100)}if(opts.auto.onTimeoutEnd){opts.auto.onTimeoutEnd.call($tt0,perc,dur2)}if(crsl.isScrolling){$cfs.trigger(cf_e("play",conf),dir)}else{$cfs.trigger(cf_e(dir,conf),opts.auto)}},dur2);if(opts.auto.onTimeoutStart){opts.auto.onTimeoutStart.call($tt0,perc,dur2)}return true});$cfs.bind(cf_e("resume",conf),function(e){e.stopPropagation();if(scrl.isStopped){scrl.isStopped=false;crsl.isPaused=false;crsl.isScrolling=true;scrl.startTime=getTime();sc_startScroll(scrl,conf)}else{$cfs.trigger(cf_e("play",conf))}return true});$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(e,obj,num,clb,que){e.stopPropagation();if(crsl.isStopped||$cfs.is(":hidden")){e.stopImmediatePropagation();return debug(conf,"Carousel stopped or hidden: Not scrolling.")}var minimum=(is_number(opts.items.minimum))?opts.items.minimum:opts.items.visible+1;if(minimum>itms.total){e.stopImmediatePropagation();return debug(conf,"Not enough items ("+itms.total+" total, "+minimum+" needed): Not scrolling.")}var v=[obj,num,clb,que],t=["object","number/string","function","boolean"],a=cf_sortParams(v,t);obj=a[0];num=a[1];clb=a[2];que=a[3];var eType=e.type.slice(conf.events.prefix.length);if(!is_object(obj)){obj={}}if(is_function(clb)){obj.onAfter=clb}if(is_boolean(que)){obj.queue=que}obj=$.extend(true,{},opts[eType],obj);if(obj.conditions&&!obj.conditions.call($tt0,eType)){e.stopImmediatePropagation();return debug(conf,'Callback "conditions" returned false.')}if(!is_number(num)){if(opts.items.filter!="*"){num="visible"}else{var arr=[num,obj.items,opts[eType].items];for(var a=0,l=arr.length;a<l;a++){if(is_number(arr[a])||arr[a]=="page"||arr[a]=="visible"){num=arr[a];break}}}switch(num){case"page":e.stopImmediatePropagation();return $cfs.triggerHandler(cf_e(eType+"Page",conf),[obj,clb]);break;case"visible":if(!opts.items.visibleConf.variable&&opts.items.filter=="*"){num=opts.items.visible}break}}if(scrl.isStopped){$cfs.trigger(cf_e("resume",conf));$cfs.trigger(cf_e("queue",conf),[eType,[obj,num,clb]]);e.stopImmediatePropagation();return debug(conf,"Carousel resumed scrolling.")}if(obj.duration>0){if(crsl.isScrolling){if(obj.queue){if(obj.queue=="last"){queu=[]}if(obj.queue!="first"||queu.length==0){$cfs.trigger(cf_e("queue",conf),[eType,[obj,num,clb]])}}e.stopImmediatePropagation();return debug(conf,"Carousel currently scrolling.")}}tmrs.timePassed=0;$cfs.trigger(cf_e("slide_"+eType,conf),[obj,num]);if(opts.synchronise){var s=opts.synchronise,c=[obj,num];for(var j=0,l=s.length;j<l;j++){var d=eType;if(!s[j][2]){d=(d=="prev")?"next":"prev"}if(!s[j][1]){c[0]=s[j][0].triggerHandler("_cfs_triggerEvent",["configuration",d])}c[1]=num+s[j][3];s[j][0].trigger("_cfs_triggerEvent",["slide_"+d,c])}}return true});$cfs.bind(cf_e("slide_prev",conf),function(e,sO,nI){e.stopPropagation();var a_itm=$cfs.children();if(!opts.circular){if(itms.first==0){if(opts.infinite){$cfs.trigger(cf_e("next",conf),itms.total-1)}return e.stopImmediatePropagation()}}sz_resetMargin(a_itm,opts);if(!is_number(nI)){if(opts.items.visibleConf.variable){nI=gn_getVisibleItemsPrev(a_itm,opts,itms.total-1)}else{if(opts.items.filter!="*"){var xI=(is_number(sO.items))?sO.items:gn_getVisibleOrg($cfs,opts);nI=gn_getScrollItemsPrevFilter(a_itm,opts,itms.total-1,xI)}else{nI=opts.items.visible}}nI=cf_getAdjust(nI,opts,sO.items,$tt0)}if(!opts.circular){if(itms.total-nI<itms.first){nI=itms.total-itms.first}}opts.items.visibleConf.old=opts.items.visible;if(opts.items.visibleConf.variable){var vI=cf_getItemsAdjust(gn_getVisibleItemsNext(a_itm,opts,itms.total-nI),opts,opts.items.visibleConf.adjust,$tt0);if(opts.items.visible+nI<=vI&&nI<itms.total){nI++;vI=cf_getItemsAdjust(gn_getVisibleItemsNext(a_itm,opts,itms.total-nI),opts,opts.items.visibleConf.adjust,$tt0)}opts.items.visible=vI}else{if(opts.items.filter!="*"){var vI=gn_getVisibleItemsNextFilter(a_itm,opts,itms.total-nI);opts.items.visible=cf_getItemsAdjust(vI,opts,opts.items.visibleConf.adjust,$tt0)}}sz_resetMargin(a_itm,opts,true);if(nI==0){e.stopImmediatePropagation();return debug(conf,"0 items to scroll: Not scrolling.")}debug(conf,"Scrolling "+nI+" items backward.");itms.first+=nI;while(itms.first>=itms.total){itms.first-=itms.total}if(!opts.circular){if(itms.first==0&&sO.onEnd){sO.onEnd.call($tt0,"prev")}if(!opts.infinite){nv_enableNavi(opts,itms.first,conf)}}$cfs.children().slice(itms.total-nI,itms.total).prependTo($cfs);if(itms.total<opts.items.visible+nI){$cfs.children().slice(0,(opts.items.visible+nI)-itms.total).clone(true).appendTo($cfs)}var a_itm=$cfs.children(),i_old=gi_getOldItemsPrev(a_itm,opts,nI),i_new=gi_getNewItemsPrev(a_itm,opts),i_cur_l=a_itm.eq(nI-1),i_old_l=i_old.last(),i_new_l=i_new.last();sz_resetMargin(a_itm,opts);var pL=0,pR=0;if(opts.align){var p=cf_getAlignPadding(i_new,opts);pL=p[0];pR=p[1]}var oL=(pL<0)?opts.padding[opts.d[3]]:0;var hiddenitems=false,i_skp=$();if(opts.items.visible<nI){i_skp=a_itm.slice(opts.items.visibleConf.old,nI);if(sO.fx=="directscroll"){var orgW=opts.items[opts.d.width];hiddenitems=i_skp;i_cur_l=i_new_l;sc_hideHiddenItems(hiddenitems);opts.items[opts.d.width]="variable"}}var $cf2=false,i_siz=ms_getTotalSize(a_itm.slice(0,nI),opts,"width"),w_siz=cf_mapWrapperSizes(ms_getSizes(i_new,opts,true),opts,!opts.usePadding),i_siz_vis=0,a_cfs={},a_wsz={},a_cur={},a_old={},a_new={},a_lef={},a_lef_vis={},a_dur=sc_getDuration(sO,opts,nI,i_siz);switch(sO.fx){case"cover":case"cover-fade":i_siz_vis=ms_getTotalSize(a_itm.slice(0,opts.items.visible),opts,"width");break}if(hiddenitems){opts.items[opts.d.width]=orgW}sz_resetMargin(a_itm,opts,true);if(pR>=0){sz_resetMargin(i_old_l,opts,opts.padding[opts.d[1]])}if(pL>=0){sz_resetMargin(i_cur_l,opts,opts.padding[opts.d[3]])}if(opts.align){opts.padding[opts.d[1]]=pR;opts.padding[opts.d[3]]=pL}a_lef[opts.d.left]=-(i_siz-oL);a_lef_vis[opts.d.left]=-(i_siz_vis-oL);a_wsz[opts.d.left]=w_siz[opts.d.width];var _s_wrapper=function(){},_a_wrapper=function(){},_s_paddingold=function(){},_a_paddingold=function(){},_s_paddingnew=function(){},_a_paddingnew=function(){},_s_paddingcur=function(){},_a_paddingcur=function(){},_onafter=function(){},_moveitems=function(){},_position=function(){};switch(sO.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":$cf2=$cfs.clone(true).appendTo($wrp);break}switch(sO.fx){case"crossfade":case"uncover":case"uncover-fade":$cf2.children().slice(0,nI).remove();$cf2.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":$cf2.children().slice(opts.items.visible).remove();$cf2.css(a_lef_vis);break}$cfs.css(a_lef);scrl=sc_setScroll(a_dur,sO.easing,conf);a_cfs[opts.d.left]=(opts.usePadding)?opts.padding[opts.d[3]]:0;if(opts[opts.d.width]=="variable"||opts[opts.d.height]=="variable"){_s_wrapper=function(){$wrp.css(w_siz)};_a_wrapper=function(){scrl.anims.push([$wrp,w_siz])}}if(opts.usePadding){if(i_new_l.not(i_cur_l).length){a_cur[opts.d.marginRight]=i_cur_l.data("_cfs_origCssMargin");if(pL<0){i_cur_l.css(a_cur)}else{_s_paddingcur=function(){i_cur_l.css(a_cur)};_a_paddingcur=function(){scrl.anims.push([i_cur_l,a_cur])}}}switch(sO.fx){case"cover":case"cover-fade":$cf2.children().eq(nI-1).css(a_cur);break}if(i_new_l.not(i_old_l).length){a_old[opts.d.marginRight]=i_old_l.data("_cfs_origCssMargin");_s_paddingold=function(){i_old_l.css(a_old)};_a_paddingold=function(){scrl.anims.push([i_old_l,a_old])}}if(pR>=0){a_new[opts.d.marginRight]=i_new_l.data("_cfs_origCssMargin")+opts.padding[opts.d[1]];_s_paddingnew=function(){i_new_l.css(a_new)};_a_paddingnew=function(){scrl.anims.push([i_new_l,a_new])}}}_position=function(){$cfs.css(a_cfs)};var overFill=opts.items.visible+nI-itms.total;_moveitems=function(){if(overFill>0){$cfs.children().slice(itms.total).remove();i_old=$($cfs.children().slice(itms.total-(opts.items.visible-overFill)).get().concat($cfs.children().slice(0,overFill).get()))}sc_showHiddenItems(hiddenitems);if(opts.usePadding){var l_itm=$cfs.children().eq(opts.items.visible+nI-1);l_itm.css(opts.d.marginRight,l_itm.data("_cfs_origCssMargin"))}};var cb_arguments=sc_mapCallbackArguments(i_old,i_skp,i_new,nI,"prev",a_dur,w_siz);_onafter=function(){sc_afterScroll($cfs,$cf2,sO);crsl.isScrolling=false;clbk.onAfter=sc_fireCallbacks($tt0,sO,"onAfter",cb_arguments,clbk);queu=sc_fireQueue($cfs,queu,conf);if(!crsl.isPaused){$cfs.trigger(cf_e("play",conf))}};crsl.isScrolling=true;tmrs=sc_clearTimers(tmrs);clbk.onBefore=sc_fireCallbacks($tt0,sO,"onBefore",cb_arguments,clbk);switch(sO.fx){case"none":$cfs.css(a_cfs);_s_wrapper();_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();_onafter();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){_s_wrapper();_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();scrl=sc_setScroll(a_dur,sO.easing,conf);scrl.anims.push([$cfs,{opacity:1},_onafter]);sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0});scrl.anims.push([$cf2,{opacity:0}]);scrl.anims.push([$cfs,{opacity:1},_onafter]);_a_wrapper();_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();break;case"cover":scrl.anims.push([$cf2,a_cfs,function(){_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();_onafter()}]);_a_wrapper();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]);scrl.anims.push([$cf2,a_cfs,function(){_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();_onafter()}]);_a_wrapper();break;case"uncover":scrl.anims.push([$cf2,a_wsz,_onafter]);_a_wrapper();_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();break;case"uncover-fade":$cfs.css({opacity:0});scrl.anims.push([$cfs,{opacity:1}]);scrl.anims.push([$cf2,a_wsz,_onafter]);_a_wrapper();_s_paddingold();_s_paddingnew();_s_paddingcur();_position();_moveitems();break;default:scrl.anims.push([$cfs,a_cfs,function(){_moveitems();_onafter()}]);_a_wrapper();_a_paddingold();_a_paddingnew();_a_paddingcur();break}sc_startScroll(scrl,conf);cf_setCookie(opts.cookie,$cfs,conf);$cfs.trigger(cf_e("updatePageStatus",conf),[false,w_siz]);return true});$cfs.bind(cf_e("slide_next",conf),function(e,sO,nI){e.stopPropagation();var a_itm=$cfs.children();if(!opts.circular){if(itms.first==opts.items.visible){if(opts.infinite){$cfs.trigger(cf_e("prev",conf),itms.total-1)}return e.stopImmediatePropagation()}}sz_resetMargin(a_itm,opts);if(!is_number(nI)){if(opts.items.filter!="*"){var xI=(is_number(sO.items))?sO.items:gn_getVisibleOrg($cfs,opts);nI=gn_getScrollItemsNextFilter(a_itm,opts,0,xI)}else{nI=opts.items.visible}nI=cf_getAdjust(nI,opts,sO.items,$tt0)}var lastItemNr=(itms.first==0)?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable){var vI=gn_getVisibleItemsNext(a_itm,opts,nI),xI=gn_getVisibleItemsPrev(a_itm,opts,lastItemNr-1)}else{var vI=opts.items.visible,xI=opts.items.visible}if(nI+vI>lastItemNr){nI=lastItemNr-xI}}opts.items.visibleConf.old=opts.items.visible;if(opts.items.visibleConf.variable){var vI=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(a_itm,opts,nI,lastItemNr),opts,opts.items.visibleConf.adjust,$tt0);while(opts.items.visible-nI>=vI&&nI<itms.total){nI++;vI=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(a_itm,opts,nI,lastItemNr),opts,opts.items.visibleConf.adjust,$tt0)}opts.items.visible=vI}else{if(opts.items.filter!="*"){var vI=gn_getVisibleItemsNextFilter(a_itm,opts,nI);opts.items.visible=cf_getItemsAdjust(vI,opts,opts.items.visibleConf.adjust,$tt0)}}sz_resetMargin(a_itm,opts,true);if(nI==0){e.stopImmediatePropagation();return debug(conf,"0 items to scroll: Not scrolling.")}debug(conf,"Scrolling "+nI+" items forward.");itms.first-=nI;while(itms.first<0){itms.first+=itms.total}if(!opts.circular){if(itms.first==opts.items.visible&&sO.onEnd){sO.onEnd.call($tt0,"next")}if(!opts.infinite){nv_enableNavi(opts,itms.first,conf)}}if(itms.total<opts.items.visible+nI){$cfs.children().slice(0,(opts.items.visible+nI)-itms.total).clone(true).appendTo($cfs)}var a_itm=$cfs.children(),i_old=gi_getOldItemsNext(a_itm,opts),i_new=gi_getNewItemsNext(a_itm,opts,nI),i_cur_l=a_itm.eq(nI-1),i_old_l=i_old.last(),i_new_l=i_new.last();sz_resetMargin(a_itm,opts);var pL=0,pR=0;if(opts.align){var p=cf_getAlignPadding(i_new,opts);pL=p[0];pR=p[1]}var hiddenitems=false,i_skp=$();if(opts.items.visibleConf.old<nI){i_skp=a_itm.slice(opts.items.visibleConf.old,nI);if(sO.fx=="directscroll"){var orgW=opts.items[opts.d.width];hiddenitems=i_skp;i_cur_l=i_old_l;sc_hideHiddenItems(hiddenitems);opts.items[opts.d.width]="variable"}}var $cf2=false,i_siz=ms_getTotalSize(a_itm.slice(0,nI),opts,"width"),w_siz=cf_mapWrapperSizes(ms_getSizes(i_new,opts,true),opts,!opts.usePadding),i_siz_vis=0,a_cfs={},a_cfs_vis={},a_cur={},a_old={},a_lef={},a_dur=sc_getDuration(sO,opts,nI,i_siz);switch(sO.fx){case"uncover":case"uncover-fade":i_siz_vis=ms_getTotalSize(a_itm.slice(0,opts.items.visibleConf.old),opts,"width");break}if(hiddenitems){opts.items[opts.d.width]=orgW}if(opts.align){if(opts.padding[opts.d[1]]<0){opts.padding[opts.d[1]]=0}}sz_resetMargin(a_itm,opts,true);sz_resetMargin(i_old_l,opts,opts.padding[opts.d[1]]);if(opts.align){opts.padding[opts.d[1]]=pR;opts.padding[opts.d[3]]=pL}a_lef[opts.d.left]=(opts.usePadding)?opts.padding[opts.d[3]]:0;var _s_wrapper=function(){},_a_wrapper=function(){},_s_paddingold=function(){},_a_paddingold=function(){},_s_paddingcur=function(){},_a_paddingcur=function(){},_onafter=function(){},_moveitems=function(){},_position=function(){};switch(sO.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":$cf2=$cfs.clone(true).appendTo($wrp);$cf2.children().slice(opts.items.visibleConf.old).remove();break}switch(sO.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1);$cf2.css("zIndex",0);break}scrl=sc_setScroll(a_dur,sO.easing,conf);a_cfs[opts.d.left]=-i_siz;a_cfs_vis[opts.d.left]=-i_siz_vis;if(pL<0){a_cfs[opts.d.left]+=pL}if(opts[opts.d.width]=="variable"||opts[opts.d.height]=="variable"){_s_wrapper=function(){$wrp.css(w_siz)};_a_wrapper=function(){scrl.anims.push([$wrp,w_siz])}}if(opts.usePadding){var i_new_l_m=i_new_l.data("_cfs_origCssMargin");if(pR>=0){i_new_l_m+=opts.padding[opts.d[1]]}i_new_l.css(opts.d.marginRight,i_new_l_m);if(i_cur_l.not(i_old_l).length){a_old[opts.d.marginRight]=i_old_l.data("_cfs_origCssMargin")}_s_paddingold=function(){i_old_l.css(a_old)};_a_paddingold=function(){scrl.anims.push([i_old_l,a_old])};var i_cur_l_m=i_cur_l.data("_cfs_origCssMargin");if(pL>0){i_cur_l_m+=opts.padding[opts.d[3]]}a_cur[opts.d.marginRight]=i_cur_l_m;_s_paddingcur=function(){i_cur_l.css(a_cur)};_a_paddingcur=function(){scrl.anims.push([i_cur_l,a_cur])}}_position=function(){$cfs.css(a_lef)};var overFill=opts.items.visible+nI-itms.total;_moveitems=function(){if(overFill>0){$cfs.children().slice(itms.total).remove()}var l_itm=$cfs.children().slice(0,nI).appendTo($cfs).last();if(overFill>0){i_new=gi_getCurrentItems(a_itm,opts)}sc_showHiddenItems(hiddenitems);if(opts.usePadding){if(itms.total<opts.items.visible+nI){var i_cur_l=$cfs.children().eq(opts.items.visible-1);i_cur_l.css(opts.d.marginRight,i_cur_l.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}l_itm.css(opts.d.marginRight,l_itm.data("_cfs_origCssMargin"))}};var cb_arguments=sc_mapCallbackArguments(i_old,i_skp,i_new,nI,"next",a_dur,w_siz);_onafter=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex"));sc_afterScroll($cfs,$cf2,sO);crsl.isScrolling=false;clbk.onAfter=sc_fireCallbacks($tt0,sO,"onAfter",cb_arguments,clbk);queu=sc_fireQueue($cfs,queu,conf);if(!crsl.isPaused){$cfs.trigger(cf_e("play",conf))}};crsl.isScrolling=true;tmrs=sc_clearTimers(tmrs);clbk.onBefore=sc_fireCallbacks($tt0,sO,"onBefore",cb_arguments,clbk);switch(sO.fx){case"none":$cfs.css(a_cfs);_s_wrapper();_s_paddingold();_s_paddingcur();_position();_moveitems();_onafter();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){_s_wrapper();_s_paddingold();_s_paddingcur();_position();_moveitems();scrl=sc_setScroll(a_dur,sO.easing,conf);scrl.anims.push([$cfs,{opacity:1},_onafter]);sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0});scrl.anims.push([$cf2,{opacity:0}]);scrl.anims.push([$cfs,{opacity:1},_onafter]);_a_wrapper();_s_paddingold();_s_paddingcur();_position();_moveitems();break;case"cover":$cfs.css(opts.d.left,$wrp[opts.d.width]());scrl.anims.push([$cfs,a_lef,_onafter]);_a_wrapper();_s_paddingold();_s_paddingcur();_moveitems();break;case"cover-fade":$cfs.css(opts.d.left,$wrp[opts.d.width]());scrl.anims.push([$cf2,{opacity:0}]);scrl.anims.push([$cfs,a_lef,_onafter]);_a_wrapper();_s_paddingold();_s_paddingcur();_moveitems();break;case"uncover":scrl.anims.push([$cf2,a_cfs_vis,_onafter]);_a_wrapper();_s_paddingold();_s_paddingcur();_position();_moveitems();break;case"uncover-fade":$cfs.css({opacity:0});scrl.anims.push([$cfs,{opacity:1}]);scrl.anims.push([$cf2,a_cfs_vis,_onafter]);_a_wrapper();_s_paddingold();_s_paddingcur();_position();_moveitems();break;default:scrl.anims.push([$cfs,a_cfs,function(){_position();_moveitems();_onafter()}]);_a_wrapper();_a_paddingold();_a_paddingcur();break}sc_startScroll(scrl,conf);cf_setCookie(opts.cookie,$cfs,conf);$cfs.trigger(cf_e("updatePageStatus",conf),[false,w_siz]);return true});$cfs.bind(cf_e("slideTo",conf),function(e,num,dev,org,obj,dir,clb){e.stopPropagation();var v=[num,dev,org,obj,dir,clb],t=["string/number/object","number","boolean","object","string","function"],a=cf_sortParams(v,t);obj=a[3];dir=a[4];clb=a[5];num=gn_getItemIndex(a[0],a[1],a[2],itms,$cfs);if(num==0){return false}if(!is_object(obj)){obj=false}if(dir!="prev"&&dir!="next"){if(opts.circular){dir=(num<=itms.total/2)?"next":"prev"}else{dir=(itms.first==0||itms.first>num)?"next":"prev"}}if(dir=="prev"){num=itms.total-num}$cfs.trigger(cf_e(dir,conf),[obj,num,clb]);return true});$cfs.bind(cf_e("prevPage",conf),function(e,obj,clb){e.stopPropagation();var cur=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[cur-1,obj,"prev",clb])});$cfs.bind(cf_e("nextPage",conf),function(e,obj,clb){e.stopPropagation();var cur=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[cur+1,obj,"next",clb])});$cfs.bind(cf_e("slideToPage",conf),function(e,pag,obj,dir,clb){e.stopPropagation();if(!is_number(pag)){pag=$cfs.triggerHandler(cf_e("currentPage",conf))}var ipp=opts.pagination.items||opts.items.visible,max=Math.ceil(itms.total/ipp)-1;if(pag<0){pag=max}if(pag>max){pag=0}return $cfs.triggerHandler(cf_e("slideTo",conf),[pag*ipp,0,true,obj,dir,clb])});$cfs.bind(cf_e("jumpToStart",conf),function(e,s){e.stopPropagation();if(s){s=gn_getItemIndex(s,0,true,itms,$cfs)}else{s=0}if(s!=0){if(itms.total>0){while(s>itms.total){s-=itms.total}}$cfs.prepend($cfs.children().slice(s,itms.total))}return true});$cfs.bind(cf_e("synchronise",conf),function(e,s){e.stopPropagation();if(s){s=cf_getSynchArr(s)}else{if(opts.synchronise){s=opts.synchronise}else{return debug(conf,"No carousel to synchronise.")}}var n=$cfs.triggerHandler(cf_e("currentPosition",conf)),x=true;for(var j=0,l=s.length;j<l;j++){if(!s[j][0].triggerHandler(cf_e("slideTo",conf),[n,s[j][3],true])){x=false}}return x});$cfs.bind(cf_e("queue",conf),function(e,dir,opt){e.stopPropagation();if(is_function(dir)){dir.call($tt0,queu)}else{if(is_array(dir)){queu=dir}else{if(!is_undefined(dir)){queu.push([dir,opt])}}}return queu});$cfs.bind(cf_e("insertItem",conf),function(e,itm,num,org,dev){e.stopPropagation();var v=[itm,num,org,dev],t=["string/object","string/number/object","boolean","number"],a=cf_sortParams(v,t);itm=a[0];num=a[1];org=a[2];dev=a[3];if(is_object(itm)&&!is_jquery(itm)){itm=$(itm)}else{if(is_string(itm)){itm=$(itm)}}if(!is_jquery(itm)||itm.length==0){return debug(conf,"Not a valid object.")}if(is_undefined(num)){num="end"}sz_storeMargin(itm,opts);sz_storeOrigCss(itm);var orgNum=num,before="before";if(num=="end"){if(org){if(itms.first==0){num=itms.total-1;before="after"}else{num=itms.first;itms.first+=itm.length}if(num<0){num=0}}else{num=itms.total-1;before="after"}}else{num=gn_getItemIndex(num,dev,org,itms,$cfs)}var $cit=$cfs.children().eq(num);if($cit.length){$cit[before](itm)}else{debug(conf,"Correct insert-position not found! Appending item to the end.");$cfs.append(itm)}if(orgNum!="end"&&!org){if(num<itms.first){itms.first+=itm.length}}itms.total=$cfs.children().length;if(itms.first>=itms.total){itms.first-=itms.total}$cfs.trigger(cf_e("updateSizes",conf));$cfs.trigger(cf_e("linkAnchors",conf));return true});$cfs.bind(cf_e("removeItem",conf),function(e,num,org,dev){e.stopPropagation();var v=[num,org,dev],t=["string/number/object","boolean","number"],a=cf_sortParams(v,t);num=a[0];org=a[1];dev=a[2];var removed=false;if(num instanceof $&&num.length>1){$removed=$();num.each(function(i,el){var $rem=$cfs.trigger(cf_e("removeItem",conf),[$(this),org,dev]);if($rem){$removed=$removed.add($rem)}});return $removed}if(is_undefined(num)||num=="end"){$removed=$cfs.children().last()}else{num=gn_getItemIndex(num,dev,org,itms,$cfs);var $removed=$cfs.children().eq(num);if($removed.length){if(num<itms.first){itms.first-=$removed.length}}}if($removed&&$removed.length){$removed.detach();itms.total=$cfs.children().length;$cfs.trigger(cf_e("updateSizes",conf))}return $removed});$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(e,fn){e.stopPropagation();var eType=e.type.slice(conf.events.prefix.length);if(is_array(fn)){clbk[eType]=fn}if(is_function(fn)){clbk[eType].push(fn)}return clbk[eType]});$cfs.bind(cf_e("currentPosition",conf),function(e,fn){e.stopPropagation();if(itms.first==0){var val=0}else{var val=itms.total-itms.first}if(is_function(fn)){fn.call($tt0,val)}return val});$cfs.bind(cf_e("currentPage",conf),function(e,fn){e.stopPropagation();var ipp=opts.pagination.items||opts.items.visible,max=Math.ceil(itms.total/ipp-1),nr;if(itms.first==0){nr=0}else{if(itms.first<itms.total%ipp){nr=0}else{if(itms.first==ipp&&!opts.circular){nr=max}else{nr=Math.round((itms.total-itms.first)/ipp)}}}if(nr<0){nr=0}if(nr>max){nr=max}if(is_function(fn)){fn.call($tt0,nr)}return nr});$cfs.bind(cf_e("currentVisible",conf),function(e,fn){e.stopPropagation();var $i=gi_getCurrentItems($cfs.children(),opts);if(is_function(fn)){fn.call($tt0,$i)}return $i});$cfs.bind(cf_e("slice",conf),function(e,f,l,fn){e.stopPropagation();if(itms.total==0){return false}var v=[f,l,fn],t=["number","number","function"],a=cf_sortParams(v,t);f=(is_number(a[0]))?a[0]:0;l=(is_number(a[1]))?a[1]:itms.total;fn=a[2];f+=itms.first;l+=itms.first;if(items.total>0){while(f>itms.total){f-=itms.total}while(l>itms.total){l-=itms.total}while(f<0){f+=itms.total}while(l<0){l+=itms.total}}var $iA=$cfs.children(),$i;if(l>f){$i=$iA.slice(f,l)}else{$i=$($iA.slice(f,itms.total).get().concat($iA.slice(0,l).get()))}if(is_function(fn)){fn.call($tt0,$i)}return $i});$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(e,fn){e.stopPropagation();var eType=e.type.slice(conf.events.prefix.length),value=crsl[eType];if(is_function(fn)){fn.call($tt0,value)}return value});$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=false;if(is_function(a)){a.call($tt0,opts)}else{if(is_object(a)){opts_orig=$.extend(true,{},opts_orig,a);if(b!==false){reInit=true}else{opts=$.extend(true,{},opts,a)}}else{if(!is_undefined(a)){if(is_function(b)){var val=eval("opts."+a);if(is_undefined(val)){val=""}b.call($tt0,val)}else{if(!is_undefined(b)){if(typeof c!=="boolean"){c=true}eval("opts_orig."+a+" = b");if(c!==false){reInit=true}else{eval("opts."+a+" = b")}}else{return eval("opts."+a)}}}}}if(reInit){sz_resetMargin($cfs.children(),opts);FN._init(opts_orig);FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[true,sz])}return opts});$cfs.bind(cf_e("linkAnchors",conf),function(e,$con,sel){e.stopPropagation();if(is_undefined($con)){$con=$("body")}else{if(is_string($con)){$con=$($con)}}if(!is_jquery($con)||$con.length==0){return debug(conf,"Not a valid object.")}if(!is_string(sel)){sel="a.caroufredsel"}$con.find(sel).each(function(){var h=this.hash||"";if(h.length>0&&$cfs.children().index($(h))!=-1){$(this).unbind("click").click(function(e){e.preventDefault();$cfs.trigger(cf_e("slideTo",conf),h)})}});return true});$cfs.bind(cf_e("updatePageStatus",conf),function(e,build,sizes){e.stopPropagation();if(!opts.pagination.container){return}var ipp=opts.pagination.items||opts.items.visible,pgs=Math.ceil(itms.total/ipp);if(build){if(opts.pagination.anchorBuilder){opts.pagination.container.children().remove();opts.pagination.container.each(function(){for(var a=0;a<pgs;a++){var i=$cfs.children().eq(gn_getItemIndex(a*ipp,0,true,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(i[0],a+1))}})}opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(a){$(this).bind(opts.pagination.event,function(e){e.preventDefault();$cfs.trigger(cf_e("slideTo",conf),[a*ipp,-opts.pagination.deviation,true,opts.pagination])})})})}var selected=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;if(selected>=pgs){selected=0}if(selected<0){selected=pgs-1}opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(selected).addClass(cf_c("selected",conf))});return true});$cfs.bind(cf_e("updateSizes",conf),function(e){var vI=opts.items.visible,a_itm=$cfs.children(),avail_primary=ms_getParentSize($wrp,opts,"width");itms.total=a_itm.length;if(crsl.primarySizePercentage){opts.maxDimension=avail_primary;opts[opts.d.width]=ms_getPercentage(avail_primary,crsl.primarySizePercentage)}else{opts.maxDimension=ms_getMaxDimension(opts,avail_primary)}if(opts.responsive){opts.items.width=opts.items.sizesConf.width;opts.items.height=opts.items.sizesConf.height;opts=in_getResponsiveValues(opts,a_itm,avail_primary);vI=opts.items.visible;sz_setResponsiveSizes(opts,a_itm)}else{if(opts.items.visibleConf.variable){vI=gn_getVisibleItemsNext(a_itm,opts,0)}else{if(opts.items.filter!="*"){vI=gn_getVisibleItemsNextFilter(a_itm,opts,0)}}}if(!opts.circular&&itms.first!=0&&vI>itms.first){if(opts.items.visibleConf.variable){var nI=gn_getVisibleItemsPrev(a_itm,opts,itms.first)-itms.first}else{if(opts.items.filter!="*"){var nI=gn_getVisibleItemsPrevFilter(a_itm,opts,itms.first)-itms.first}else{var nI=opts.items.visible-itms.first}}debug(conf,"Preventing non-circular: sliding "+nI+" items backward.");$cfs.trigger(cf_e("prev",conf),nI)}opts.items.visible=cf_getItemsAdjust(vI,opts,opts.items.visibleConf.adjust,$tt0);opts.items.visibleConf.old=opts.items.visible;opts=in_getAlignPadding(opts,a_itm);var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[true,sz]);nv_showNavi(opts,itms.total,conf);nv_enableNavi(opts,itms.first,conf);return sz});$cfs.bind(cf_e("destroy",conf),function(e,orgOrder){e.stopPropagation();tmrs=sc_clearTimers(tmrs);$cfs.data("_cfs_isCarousel",false);$cfs.trigger(cf_e("finish",conf));if(orgOrder){$cfs.trigger(cf_e("jumpToStart",conf))}sz_restoreOrigCss($cfs.children());sz_restoreOrigCss($cfs);FN._unbind_events();FN._unbind_buttons();if(conf.wrapper=="parent"){sz_restoreOrigCss($wrp)}else{$wrp.replaceWith($cfs)}return true});$cfs.bind(cf_e("debug",conf),function(e){debug(conf,"Carousel width: "+opts.width);debug(conf,"Carousel height: "+opts.height);debug(conf,"Item widths: "+opts.items.width);debug(conf,"Item heights: "+opts.items.height);debug(conf,"Number of items visible: "+opts.items.visible);if(opts.auto.play){debug(conf,"Number of items scrolled automatically: "+opts.auto.items)}if(opts.prev.button){debug(conf,"Number of items scrolled backward: "+opts.prev.items)}if(opts.next.button){debug(conf,"Number of items scrolled forward: "+opts.next.items)}return conf.debug});$cfs.bind("_cfs_triggerEvent",function(e,n,o){e.stopPropagation();return $cfs.triggerHandler(cf_e(n,conf),o)})};FN._unbind_events=function(){$cfs.unbind(cf_e("",conf));$cfs.unbind(cf_e("",conf,false));$cfs.unbind("_cfs_triggerEvent")};FN._bind_buttons=function(){FN._unbind_buttons();nv_showNavi(opts,itms.total,conf);nv_enableNavi(opts,itms.first,conf);if(opts.auto.pauseOnHover){var pC=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),pC)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button){opts.auto.button.bind(cf_e(opts.auto.event,conf,false),function(e){e.preventDefault();var ev=false,pC=null;if(crsl.isPaused){ev="play"}else{if(opts.auto.pauseOnEvent){ev="pause";pC=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)}}if(ev){$cfs.trigger(cf_e(ev,conf),pC)}})}if(opts.prev.button){opts.prev.button.bind(cf_e(opts.prev.event,conf,false),function(e){e.preventDefault();$cfs.trigger(cf_e("prev",conf))});if(opts.prev.pauseOnHover){var pC=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),pC)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}}if(opts.next.button){opts.next.button.bind(cf_e(opts.next.event,conf,false),function(e){e.preventDefault();$cfs.trigger(cf_e("next",conf))});if(opts.next.pauseOnHover){var pC=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),pC)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}}if(opts.pagination.container){if(opts.pagination.pauseOnHover){var pC=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),pC)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}}if(opts.prev.key||opts.next.key){$(document).bind(cf_e("keyup",conf,false,true,true),function(e){var k=e.keyCode;if(k==opts.next.key){e.preventDefault();$cfs.trigger(cf_e("next",conf))}if(k==opts.prev.key){e.preventDefault();$cfs.trigger(cf_e("prev",conf))}})}if(opts.pagination.keys){$(document).bind(cf_e("keyup",conf,false,true,true),function(e){var k=e.keyCode;if(k>=49&&k<58){k=(k-49)*opts.items.visible;if(k<=itms.total){e.preventDefault();$cfs.trigger(cf_e("slideTo",conf),[k,0,true,opts.pagination])}}})}if($.fn.swipe){var isTouch="ontouchstart" in window;if((isTouch&&opts.swipe.onTouch)||(!isTouch&&opts.swipe.onMouse)){var scP=$.extend(true,{},opts.prev,opts.swipe),scN=$.extend(true,{},opts.next,opts.swipe),swP=function(){$cfs.trigger(cf_e("prev",conf),[scP])},swN=function(){$cfs.trigger(cf_e("next",conf),[scN])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=swN;opts.swipe.options.swipeDown=swP;break;default:opts.swipe.options.swipeLeft=swN;opts.swipe.options.swipeRight=swP}if(crsl.swipe){$cfs.swipe("destroy")}$wrp.swipe(opts.swipe.options);$wrp.css("cursor","move");crsl.swipe=true}}if($.fn.mousewheel){if(opts.mousewheel){var mcP=$.extend(true,{},opts.prev,opts.mousewheel),mcN=$.extend(true,{},opts.next,opts.mousewheel);if(crsl.mousewheel){$wrp.unbind(cf_e("mousewheel",conf,false))}$wrp.bind(cf_e("mousewheel",conf,false),function(e,delta){e.preventDefault();if(delta>0){$cfs.trigger(cf_e("prev",conf),[mcP])}else{$cfs.trigger(cf_e("next",conf),[mcN])}});crsl.mousewheel=true}}if(opts.auto.play){$cfs.trigger(cf_e("play",conf),opts.auto.delay)}if(crsl.upDateOnWindowResize){var resizeFn=function(e){$cfs.trigger(cf_e("finish",conf));if(opts.auto.pauseOnResize&&!crsl.isPaused){$cfs.trigger(cf_e("play",conf))}sz_resetMargin($cfs.children(),opts);$cfs.trigger(cf_e("updateSizes",conf))};var $w=$(window),onResize=null;if($.debounce&&conf.onWindowResize=="debounce"){onResize=$.debounce(200,resizeFn)}else{if($.throttle&&conf.onWindowResize=="throttle"){onResize=$.throttle(300,resizeFn)}else{var _windowWidth=0,_windowHeight=0;onResize=function(){var nw=$w.width(),nh=$w.height();if(nw!=_windowWidth||nh!=_windowHeight){resizeFn();_windowWidth=nw;_windowHeight=nh}}}}$w.bind(cf_e("resize",conf,false,true,true),onResize)}};FN._unbind_buttons=function(){var ns1=cf_e("",conf),ns2=cf_e("",conf,false);ns3=cf_e("",conf,false,true,true);$(document).unbind(ns3);$(window).unbind(ns3);$wrp.unbind(ns2);if(opts.auto.button){opts.auto.button.unbind(ns2)}if(opts.prev.button){opts.prev.button.unbind(ns2)}if(opts.next.button){opts.next.button.unbind(ns2)}if(opts.pagination.container){opts.pagination.container.unbind(ns2);if(opts.pagination.anchorBuilder){opts.pagination.container.children().remove()}}if(crsl.swipe){$cfs.swipe("destroy");$wrp.css("cursor","default");crsl.swipe=false}if(crsl.mousewheel){crsl.mousewheel=false}nv_showNavi(opts,"hide",conf);nv_enableNavi(opts,"removeClass",conf)};if(is_boolean(configs)){configs={debug:configs}}var crsl={direction:"next",isPaused:true,isScrolling:false,isStopped:false,mousewheel:false,swipe:false},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:false,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(true,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(true,{},options),$wrp=(conf.wrapper=="parent")?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();conf.selector=$cfs.selector;conf.serialNumber=$.fn.carouFredSel.serialNumber++;conf.transition=(conf.transition&&$.fn.transition)?"transition":"animate";FN._init(opts_orig,true,starting_position);FN._build();FN._bind_events();FN._bind_buttons();if(is_array(opts.items.start)){var start_arr=opts.items.start}else{var start_arr=[];if(opts.items.start!=0){start_arr.push(opts.items.start)}}if(opts.cookie){start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10))}if(start_arr.length>0){for(var a=0,l=start_arr.length;a<l;a++){var s=start_arr[a];if(s==0){continue}if(s===true){s=window.location.hash;if(s.length<1){continue}}else{if(s==="random"){s=Math.floor(Math.random()*itms.total)}}if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,true,{fx:"none"}])){break}}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);if(opts.onCreate){opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm})}$cfs.trigger(cf_e("updatePageStatus",conf),[true,siz]);$cfs.trigger(cf_e("linkAnchors",conf));if(conf.debug){$cfs.trigger(cf_e("debug",conf))}return $cfs};$.fn.carouFredSel.serialNumber=1;$.fn.carouFredSel.defaults={synchronise:false,infinite:true,circular:true,responsive:false,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:false,event:"click",queue:false}};$.fn.carouFredSel.configs={debug:false,transition:false,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}};$.fn.carouFredSel.pageAnchorBuilder=function(nr){return'<a href="#"><span>'+nr+"</span></a>"};$.fn.carouFredSel.progressbarUpdater=function(perc){$(this).css("width",perc+"%")};$.fn.carouFredSel.cookie={get:function(n){n+="=";var ca=document.cookie.split(";");for(var a=0,l=ca.length;a<l;a++){var c=ca[a];while(c.charAt(0)==" "){c=c.slice(1)}if(c.indexOf(n)==0){return c.slice(n.length)}}return 0},set:function(n,v,d){var e="";if(d){var date=new Date();date.setTime(date.getTime()+(d*24*60*60*1000));e="; expires="+date.toGMTString()}document.cookie=n+"="+v+e+"; path=/"},remove:function(n){$.fn.carouFredSel.cookie.set(n,"",-1)}};function sc_setScroll(d,e,c){if(c.transition=="transition"){if(e=="swing"){e="ease"}}return{anims:[],duration:d,orgDuration:d,easing:e,startTime:getTime()}}function sc_startScroll(s,c){for(var a=0,l=s.anims.length;a<l;a++){var b=s.anims[a];if(!b){continue}b[0][c.transition](b[1],s.duration,s.easing,b[2])}}function sc_stopScroll(s,finish){if(!is_boolean(finish)){finish=true}if(is_object(s.pre)){sc_stopScroll(s.pre,finish)}for(var a=0,l=s.anims.length;a<l;a++){var b=s.anims[a];b[0].stop(true);if(finish){b[0].css(b[1]);if(is_function(b[2])){b[2]()}}}if(is_object(s.post)){sc_stopScroll(s.post,finish)}}function sc_afterScroll($c,$c2,o){if($c2){$c2.remove()}switch(o.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":$c.css("opacity",1);$c.css("filter","");break}}function sc_fireCallbacks($t,o,b,a,c){if(o[b]){o[b].call($t,a)}if(c[b].length){for(var i=0,l=c[b].length;i<l;i++){c[b][i].call($t,a)}}return[]}function sc_fireQueue($c,q,c){if(q.length){$c.trigger(cf_e(q[0][0],c),q[0][1]);q.shift()}return q}function sc_hideHiddenItems(hiddenitems){hiddenitems.each(function(){var hi=$(this);hi.data("_cfs_isHidden",hi.is(":hidden")).hide()})}function sc_showHiddenItems(hiddenitems){if(hiddenitems){hiddenitems.each(function(){var hi=$(this);if(!hi.data("_cfs_isHidden")){hi.show()}})}}function sc_clearTimers(t){if(t.auto){clearTimeout(t.auto)}if(t.progress){clearInterval(t.progress)}return t}function sc_mapCallbackArguments(i_old,i_skp,i_new,s_itm,s_dir,s_dur,w_siz){return{width:w_siz.width,height:w_siz.height,items:{old:i_old,skipped:i_skp,visible:i_new},scroll:{items:s_itm,direction:s_dir,duration:s_dur}}}function sc_getDuration(sO,o,nI,siz){var dur=sO.duration;if(sO.fx=="none"){return 0}if(dur=="auto"){dur=o.scroll.duration/o.scroll.items*nI}else{if(dur<10){dur=siz/dur}}if(dur<1){return 0}if(sO.fx=="fade"){dur=dur/2}return Math.round(dur)}function nv_showNavi(o,t,c){var minimum=(is_number(o.items.minimum))?o.items.minimum:o.items.visible+1;if(t=="show"||t=="hide"){var f=t}else{if(minimum>t){debug(c,"Not enough items ("+t+" total, "+minimum+" needed): Hiding navigation.");var f="hide"}else{var f="show"}}var s=(f=="show")?"removeClass":"addClass",h=cf_c("hidden",c);if(o.auto.button){o.auto.button[f]()[s](h)}if(o.prev.button){o.prev.button[f]()[s](h)}if(o.next.button){o.next.button[f]()[s](h)}if(o.pagination.container){o.pagination.container[f]()[s](h)}}function nv_enableNavi(o,f,c){if(o.circular||o.infinite){return}var fx=(f=="removeClass"||f=="addClass")?f:false,di=cf_c("disabled",c);if(o.auto.button&&fx){o.auto.button[fx](di)}if(o.prev.button){var fn=fx||(f==0)?"addClass":"removeClass";o.prev.button[fn](di)}if(o.next.button){var fn=fx||(f==o.items.visible)?"addClass":"removeClass";o.next.button[fn](di)}}function go_getObject($tt,obj){if(is_function(obj)){obj=obj.call($tt)}else{if(is_undefined(obj)){obj={}}}return obj}function go_getItemsObject($tt,obj){obj=go_getObject($tt,obj);if(is_number(obj)){obj={visible:obj}}else{if(obj=="variable"){obj={visible:obj,width:obj,height:obj}}else{if(!is_object(obj)){obj={}}}}return obj}function go_getScrollObject($tt,obj){obj=go_getObject($tt,obj);if(is_number(obj)){if(obj<=50){obj={items:obj}}else{obj={duration:obj}}}else{if(is_string(obj)){obj={easing:obj}}else{if(!is_object(obj)){obj={}}}}return obj}function go_getNaviObject($tt,obj){obj=go_getObject($tt,obj);if(is_string(obj)){var temp=cf_getKeyCode(obj);if(temp==-1){obj=$(obj)}else{obj=temp}}return obj}function go_getAutoObject($tt,obj){obj=go_getNaviObject($tt,obj);if(is_jquery(obj)){obj={button:obj}}else{if(is_boolean(obj)){obj={play:obj}}else{if(is_number(obj)){obj={timeoutDuration:obj}}}}if(obj.progress){if(is_string(obj.progress)||is_jquery(obj.progress)){obj.progress={bar:obj.progress}}}return obj}function go_complementAutoObject($tt,obj){if(is_function(obj.button)){obj.button=obj.button.call($tt)}if(is_string(obj.button)){obj.button=$(obj.button)}if(!is_boolean(obj.play)){obj.play=true}if(!is_number(obj.delay)){obj.delay=0}if(is_undefined(obj.pauseOnEvent)){obj.pauseOnEvent=true}if(!is_boolean(obj.pauseOnResize)){obj.pauseOnResize=true}if(!is_number(obj.timeoutDuration)){obj.timeoutDuration=(obj.duration<10)?2500:obj.duration*5}if(obj.progress){if(is_function(obj.progress.bar)){obj.progress.bar=obj.progress.bar.call($tt)}if(is_string(obj.progress.bar)){obj.progress.bar=$(obj.progress.bar)}if(obj.progress.bar){if(!is_function(obj.progress.updater)){obj.progress.updater=$.fn.carouFredSel.progressbarUpdater}if(!is_number(obj.progress.interval)){obj.progress.interval=50}}else{obj.progress=false}}return obj}function go_getPrevNextObject($tt,obj){obj=go_getNaviObject($tt,obj);if(is_jquery(obj)){obj={button:obj}}else{if(is_number(obj)){obj={key:obj}}}return obj}function go_complementPrevNextObject($tt,obj){if(is_function(obj.button)){obj.button=obj.button.call($tt)}if(is_string(obj.button)){obj.button=$(obj.button)}if(is_string(obj.key)){obj.key=cf_getKeyCode(obj.key)}return obj}function go_getPaginationObject($tt,obj){obj=go_getNaviObject($tt,obj);if(is_jquery(obj)){obj={container:obj}}else{if(is_boolean(obj)){obj={keys:obj}}}return obj}function go_complementPaginationObject($tt,obj){if(is_function(obj.container)){obj.container=obj.container.call($tt)}if(is_string(obj.container)){obj.container=$(obj.container)}if(!is_number(obj.items)){obj.items=false}if(!is_boolean(obj.keys)){obj.keys=false}if(!is_function(obj.anchorBuilder)&&!is_false(obj.anchorBuilder)){obj.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder}if(!is_number(obj.deviation)){obj.deviation=0}return obj}function go_getSwipeObject($tt,obj){if(is_function(obj)){obj=obj.call($tt)}if(is_undefined(obj)){obj={onTouch:false}}if(is_true(obj)){obj={onTouch:obj}}else{if(is_number(obj)){obj={items:obj}}}return obj}function go_complementSwipeObject($tt,obj){if(!is_boolean(obj.onTouch)){obj.onTouch=true}if(!is_boolean(obj.onMouse)){obj.onMouse=false}if(!is_object(obj.options)){obj.options={}}if(!is_boolean(obj.options.triggerOnTouchEnd)){obj.options.triggerOnTouchEnd=false}return obj}function go_getMousewheelObject($tt,obj){if(is_function(obj)){obj=obj.call($tt)}if(is_true(obj)){obj={}}else{if(is_number(obj)){obj={items:obj}}else{if(is_undefined(obj)){obj=false}}}return obj}function go_complementMousewheelObject($tt,obj){return obj}function gn_getItemIndex(num,dev,org,items,$cfs){if(is_string(num)){num=$(num,$cfs)}if(is_object(num)){num=$(num,$cfs)}if(is_jquery(num)){num=$cfs.children().index(num);if(!is_boolean(org)){org=false}}else{if(!is_boolean(org)){org=true}}if(!is_number(num)){num=0}if(!is_number(dev)){dev=0}if(org){num+=items.first}num+=dev;if(items.total>0){while(num>=items.total){num-=items.total}while(num<0){num+=items.total}}return num}function gn_getVisibleItemsPrev(i,o,s){var t=0,x=0;for(var a=s;a>=0;a--){var j=i.eq(a);t+=(j.is(":visible"))?j[o.d.outerWidth](true):0;if(t>o.maxDimension){return x}if(a==0){a=i.length}x++}}function gn_getVisibleItemsPrevFilter(i,o,s){return gn_getItemsPrevFilter(i,o.items.filter,o.items.visibleConf.org,s)}function gn_getScrollItemsPrevFilter(i,o,s,m){return gn_getItemsPrevFilter(i,o.items.filter,m,s)}function gn_getItemsPrevFilter(i,f,m,s){var t=0,x=0;for(var a=s,l=i.length;a>=0;a--){x++;if(x==l){return x}var j=i.eq(a);if(j.is(f)){t++;if(t==m){return x}}if(a==0){a=l}}}function gn_getVisibleOrg($c,o){return o.items.visibleConf.org||$c.children().slice(0,o.items.visible).filter(o.items.filter).length}function gn_getVisibleItemsNext(i,o,s){var t=0,x=0;for(var a=s,l=i.length-1;a<=l;a++){var j=i.eq(a);t+=(j.is(":visible"))?j[o.d.outerWidth](true):0;if(t>o.maxDimension){return x}x++;if(x==l+1){return x}if(a==l){a=-1}}}function gn_getVisibleItemsNextTestCircular(i,o,s,l){var v=gn_getVisibleItemsNext(i,o,s);if(!o.circular){if(s+v>l){v=l-s}}return v}function gn_getVisibleItemsNextFilter(i,o,s){return gn_getItemsNextFilter(i,o.items.filter,o.items.visibleConf.org,s,o.circular)}function gn_getScrollItemsNextFilter(i,o,s,m){return gn_getItemsNextFilter(i,o.items.filter,m+1,s,o.circular)-1}function gn_getItemsNextFilter(i,f,m,s,c){var t=0,x=0;for(var a=s,l=i.length-1;a<=l;a++){x++;if(x>=l){return x}var j=i.eq(a);if(j.is(f)){t++;if(t==m){return x}}if(a==l){a=-1}}}function gi_getCurrentItems(i,o){return i.slice(0,o.items.visible)}function gi_getOldItemsPrev(i,o,n){return i.slice(n,o.items.visibleConf.old+n)}function gi_getNewItemsPrev(i,o){return i.slice(0,o.items.visible)}function gi_getOldItemsNext(i,o){return i.slice(0,o.items.visibleConf.old)}function gi_getNewItemsNext(i,o,n){return i.slice(n,o.items.visible+n)}function sz_storeMargin(i,o,d){if(o.usePadding){if(!is_string(d)){d="_cfs_origCssMargin"}i.each(function(){var j=$(this),m=parseInt(j.css(o.d.marginRight),10);if(!is_number(m)){m=0}j.data(d,m)})}}function sz_resetMargin(i,o,m){if(o.usePadding){var x=(is_boolean(m))?m:false;if(!is_number(m)){m=0}sz_storeMargin(i,o,"_cfs_tempCssMargin");i.each(function(){var j=$(this);j.css(o.d.marginRight,((x)?j.data("_cfs_tempCssMargin"):m+j.data("_cfs_origCssMargin")))})}}function sz_storeOrigCss(i){i.each(function(){var j=$(this);j.data("_cfs_origCss",j.attr("style")||"")})}function sz_restoreOrigCss(i){i.each(function(){var j=$(this);j.attr("style",j.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(o,all){var visb=o.items.visible,newS=o.items[o.d.width],seco=o[o.d.height],secp=is_percentage(seco);all.each(function(){var $t=$(this),nw=newS-ms_getPaddingBorderMargin($t,o,"Width");$t[o.d.width](nw);if(secp){$t[o.d.height](ms_getPercentage(nw,seco))}})}function sz_setSizes($c,o){var $w=$c.parent(),$i=$c.children(),$v=gi_getCurrentItems($i,o),sz=cf_mapWrapperSizes(ms_getSizes($v,o,true),o,false);$w.css(sz);if(o.usePadding){var p=o.padding,r=p[o.d[1]];if(o.align&&r<0){r=0}var $l=$v.last();$l.css(o.d.marginRight,$l.data("_cfs_origCssMargin")+r);$c.css(o.d.top,p[o.d[0]]);$c.css(o.d.left,p[o.d[3]])}$c.css(o.d.width,sz[o.d.width]+(ms_getTotalSize($i,o,"width")*2));$c.css(o.d.height,ms_getLargestSize($i,o,"height"));return sz}function ms_getSizes(i,o,wrapper){return[ms_getTotalSize(i,o,"width",wrapper),ms_getLargestSize(i,o,"height",wrapper)]}function ms_getLargestSize(i,o,dim,wrapper){if(!is_boolean(wrapper)){wrapper=false}if(is_number(o[o.d[dim]])&&wrapper){return o[o.d[dim]]}if(is_number(o.items[o.d[dim]])){return o.items[o.d[dim]]}dim=(dim.toLowerCase().indexOf("width")>-1)?"outerWidth":"outerHeight";return ms_getTrueLargestSize(i,o,dim)}function ms_getTrueLargestSize(i,o,dim){var s=0;for(var a=0,l=i.length;a<l;a++){var j=i.eq(a);var m=(j.is(":visible"))?j[o.d[dim]](true):0;if(s<m){s=m}}return s}function ms_getTotalSize(i,o,dim,wrapper){if(!is_boolean(wrapper)){wrapper=false}if(is_number(o[o.d[dim]])&&wrapper){return o[o.d[dim]]}if(is_number(o.items[o.d[dim]])){return o.items[o.d[dim]]*i.length}var d=(dim.toLowerCase().indexOf("width")>-1)?"outerWidth":"outerHeight",s=0;for(var a=0,l=i.length;a<l;a++){var j=i.eq(a);s+=(j.is(":visible"))?j[o.d[d]](true):0}return s}function ms_getParentSize($w,o,d){var isVisible=$w.is(":visible");if(isVisible){$w.hide()}var s=$w.parent()[o.d[d]]();if(isVisible){$w.show()}return s}function ms_getMaxDimension(o,a){return(is_number(o[o.d.width]))?o[o.d.width]:a}function ms_hasVariableSizes(i,o,dim){var s=false,v=false;for(var a=0,l=i.length;a<l;a++){var j=i.eq(a);var c=(j.is(":visible"))?j[o.d[dim]](true):0;if(s===false){s=c}else{if(s!=c){v=true}}if(s==0){v=true}}return v}function ms_getPaddingBorderMargin(i,o,d){return i[o.d["outer"+d]](true)-i[o.d[d.toLowerCase()]]()}function ms_getPercentage(s,o){if(is_percentage(o)){o=parseInt(o.slice(0,-1),10);if(!is_number(o)){return s}s*=o/100}return s}function cf_e(n,c,pf,ns,rd){if(!is_boolean(pf)){pf=true}if(!is_boolean(ns)){ns=true}if(!is_boolean(rd)){rd=false}if(pf){n=c.events.prefix+n}if(ns){n=n+"."+c.events.namespace}if(ns&&rd){n+=c.serialNumber}return n}function cf_c(n,c){return(is_string(c.classnames[n]))?c.classnames[n]:n}function cf_mapWrapperSizes(ws,o,p){if(!is_boolean(p)){p=true}var pad=(o.usePadding&&p)?o.padding:[0,0,0,0];var wra={};wra[o.d.width]=ws[0]+pad[1]+pad[3];wra[o.d.height]=ws[1]+pad[0]+pad[2];return wra}function cf_sortParams(vals,typs){var arr=[];for(var a=0,l1=vals.length;a<l1;a++){for(var b=0,l2=typs.length;b<l2;b++){if(typs[b].indexOf(typeof vals[a])>-1&&is_undefined(arr[b])){arr[b]=vals[a];break}}}return arr}function cf_getPadding(p){if(is_undefined(p)){return[0,0,0,0]}if(is_number(p)){return[p,p,p,p]}if(is_string(p)){p=p.split("px").join("").split("em").join("").split(" ")}if(!is_array(p)){return[0,0,0,0]}for(var i=0;i<4;i++){p[i]=parseInt(p[i],10)}switch(p.length){case 0:return[0,0,0,0];case 1:return[p[0],p[0],p[0],p[0]];case 2:return[p[0],p[1],p[0],p[1]];case 3:return[p[0],p[1],p[2],p[1]];default:return[p[0],p[1],p[2],p[3]]}}function cf_getAlignPadding(itm,o){var x=(is_number(o[o.d.width]))?Math.ceil(o[o.d.width]-ms_getTotalSize(itm,o,"width")):0;switch(o.align){case"left":return[0,x];case"right":return[x,0];case"center":default:return[Math.ceil(x/2),Math.floor(x/2)]}}function cf_getDimensions(o){var dm=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]];var dl=dm[0].length,dx=(o.direction=="right"||o.direction=="left")?0:1;var dimensions={};for(var d=0;d<dl;d++){dimensions[dm[0][d]]=dm[dx][d]}return dimensions}function cf_getAdjust(x,o,a,$t){var v=x;if(is_function(a)){v=a.call($t,v)}else{if(is_string(a)){var p=a.split("+"),m=a.split("-");if(m.length>p.length){var neg=true,sta=m[0],adj=m[1]}else{var neg=false,sta=p[0],adj=p[1]}switch(sta){case"even":v=(x%2==1)?x-1:x;break;case"odd":v=(x%2==0)?x-1:x;break;default:v=x;break}adj=parseInt(adj,10);if(is_number(adj)){if(neg){adj=-adj}v+=adj}}}if(!is_number(v)||v<1){v=1}return v}function cf_getItemsAdjust(x,o,a,$t){return cf_getItemAdjustMinMax(cf_getAdjust(x,o,a,$t),o.items.visibleConf)}function cf_getItemAdjustMinMax(v,i){if(is_number(i.min)&&v<i.min){v=i.min}if(is_number(i.max)&&v>i.max){v=i.max}if(v<1){v=1}return v}function cf_getSynchArr(s){if(!is_array(s)){s=[[s]]}if(!is_array(s[0])){s=[s]}for(var j=0,l=s.length;j<l;j++){if(is_string(s[j][0])){s[j][0]=$(s[j][0])}if(!is_boolean(s[j][1])){s[j][1]=true}if(!is_boolean(s[j][2])){s[j][2]=true}if(!is_number(s[j][3])){s[j][3]=0}}return s}function cf_getKeyCode(k){if(k=="right"){return 39}if(k=="left"){return 37}if(k=="up"){return 38}if(k=="down"){return 40}return -1}function cf_setCookie(n,$c,c){if(n){var v=$c.triggerHandler(cf_e("currentPosition",c));$.fn.carouFredSel.cookie.set(n,v)}}function cf_getCookie(n){var c=$.fn.carouFredSel.cookie.get(n);return(c=="")?0:c}function in_mapCss($elem,props){var css={};for(var p=0,l=props.length;p<l;p++){css[props[p]]=$elem.css(props[p])}return css}function in_complementItems(obj,opt,itm,sta){if(!is_object(obj.visibleConf)){obj.visibleConf={}}if(!is_object(obj.sizesConf)){obj.sizesConf={}}if(obj.start==0&&is_number(sta)){obj.start=sta}if(is_object(obj.visible)){obj.visibleConf.min=obj.visible.min;obj.visibleConf.max=obj.visible.max;obj.visible=false}else{if(is_string(obj.visible)){if(obj.visible=="variable"){obj.visibleConf.variable=true}else{obj.visibleConf.adjust=obj.visible}obj.visible=false}else{if(is_function(obj.visible)){obj.visibleConf.adjust=obj.visible;obj.visible=false}}}if(!is_string(obj.filter)){obj.filter=(itm.filter(":hidden").length>0)?":visible":"*"}if(!obj[opt.d.width]){if(opt.responsive){debug(true,"Set a "+opt.d.width+" for the items!");obj[opt.d.width]=ms_getTrueLargestSize(itm,opt,"outerWidth")}else{obj[opt.d.width]=(ms_hasVariableSizes(itm,opt,"outerWidth"))?"variable":itm[opt.d.outerWidth](true)}}if(!obj[opt.d.height]){obj[opt.d.height]=(ms_hasVariableSizes(itm,opt,"outerHeight"))?"variable":itm[opt.d.outerHeight](true)}obj.sizesConf.width=obj.width;obj.sizesConf.height=obj.height;return obj}function in_complementVisibleItems(opt,avl){if(opt.items[opt.d.width]=="variable"){opt.items.visibleConf.variable=true}if(!opt.items.visibleConf.variable){if(is_number(opt[opt.d.width])){opt.items.visible=Math.floor(opt[opt.d.width]/opt.items[opt.d.width])}else{opt.items.visible=Math.floor(avl/opt.items[opt.d.width]);opt[opt.d.width]=opt.items.visible*opt.items[opt.d.width];if(!opt.items.visibleConf.adjust){opt.align=false}}if(opt.items.visible=="Infinity"||opt.items.visible<1){debug(true,'Not a valid number of visible items: Set to "variable".');opt.items.visibleConf.variable=true}}return opt}function in_complementPrimarySize(obj,opt,all){if(obj=="auto"){obj=ms_getTrueLargestSize(all,opt,"outerWidth")}return obj}function in_complementSecondarySize(obj,opt,all){if(obj=="auto"){obj=ms_getTrueLargestSize(all,opt,"outerHeight")}if(!obj){obj=opt.items[opt.d.height]}return obj}function in_getAlignPadding(o,all){var p=cf_getAlignPadding(gi_getCurrentItems(all,o),o);o.padding[o.d[1]]=p[1];o.padding[o.d[3]]=p[0];return o}function in_getResponsiveValues(o,all,avl){var visb=cf_getItemAdjustMinMax(Math.ceil(o[o.d.width]/o.items[o.d.width]),o.items.visibleConf);if(visb>all.length){visb=all.length}var newS=Math.floor(o[o.d.width]/visb);o.items.visible=visb;o.items[o.d.width]=newS;o[o.d.width]=visb*newS;return o}function bt_pauseOnHoverConfig(p){if(is_string(p)){var i=(p.indexOf("immediate")>-1)?true:false,r=(p.indexOf("resume")>-1)?true:false}else{var i=r=false}return[i,r]}function bt_mousesheelNumber(mw){return(is_number(mw))?mw:null}function is_null(a){return(a===null)}function is_undefined(a){return(is_null(a)||typeof a=="undefined"||a===""||a==="undefined")}function is_array(a){return(a instanceof Array)}function is_jquery(a){return(a instanceof jQuery)}function is_object(a){return((a instanceof Object||typeof a=="object")&&!is_null(a)&&!is_jquery(a)&&!is_array(a)&&!is_function(a))}function is_number(a){return((a instanceof Number||typeof a=="number")&&!isNaN(a))}function is_string(a){return((a instanceof String||typeof a=="string")&&!is_undefined(a)&&!is_true(a)&&!is_false(a))}function is_function(a){return(a instanceof Function||typeof a=="function")}function is_boolean(a){return(a instanceof Boolean||typeof a=="boolean"||is_true(a)||is_false(a))}function is_true(a){return(a===true||a==="true")}function is_false(a){return(a===false||a==="false")}function is_percentage(x){return(is_string(x)&&x.slice(-1)=="%")}function getTime(){return new Date().getTime()}function deprecated(o,n){debug(true,o+" is DEPRECATED, support for it will be removed. Use "+n+" instead.")}function debug(d,m){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(d)){var s=" ("+d.selector+")";d=d.debug}else{var s=""}if(!d){return false}if(is_string(m)){m="carouFredSel"+s+": "+m}else{m=["carouFredSel"+s+":",m]}window.console.log(m)}return false}$.extend($.easing,{quadratic:function(t){var t2=t*t;return t*(-t2*t+4*t2-6*t+4)},cubic:function(t){return t*(4*t*t-9*t+6)},elastic:function(t){var t2=t*t;return t*(33*t2*t2-106*t2*t+126*t2-67*t+15)}})})(jQuery);
/*! jquery.selectBoxIt - v3.7.0 - 2013-08-13 
* http://www.selectboxit.com
* Copyright (c) 2013 Greg Franko; Licensed MIT*/
(function(a){a(window.jQuery,window,document)}(function(d,c,b,e){d.widget("selectBox.selectBoxIt",{VERSION:"3.7.0",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:true,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:true,isMobile:function(){var f=navigator.userAgent||navigator.vendor||c.opera;return(/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(f)},"native":false,aggressiveChange:false,selectWhenHidden:true,viewport:d(c),similarSearch:false,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:false,customShowHideEvent:false,autoWidth:true,html:true,populate:"",dynamicPositioning:false,hideCurrent:false,isIE:function(){return(c.navigator.userAgent.indexOf("MSIE")!==-1)||(c.navigator.appName=="Netscape"&&c.navigator.userAgent.indexOf("Trident")!==-1)}},getThemes:function(){var f=this,g=d(f.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",enabled:"enabled",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",enabled:"ui-state-enabled",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+g,hover:"ui-btn-hover-"+g,enabled:"ui-enabled",disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+g,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+g,container:"jquerymobile",open:"selectboxit-open"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",enabled:"selectboxit-enabled",disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},isDeferred:function(f){return d.isPlainObject(f)&&f.promise&&f.done},_create:function(f){var g=this,h=g.options.populate;if(!g.element.is("select")){return}g.widgetProto=d.Widget.prototype;g.originalElem=g.element[0];g.selectBox=g.element;if(g.options.populate&&g.add&&!f){g.add(h)}g.selectItems=g.element.find("option");g.firstSelectItem=g.selectItems.slice(0,1);g.documentHeight=d(b).height();g.theme=g.getThemes()[g.options.theme]||g.getThemes()["default"];g.currentFocus=0;g.blur=true;g.textArray=[];g.currentIndex=0;g.currentText="";g.flipped=false;if(!f){g.selectBoxStyles=g.selectBox.attr("style")}g.selectBox.css("display","none").removeClass("visually_hidden_select");(g.selectBox.attr("tabindex")!=="-1")&&(g.selectBoxInitialTabindex=g.selectBox.attr("tabindex"));g._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(g.theme)._eventHandlers();g.isMobile=g.options.isMobile();g.isIE=g.options.isIE();if(!g.isIE&&!g.isMobile){g.selectBox.css({display:"block",height:0}).addClass("visually_hidden_select").attr("tabindex","-1")}if(g.originalElem.disabled&&g.disable){g.disable()}if(g._ariaAccessibility){g._ariaAccessibility()}if(g._mobile){g._mobile()}if(g.options["native"]){this._applyNativeSelect()}g.triggerEvent("create");return g},_createDropdownButton:function(){var f=this,j=f.originalElemId=f.originalElem.id||"",k=f.originalElemValue=f.originalElem.value||"",i=f.originalElemName=f.originalElem.name||"",h=f.options.copyClasses,g=f.selectBox.attr("class")||"";f.dropdownText=d("<span/>",{id:j&&j+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:f.firstSelectItem.text()}).attr("data-val",k);f.dropdownImageContainer=d("<span/>",{"class":"selectboxit-option-icon-container"});f.dropdownImage=d("<i/>",{id:j&&j+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"});f.dropdown=d("<span/>",{id:j&&j+"SelectBoxIt","class":"selectboxit "+(h==="button"?g:"")+" "+(f.selectBox.prop("disabled")?f.theme.disabled:f.theme.enabled),name:i,tabindex:f.selectBoxInitialTabindex||"0",unselectable:"on"}).append(f.dropdownImageContainer.append(f.dropdownImage)).append(f.dropdownText);f.dropdownContainer=d("<span/>",{id:j&&j+"SelectBoxItContainer","class":"selectboxit-container "+(h==="container"?g:"")}).append(f.dropdown);return f},_createUnorderedList:function(){var u=this,n,l,h,o,f,g,t,s="",m=u.originalElemId||"",i=d("<ul/>",{id:m&&m+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1}),k,q,p,r;if(!u.options.showFirstOption){u.selectItems.first().attr("disabled","disabled");u.selectItems=u.selectBox.find("option").slice(1)}u.selectItems.each(function(v){l="";h="";n=d(this).prop("disabled");o=d(this).attr("data-icon")||"";f=d(this).attr("data-iconurl")||"";g=f?"selectboxit-option-icon-url":"";t=f?"style=\"background-image:url('"+f+"');\"":"";k=d(this).attr("data-selectedtext");q=d(this).attr("data-text");p=q?q:d(this).text();r=d(this).parent();if(r.is("optgroup")){l="selectboxit-optgroup-option";if(d(this).index()===0){h='<span class="selectboxit-optgroup-header '+r.first().attr("class")+'"data-disabled="true">'+r.first().attr("label")+"</span>"}}s+=h+'<li id="'+v+'" data-val="'+this.value+'" data-disabled="'+n+'" class="'+l+" selectboxit-option "+(d(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+o+" "+(g||u.theme.container)+'"'+t+"></i></span>"+(u.options.html?p:u.htmlEscape(p))+"</a></li>";u.textArray[v]=n?"":p;if(this.selected){u._setText(u.dropdownText,k||p);u.currentFocus=v}});if((u.options.defaultText||u.selectBox.attr("data-text"))){var j=u.options.defaultText||u.selectBox.attr("data-text");u._setText(u.dropdownText,j);u.options.defaultText=j}i.append(s);u.list=i;u.dropdownContainer.append(u.list);u.listItems=u.list.children("li");u.listAnchors=u.list.find("a");u.listItems.first().addClass("selectboxit-option-first");u.listItems.last().addClass("selectboxit-option-last");u.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(u.theme.disabled);u.dropdownImage.addClass(u.selectBox.attr("data-icon")||u.options.defaultIcon||u.listItems.eq(u.currentFocus).find("i").attr("class"));u.dropdownImage.attr("style",u.listItems.eq(u.currentFocus).find("i").attr("style"));return u},_replaceSelectBox:function(){var g=this,f,j=g.originalElem.id||"",i=g.selectBox.attr("data-size"),h=g.listSize=i===e?"auto":i==="0"||"size"==="auto"?"auto":+i;g.selectBox.after(g.dropdownContainer);f=g.dropdown.height();g.downArrow=d("<i/>",{id:j&&j+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"});g.downArrowContainer=d("<span/>",{id:j&&j+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(g.downArrow);g.dropdown.append(g.downArrowContainer);g.listItems.removeClass("selectboxit-selected").eq(g.currentFocus).addClass("selectboxit-selected");if(!g._realOuterWidth(g.dropdownImageContainer)){g.dropdownImageContainer.remove()}if(g.options.autoWidth){if(g.dropdown.is(":visible")){g.dropdown.css({width:"auto"}).css({width:g.list.outerWidth(true)+g.downArrowContainer.outerWidth(true)+g.dropdownImage.outerWidth(true)})}else{g.dropdown.css({width:"auto"}).css({width:g._realOuterWidth(g.list)+g._realOuterWidth(g.downArrowContainer)+g._realOuterWidth(g.dropdownImage)})}g.list.css({"min-width":g.dropdown.width()})}g.dropdownContainer.addClass("selectboxit-rendering");g.dropdownText.css({"max-width":g.dropdownContainer.outerWidth(true)-(g.downArrowContainer.outerWidth(true)+g.dropdownImage.outerWidth(true))});g.dropdownContainer.removeClass("selectboxit-rendering");if(d.type(h)==="number"){g.maxHeight=g.listAnchors.outerHeight(true)*h}return g},_scrollToView:function(j){var n=this,l=n.listItems.eq(n.currentFocus),i=n.list.scrollTop(),m=l.height(),f=l.position().top,h=Math.abs(f),g=n.list.height(),k;if(j==="search"){if(g-f<m){n.list.scrollTop(i+(f-(g-m)))}else{if(f<-1){n.list.scrollTop(f-m)}}}else{if(j==="up"){if(f<-1){n.list.scrollTop(i-h)}}else{if(j==="down"){if(g-f<m){n.list.scrollTop((i+(h-g+m)))}}}}return n},_callbackSupport:function(g){var f=this;if(d.isFunction(g)){g.call(f,f.dropdown)}return f},_setText:function(g,h){var f=this;if(f.options.html){g.html(h)}else{g.text(h)}return f},open:function(l){var j=this,i=j.options.showEffect,k=j.options.showEffectSpeed,g=j.options.showEffectOptions,h=j.options["native"],f=j.isMobile;if(!j.listItems.length||j.dropdown.hasClass(j.theme.disabled)){return j}if((!h&&!f)&&!this.list.is(":visible")){j.triggerEvent("open");if(j._dynamicPositioning&&j.options.dynamicPositioning){j._dynamicPositioning()}if(i==="none"){j.list.show()}else{if(i==="show"||i==="slideDown"||i==="fadeIn"){j.list[i](k)}else{j.list.show(i,g,k)}}j.list.promise().done(function(){j._scrollToView("search");j.triggerEvent("search")})}j._callbackSupport(l);return j},close:function(l){var i=this,k=i.options.hideEffect,j=i.options.hideEffectSpeed,h=i.options.hideEffectOptions,g=i.options["native"],f=i.isMobile;if((!g&&!f)&&i.list.is(":visible")){i.triggerEvent("close");if(k==="none"){i.list.hide()}else{if(k==="hide"||k==="slideUp"||k==="fadeOut"){i.list[k](j)}else{i.list.hide(k,h,j)}}}i._callbackSupport(l);return i},toggle:function(){var f=this,g=f.list.is(":visible");if(g){f.close()}else{if(!g){f.open()}}},_keyMappings:{"38":"up","40":"down","13":"enter","8":"backspace","9":"tab","32":"space","27":"esc"},_keydownMethods:function(){var f=this,g=f.list.is(":visible")||!f.options.keydownOpen;return{down:function(){if(f.moveDown&&g){f.moveDown()}},up:function(){if(f.moveUp&&g){f.moveUp()}},enter:function(){var h=f.listItems.eq(f.currentFocus);f._update(h);if(h.attr("data-preventclose")!=="true"){f.close()}f.triggerEvent("enter")},tab:function(){f.triggerEvent("tab-blur");f.close()},backspace:function(){f.triggerEvent("backspace")},esc:function(){f.close()}}},_eventHandlers:function(){var g=this,l=g.options.nativeMousedown,i=g.options.customShowHideEvent,f,k,h=g.focusClass,m=g.hoverClass,j=g.openClass;this.dropdown.on({"click.selectBoxIt":function(){g.dropdown.trigger("focus",true);if(!g.originalElem.disabled){g.triggerEvent("click");if(!l&&!i){g.toggle()}}},"mousedown.selectBoxIt":function(){d(this).data("mdown",true);g.triggerEvent("mousedown");if(l&&!i){g.toggle()}},"mouseup.selectBoxIt":function(){g.triggerEvent("mouseup")},"blur.selectBoxIt":function(){if(g.blur){g.triggerEvent("blur");g.close();d(this).removeClass(h)}},"focus.selectBoxIt":function(p,n){var o=d(this).data("mdown");d(this).removeData("mdown");if(!o&&!n){setTimeout(function(){g.triggerEvent("tab-focus")},0)}if(!n){if(!d(this).hasClass(g.theme.disabled)){d(this).addClass(h)}g.triggerEvent("focus")}},"keydown.selectBoxIt":function(o){var p=g._keyMappings[o.keyCode],n=g._keydownMethods()[p];if(n){n();if(g.options.keydownOpen&&(p==="up"||p==="down")){g.open()}}if(n&&p!=="tab"){o.preventDefault()}},"keypress.selectBoxIt":function(p){var q=p.charCode||p.keyCode,o=g._keyMappings[p.charCode||p.keyCode],n=String.fromCharCode(q);if(g.search&&(!o||(o&&o==="space"))){g.search(n,true,true)}if(o==="space"){p.preventDefault()}},"mouseenter.selectBoxIt":function(){g.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){g.triggerEvent("mouseleave")}});g.list.on({"mouseover.selectBoxIt":function(){g.blur=false},"mouseout.selectBoxIt":function(){g.blur=true},"focusin.selectBoxIt":function(){g.dropdown.trigger("focus",true)}});g.list.on({"mousedown.selectBoxIt":function(){g._update(d(this));g.triggerEvent("option-click");if(d(this).attr("data-disabled")==="false"&&d(this).attr("data-preventclose")!=="true"){g.close()}setTimeout(function(){g.dropdown.trigger("focus",true)},0)},"focusin.selectBoxIt":function(){g.listItems.not(d(this)).removeAttr("data-active");d(this).attr("data-active","");var n=g.list.is(":hidden");if((g.options.searchWhenHidden&&n)||g.options.aggressiveChange||(n&&g.options.selectWhenHidden)){g._update(d(this))}d(this).addClass(h)},"mouseup.selectBoxIt":function(){if(l&&!i){g._update(d(this));g.triggerEvent("option-mouseup");if(d(this).attr("data-disabled")==="false"&&d(this).attr("data-preventclose")!=="true"){g.close()}}},"mouseenter.selectBoxIt":function(){if(d(this).attr("data-disabled")==="false"){g.listItems.removeAttr("data-active");d(this).addClass(h).attr("data-active","");g.listItems.not(d(this)).removeClass(h);d(this).addClass(h);g.currentFocus=+d(this).attr("id")}},"mouseleave.selectBoxIt":function(){if(d(this).attr("data-disabled")==="false"){g.listItems.not(d(this)).removeClass(h).removeAttr("data-active");d(this).addClass(h);g.currentFocus=+d(this).attr("id")}},"blur.selectBoxIt":function(){d(this).removeClass(h)}},".selectboxit-option");g.list.on({"click.selectBoxIt":function(n){n.preventDefault()}},"a");g.selectBox.on({"change.selectBoxIt, internal-change.selectBoxIt":function(q,n){var p,o;if(!n){p=g.list.find('li[data-val="'+g.originalElem.value+'"]');if(p.length){g.listItems.eq(g.currentFocus).removeClass(g.focusClass);g.currentFocus=+p.attr("id")}}p=g.listItems.eq(g.currentFocus);o=p.attr("data-selectedtext");f=p.attr("data-text");k=f?f:p.find("a").text();g._setText(g.dropdownText,o||k);g.dropdownText.attr("data-val",g.originalElem.value);if(p.find("i").attr("class")){g.dropdownImage.attr("class",p.find("i").attr("class")).addClass("selectboxit-default-icon");g.dropdownImage.attr("style",p.find("i").attr("style"))}g.triggerEvent("changed")},"disable.selectBoxIt":function(){g.dropdown.addClass(g.theme.disabled)},"enable.selectBoxIt":function(){g.dropdown.removeClass(g.theme.disabled)},"open.selectBoxIt":function(){var n=g.list.find("li[data-val='"+g.dropdownText.attr("data-val")+"']"),o;if(!n.length){n=g.listItems.not("[data-disabled=true]").first()}g.currentFocus=+n.attr("id");o=g.listItems.eq(g.currentFocus);g.dropdown.addClass(j).removeClass(m).addClass(h);g.listItems.removeClass(g.selectedClass).removeAttr("data-active").not(o).removeClass(h);o.addClass(g.selectedClass).addClass(h);if(g.options.hideCurrent){g.listItems.show();o.hide()}},"close.selectBoxIt":function(){g.dropdown.removeClass(j)},"blur.selectBoxIt":function(){g.dropdown.removeClass(h)},"focus.selectBoxIt":function(n){(!g.isIE&&!g.isMobile)&&n.preventDefault()},"mouseenter.selectBoxIt":function(){if(!d(this).hasClass(g.theme.disabled)){g.dropdown.addClass(m)}},"mouseleave.selectBoxIt":function(){g.dropdown.removeClass(m)},destroy:function(n){n.preventDefault();n.stopPropagation()}});return g},_update:function(k){var g=this,i,f,l,h=g.options.defaultText||g.selectBox.attr("data-text"),j=g.listItems.eq(g.currentFocus);if(k.attr("data-disabled")==="false"){i=g.listItems.eq(g.currentFocus).attr("data-selectedtext");f=j.attr("data-text");l=f?f:j.text();if((h&&g.options.html?g.dropdownText.html()===h:g.dropdownText.text()===h)&&g.selectBox.val()===k.attr("data-val")){g.triggerEvent("change")}else{g.selectBox.val(k.attr("data-val"));g.currentFocus=+k.attr("id");if(g.originalElem.value!==g.dropdownText.attr("data-val")){g.triggerEvent("change")}}}},_addClasses:function(f){var l=this,n=l.focusClass=f.focus,h=l.hoverClass=f.hover,j=f.button,m=f.list,i=f.arrow,k=f.container,g=l.openClass=f.open;l.selectedClass="selectboxit-selected";l.downArrow.addClass(l.selectBox.attr("data-downarrow")||l.options.downArrowIcon||i);l.dropdownContainer.addClass(k);l.dropdown.addClass(j);l.list.addClass(m);return l},refresh:function(h,f){var g=this;g._destroySelectBoxIt()._create(true);if(!f){g.triggerEvent("refresh")}g._callbackSupport(h);return g},htmlEscape:function(f){return String(f).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(h){var g=this,f=g.options.showFirstOption?g.currentFocus:((g.currentFocus-1)>=0?g.currentFocus:0);g.selectBox.trigger(h,{selectbox:g.selectBox,selectboxOption:g.selectItems.eq(f),dropdown:g.dropdown,dropdownOption:g.listItems.eq(g.currentFocus)});return g},_copyAttributes:function(){var f=this;if(f._addSelectBoxAttributes){f._addSelectBoxAttributes()}return f},_realOuterWidth:function(g){if(g.is(":visible")){return g.outerWidth(true)}var f=this,i=g.clone(),h;i.css({visibility:"hidden",display:"block",position:"absolute"}).appendTo("body");h=i.outerWidth(true);i.remove();return h}});var a=d.selectBox.selectBoxIt.prototype;a.add=function(f,g){this._populate(f,function(l){var p=this,m=d.type(l),o,n=0,k,i=[],j=p._isJSON(l),h=j&&p._parseJSON(l);if(l&&(m==="array"||(j&&h.data&&d.type(h.data)==="array"))||(m==="object"&&l.data&&d.type(l.data)==="array")){if(p._isJSON(l)){l=h}if(l.data){l=l.data}for(k=l.length;n<=k-1;n+=1){o=l[n];if(d.isPlainObject(o)){i.push(d("<option/>",o))}else{if(d.type(o)==="string"){i.push(d("<option/>",{text:o,value:o}))}}}p.selectBox.append(i)}else{if(l&&m==="string"&&!p._isJSON(l)){p.selectBox.append(l)}else{if(l&&m==="object"){p.selectBox.append(d("<option/>",l))}else{if(l&&p._isJSON(l)&&d.isPlainObject(p._parseJSON(l))){p.selectBox.append(d("<option/>",p._parseJSON(l)))}}}}if(p.dropdown){p.refresh(function(){p._callbackSupport(g)},true)}else{p._callbackSupport(g)}return p})};a._parseJSON=function(f){return(JSON&&JSON.parse&&JSON.parse(f))||d.parseJSON(f)};a._isJSON=function(h){var f=this,g;try{g=f._parseJSON(h);return true}catch(i){return false}};a._populate=function(g,h){var f=this;g=d.isFunction(g)?g.call():g;if(f.isDeferred(g)){g.done(function(i){h.call(f,i)})}else{h.call(f,g)}return f};a._ariaAccessibility=function(){var f=this,g=d("label[for='"+f.originalElem.id+"']");f.dropdownContainer.attr({role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false","aria-owns":f.list[0].id});f.dropdownText.attr({"aria-live":"polite"});f.dropdown.on({"disable.selectBoxIt":function(){f.dropdownContainer.attr("aria-disabled","true")},"enable.selectBoxIt":function(){f.dropdownContainer.attr("aria-disabled","false")}});if(g.length){f.dropdownContainer.attr("aria-labelledby",g[0].id)}f.list.attr({role:"listbox","aria-hidden":"true"});f.listItems.attr({role:"option"});f.selectBox.on({"open.selectBoxIt":function(){f.list.attr("aria-hidden","false");f.dropdownContainer.attr("aria-expanded","true")},"close.selectBoxIt":function(){f.list.attr("aria-hidden","true");f.dropdownContainer.attr("aria-expanded","false")}});return f};a._addSelectBoxAttributes=function(){var f=this;f._addAttributes(f.selectBox.prop("attributes"),f.dropdown);f.selectItems.each(function(g){f._addAttributes(d(this).prop("attributes"),f.listItems.eq(g))});return f};a._addAttributes=function(f,i){var g=this,h=g.options.copyAttributes;if(f.length){d.each(f,function(j,l){var k=(l.name).toLowerCase(),m=l.value;if(m!=="null"&&(d.inArray(k,h)!==-1||k.indexOf("data")!==-1)){i.attr(k,m)}})}return g};a.destroy=function(g){var f=this;f._destroySelectBoxIt();f.widgetProto.destroy.call(f);f._callbackSupport(g);return f};a._destroySelectBoxIt=function(){var f=this;f.dropdown.off(".selectBoxIt");if(d.contains(f.dropdownContainer[0],f.originalElem)){f.dropdownContainer.before(f.selectBox)}f.dropdownContainer.remove();f.selectBox.removeAttr("style").attr("style",f.selectBoxStyles);f.selectBox.show();f.triggerEvent("destroy");return f};a.disable=function(g){var f=this;if(!f.options.disabled){f.close();f.selectBox.attr("disabled","disabled");f.dropdown.removeAttr("tabindex").removeClass(f.theme.enabled).addClass(f.theme.disabled);f.setOption("disabled",true);f.triggerEvent("disable")}f._callbackSupport(g);return f};a.disableOption=function(h,l){var g=this,i,k,f,j=d.type(h);if(j==="number"){g.close();i=g.selectBox.find("option").eq(h);g.triggerEvent("disable-option");i.attr("disabled","disabled");g.listItems.eq(h).attr("data-disabled","true").addClass(g.theme.disabled);if(g.currentFocus===h){k=g.listItems.eq(g.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;f=g.listItems.eq(g.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(k){g.moveDown()}else{if(f){g.moveUp()}else{g.disable()}}}}g._callbackSupport(l);return g};a._isDisabled=function(g){var f=this;if(f.originalElem.disabled){f.disable()}return f};a._dynamicPositioning=function(){var o=this;if(d.type(o.listSize)==="number"){o.list.css("max-height",o.maxHeight||"none")}else{var j=o.dropdown.offset().top,g=o.list.data("max-height")||o.list.outerHeight(),k=o.dropdown.outerHeight(),m=o.options.viewport,i=m.height(),f=d.isWindow(m.get(0))?m.scrollTop():m.offset().top,p=(j+k+g<=i+f),l=!p;if(!o.list.data("max-height")){o.list.data("max-height",o.list.outerHeight())}if(!l){o.list.css("max-height",g);o.list.css("top","auto")}else{if((o.dropdown.offset().top-f)>=g){o.list.css("max-height",g);o.list.css("top",(o.dropdown.position().top-o.list.outerHeight()))}else{var h=Math.abs((j+k+g)-(i+f)),n=Math.abs((o.dropdown.offset().top-f)-g);if(h<n){o.list.css("max-height",g-h-(k/2));o.list.css("top","auto")}else{o.list.css("max-height",g-n-(k/2));o.list.css("top",(o.dropdown.position().top-o.list.outerHeight()))}}}}return o};a.enable=function(g){var f=this;if(f.options.disabled){f.triggerEvent("enable");f.selectBox.removeAttr("disabled");f.dropdown.attr("tabindex",0).removeClass(f.theme.disabled).addClass(f.theme.enabled);f.setOption("disabled",false);f._callbackSupport(g)}return f};a.enableOption=function(i,m){var h=this,j,g=0,l,f,k=d.type(i);if(k==="number"){j=h.selectBox.find("option").eq(i);h.triggerEvent("enable-option");j.removeAttr("disabled");h.listItems.eq(i).attr("data-disabled","false").removeClass(h.theme.disabled)}h._callbackSupport(m);return h};a.moveDown=function(i){var f=this;f.currentFocus+=1;var g=f.listItems.eq(f.currentFocus).attr("data-disabled")==="true"?true:false,h=f.listItems.eq(f.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(f.currentFocus===f.listItems.length){f.currentFocus-=1}else{if(g&&h){f.listItems.eq(f.currentFocus-1).blur();f.moveDown();return}else{if(g&&!h){f.currentFocus-=1}else{f.listItems.eq(f.currentFocus-1).blur().end().eq(f.currentFocus).focusin();f._scrollToView("down");f.triggerEvent("moveDown")}}}f._callbackSupport(i);return f};a.moveUp=function(i){var g=this;g.currentFocus-=1;var h=g.listItems.eq(g.currentFocus).attr("data-disabled")==="true"?true:false,f=g.listItems.eq(g.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(g.currentFocus===-1){g.currentFocus+=1}else{if(h&&f){g.listItems.eq(g.currentFocus+1).blur();g.moveUp();return}else{if(h&&!f){g.currentFocus+=1}else{g.listItems.eq(this.currentFocus+1).blur().end().eq(g.currentFocus).focusin();g._scrollToView("up");g.triggerEvent("moveUp")}}}g._callbackSupport(i);return g};a._setCurrentSearchOption=function(g){var f=this;if((f.options.aggressiveChange||f.options.selectWhenHidden||f.listItems.eq(g).is(":visible"))&&f.listItems.eq(g).data("disabled")!==true){f.listItems.eq(f.currentFocus).blur();f.currentIndex=g;f.currentFocus=g;f.listItems.eq(f.currentFocus).focusin();f._scrollToView("search");f.triggerEvent("search")}return f};a._searchAlgorithm=function(k,j){var o=this,f=false,n,l,h,i,g=o.textArray,m=o.currentText;for(n=k,h=g.length;n<h;n+=1){i=g[n];for(l=0;l<h;l+=1){if(g[l].search(j)===0){f=true;l=h}}if(!f){o.currentText=o.currentText.charAt(o.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0");m=o.currentText}j=new RegExp(m,"gi");if(m.length<2){j=new RegExp(m.charAt(0),"gi");if((i.charAt(0).search(j)===0)){o._setCurrentSearchOption(n);if((i.substring(0,m.length).toLowerCase()!==m.toLowerCase())||o.options.similarSearch){o.currentIndex+=1}return false}}else{if((i.search(j)===0)){o._setCurrentSearchOption(n);return false}}if(i.toLowerCase()===o.currentText.toLowerCase()){o._setCurrentSearchOption(n);o.currentText="";return false}}return true};a.search=function(g,j,i){var f=this;if(i){f.currentText+=g.replace(/[|()\[{.+*?$\\]/g,"\\$0")}else{f.currentText=g.replace(/[|()\[{.+*?$\\]/g,"\\$0")}var h=f._searchAlgorithm(f.currentIndex,new RegExp(f.currentText,"gi"));if(h){f._searchAlgorithm(0,f.currentText)}f._callbackSupport(j);return f};a._applyNativeSelect=function(){var g=this,h,f,i;g.dropdownContainer.prepend(g.selectBox);g.dropdown.attr("tabindex","-1");g.selectBox.css({display:"block",visibility:"visible",width:g.dropdown.outerWidth(),height:g.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"9998",margin:g.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"}).on({"changed.selectBoxIt":function(){h=g.selectBox.find("option").filter(":selected");f=h.attr("data-text");i=f?f:h.text();g._setText(g.dropdownText,i);if(g.list.find('li[data-val="'+h.val()+'"]').find("i").attr("class")){g.dropdownImage.attr("class",g.list.find('li[data-val="'+h.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}g.triggerEvent("option-click")}})};a._mobile=function(g){var f=this;if(f.isMobile){f._applyNativeSelect()}return this};a.remove=function(j,m){var i=this,h=d.type(j),k,f=0,l,g="";if(h==="array"){for(l=j.length;f<=l-1;f+=1){k=j[f];if(d.type(k)==="number"){if(g.length){g+=", option:eq("+k+")"}else{g+="option:eq("+k+")"}}}i.selectBox.find(g).remove()}else{if(h==="number"){i.selectBox.find("option").eq(j).remove()}else{i.selectBox.find("option").remove()}}if(i.dropdown){i.refresh(function(){i._callbackSupport(m)},true)}else{i._callbackSupport(m)}return i};a.selectOption=function(h,i){var f=this,g=d.type(h);if(g==="number"){f.selectBox.val(f.selectItems.eq(h).val()).change()}else{if(g==="string"){f.selectBox.val(h).change()}}f._callbackSupport(i);return f};a.setOption=function(g,h,i){var f=this;if(d.type(g)==="string"){f.options[g]=h}f.refresh(function(){f._callbackSupport(i)},true);return f};a.setOptions=function(g,h){var f=this;if(d.isPlainObject(g)){f.options=d.extend({},f.options,g)}f.refresh(function(){f._callbackSupport(h)},true);return f};a.wait=function(g,h){var f=this;f.widgetProto._delay.call(f,h,g);return f}}));angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:true,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(j,i,b,d){var h={day:c(i.dayFormat,d.dayFormat),month:c(i.monthFormat,d.monthFormat),year:c(i.yearFormat,d.yearFormat),dayHeader:c(i.dayHeaderFormat,d.dayHeaderFormat),dayTitle:c(i.dayTitleFormat,d.dayTitleFormat),monthTitle:c(i.monthTitleFormat,d.monthTitleFormat)},e=c(i.startingDay,d.startingDay),k=c(i.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null;this.maxDate=d.maxDate?new Date(d.maxDate):null;function c(m,l){return angular.isDefined(m)?j.$parent.$eval(m):l}function a(l,m){return new Date(l,m,0).getDate()}function f(l,q){var p=new Array(q);var o=l,m=0;while(m<q){p[m++]=new Date(o);o.setDate(o.getDate()+1)}return p}function g(m,o,l,n){return{date:m,label:b(m,o),selected:!!l,secondary:!!n}}this.modes=[{name:"day",getVisibleDates:function(p,r){var v=p.getFullYear(),u=p.getMonth(),w=new Date(v,u,1);var o=e-w.getDay(),y=(o>0)?7-o:-o,l=new Date(w),m=0;if(y>0){l.setDate(-y+1);m+=y}m+=a(v,u+1);m+=(7-m%7)%7;var x=f(l,m),t=new Array(7);for(var s=0;s<m;s++){var n=new Date(x[s]);x[s]=g(n,h.day,(r&&r.getDate()===n.getDate()&&r.getMonth()===n.getMonth()&&r.getFullYear()===n.getFullYear()),n.getMonth()!==u)}for(var q=0;q<7;q++){t[q]=b(x[q].date,h.dayHeader)}return{objects:x,title:b(p,h.month),labels:t}},compare:function(m,l){return(new Date(m.getFullYear(),m.getMonth(),m.getDate())-new Date(l.getFullYear(),l.getMonth(),l.getDate()))},split:7,step:{months:1}},{name:"month",getVisibleDates:function(m,p){var l=new Array(12),o=m.getFullYear();for(var n=0;n<12;n++){var q=new Date(o,n,1);l[n]=g(q,h.month,(p&&p.getMonth()===n&&p.getFullYear()===o))}return{objects:l,title:b(m,h.monthTitle)}},compare:function(m,l){return new Date(m.getFullYear(),m.getMonth())-new Date(l.getFullYear(),l.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(m,q){var o=new Array(k),p=m.getFullYear(),l=parseInt((p-1)/k,10)*k+1;for(var n=0;n<k;n++){var r=new Date(l+n,0,1);o[n]=g(r,h.year,(q&&q.getFullYear()===r.getFullYear()))}return{objects:o,title:[o[0].label,o[k-1].label].join(" - ")}},compare:function(m,l){return m.getFullYear()-l.getFullYear()},split:5,step:{years:k}}];this.isDisabled=function(l,n){var m=this.modes[n||0];return((this.minDate&&m.compare(l,this.minDate)<0)||(this.maxDate&&m.compare(l,this.maxDate)>0)||(j.dateDisabled&&j.dateDisabled({date:l,mode:m.name})))}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(c,a,d,b){return{restrict:"EA",replace:true,templateUrl:"/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(r,k,q,h){var m=h[0],j=h[1];if(!j){return}var l=0,i=new Date(),o=d.showWeeks;if(q.showWeeks){r.$parent.$watch(a(q.showWeeks),function(s){o=!!s;p()})}else{p()}if(q.min){r.$parent.$watch(a(q.min),function(s){m.minDate=s?new Date(s):null;g()})}if(q.max){r.$parent.$watch(a(q.max),function(s){m.maxDate=s?new Date(s):null;g()})}function p(){r.showWeekNumbers=l===0&&o}function n(s,t){var u=[];while(s.length>0){u.push(s.splice(0,t))}return u}function g(s){var t=null,u=true;if(j.$modelValue){t=new Date(j.$modelValue);if(isNaN(t)){u=false;b.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}else{if(s){i=t}}}j.$setValidity("date",u);var w=m.modes[l],v=w.getVisibleDates(i,t);angular.forEach(v.objects,function(x){x.disabled=m.isDisabled(x.date,l)});j.$setValidity("date-disabled",(!t||!m.isDisabled(t)));r.rows=n(v.objects,w.split);r.labels=v.labels||[];r.title=v.title}function f(s){l=s;p();g()}j.$render=function(){g(true)};r.select=function(s){if(l===0){var t=new Date(j.$modelValue);t.setFullYear(s.getFullYear(),s.getMonth(),s.getDate());j.$setViewValue(t);g(true)}else{i=s;f(l-1)}};r.move=function(t){var s=m.modes[l].step;i.setMonth(i.getMonth()+t*(s.months||0));i.setFullYear(i.getFullYear()+t*(s.years||0));g()};r.toggleMode=function(){f((l+1)%m.modes.length)};r.getWeekNumber=function(s){return(l===0&&r.showWeekNumbers&&s.length===7)?e(s[0].date):null};function e(s){var u=new Date(s);u.setDate(u.getDate()+4-(u.getDay()||7));var t=u.getTime();u.setMonth(0);u.setDate(1);return Math.floor(Math.round((t-u)/86400000)/7)+1}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:true,appendToBody:false}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig",function(a,b,e,d,c,f){return{restrict:"EA",require:"ngModel",link:function(s,p,y,u){var z;y.$observe("datepickerPopup",function(E){z=E||f.dateFormat;u.$render()});var l=angular.isDefined(y.closeOnDateSelection)?s.$eval(y.closeOnDateSelection):f.closeOnDateSelection;var C=angular.isDefined(y.datepickerAppendToBody)?s.$eval(y.datepickerAppendToBody):f.appendToBody;var k=s.$new();s.$on("$destroy",function(){k.$destroy()});y.$observe("currentText",function(E){k.currentText=angular.isDefined(E)?E:f.currentText});y.$observe("toggleWeeksText",function(E){k.toggleWeeksText=angular.isDefined(E)?E:f.toggleWeeksText});y.$observe("clearText",function(E){k.clearText=angular.isDefined(E)?E:f.clearText});y.$observe("closeText",function(E){k.closeText=angular.isDefined(E)?E:f.closeText});var v,q;if(y.isOpen){v=b(y.isOpen);q=v.assign;s.$watch(v,function A(E){k.isOpen=!!E})}k.isOpen=v?v(s):false;function B(E){if(q){q(s,!!E)}else{k.isOpen=!!E}}var i=function(E){if(k.isOpen&&E.target!==p[0]){k.$apply(function(){B(false)})}};var t=function(){k.$apply(function(){B(true)})};var m=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");m.attr({"ng-model":"date","ng-change":"dateSelection()"});var w=angular.element(m.children()[0]);if(y.datepickerOptions){w.attr(angular.extend({},s.$eval(y.datepickerOptions)))}function D(F){if(!F){u.$setValidity("date",true);return null}else{if(angular.isDate(F)){u.$setValidity("date",true);return F}else{if(angular.isString(F)){var E=new Date(F);if(isNaN(E)){u.$setValidity("date",false);return undefined}else{u.$setValidity("date",true);return E}}else{u.$setValidity("date",false);return undefined}}}}u.$parsers.unshift(D);k.dateSelection=function(){u.$setViewValue(k.date);u.$render();if(l){B(false)}};p.bind("input change keyup",function(){k.$apply(function(){o()})});u.$render=function(){var E=u.$viewValue?c(u.$viewValue,z):"";p.val(E);o()};function o(){k.date=u.$modelValue;j()}function h(F,G,E){if(F){s.$watch(b(F),function(H){k[G]=H});w.attr(E||G,G)}}h(y.min,"min");h(y.max,"max");if(y.showWeeks){h(y.showWeeks,"showWeeks","show-weeks")}else{k.showWeeks=true;w.attr("show-weeks","showWeeks")}if(y.dateDisabled){w.attr("date-disabled",y.dateDisabled)}function j(){k.position=C?d.offset(p):d.position(p);k.position.top=k.position.top+p.prop("offsetHeight")}var r=false,n=false;k.$watch("isOpen",function(F){if(F){j();e.bind("click",i);if(n){p.unbind("focus",t)}p[0].focus();r=true;setTimeout(function(){E($(m))},100);function E(H){var J=$(window);var G={top:J.scrollTop(),};G.right=G.left+J.width();G.bottom=G.top+J.height();var I=H.offset();I.bottom=I.top+H.outerHeight();if(G.bottom<I.bottom){window.scrollTo(0,G.top+(I.bottom-G.bottom))}}}else{if(r){e.unbind("click",i)}p.bind("focus",t);n=true}if(q){q(s,F)}});var g=b(y.ngModel).assign;k.today=function(){g(s,new Date())};k.clear=function(){g(s,null)};var x=a(m)(k);if(C){e.find("body").append(x)}else{p.after(x)}}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:true,transclude:true,templateUrl:"/datepicker-popup.html",link:function(c,b,a){b.bind("click",function(d){d.preventDefault();d.stopPropagation()})}}});(function(b,a,c){a.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(j,l){var k={},e={},f,h=false,d=a.copy,g=a.isUndefined;l.addPollFn(function(){var m=l.cookies();if(f!=m){f=m;d(m,e);d(m,k);if(h){j.$apply()}}})();h=true;j.$watch(i);return k;function i(){var n,o,p,m;for(n in e){if(g(k[n])){l.cookies(n,c)}}for(n in k){o=k[n];if(!a.isString(o)){if(a.isDefined(e[n])){k[n]=e[n]}else{delete k[n]}}else{if(o!==e[n]){l.cookies(n,o);m=true}}}if(m){m=false;p=l.cookies();for(n in k){if(k[n]!==p[n]){if(g(p[n])){delete k[n]}else{k[n]=p[n]}m=true}}}}}]).factory("$cookieStore",["$cookies",function(d){return{get:function(e){var f=d[e];return f?a.fromJson(f):f},put:function(e,f){d[e]=a.toJson(f)},remove:function(e){delete d[e]}}}])})(window,window.angular);if(jQuery){(function(c){var k={customClass:"",toggle:false,labelOn:"ON",labelOff:"OFF"};var b={defaults:function(l){k=c.extend(k,l||{});return c(this)},disable:function(){return c(this).each(function(m,l){var p=c(l),o=p.data("picker");if(typeof o!="undefined"){var n=o.$picker;p.prop("disabled",true);n.addClass("disabled")}})},enable:function(){return c(this).each(function(m,l){var p=c(l),o=p.data("picker");if(typeof o!="undefined"){var n=o.$picker;p.prop("disabled",false);n.removeClass("disabled")}})},destroy:function(){return c(this).each(function(o,n){var s=c(n),q=s.data("picker");if(typeof q!="undefined"){var p=q.$picker,r=p.find(".picker-handle"),m=p.find(".picker-toggle-label"),l=c("label[for="+s.attr("id")+"]");p.off(".picker");r.remove();m.remove();s.off(".picker").removeClass("picker-element").data("picker",null);l.removeClass("picker-label").unwrap()}})},update:function(){return c(this).each(function(m,l){var o=c(l),n=o.data("picker");if(typeof n!="undefined"&&!o.is(":disabled")){if(o.is(":checked")){i({data:n},true)}else{j({data:n},true)}}})}};function g(n){n=c.extend({},k,n);var o=c(this);for(var l=0,m=o.length;l<m;l++){a(o.eq(l),n)}return o}function a(s,l){if(!s.data("picker")){l=c.extend({},l,s.data("picker-options"));var u=s.parents(":not(label):has(label[for="+s.attr("id")+"])").eq(0),t=(u.length)&&c("label[for="+s.attr("id")+"]",u)||c("label[for="+s.attr("id")+"]"),r=s.attr("type"),p="picker-"+(r=="radio"?"radio":"checkbox"),v=s.attr("name"),q='<div class="picker-handle"><div class="picker-flag" /></div>';if(l.toggle){p+=" picker-toggle";q='<span class="picker-toggle-label on">'+l.labelOn+'</span><span class="picker-toggle-label off">'+l.labelOff+"</span>"+q}s.addClass("picker-element");t.wrap('<div class="picker '+p+" "+l.customClass+'" />').before(q).addClass("picker-label");var o=t.parents(".picker"),n=o.find(".picker-handle"),m=o.find(".picker-toggle-label");if(s.is(":checked")){o.addClass("checked")}if(s.is(":disabled")){o.addClass("disabled")}c.extend(l,{$picker:o,$input:s,$handle:n,$label:t,$labels:m,group:v,isRadio:(r=="radio"),isCheckbox:(r=="checkbox")});s.on("focus.picker",l,f).on("blur.picker",l,d).on("change.picker",l,h).on("deselect.picker",l,j).data("picker",l);o.on("click.picker",l,e)}}function e(m){m.preventDefault();m.stopPropagation();var l=m.data;if(!c(m.target).is(l.$input)){l.$input.trigger("click")}}function h(n){n.stopPropagation();var m=n.data;if(!m.$input.is(":disabled")){var l=m.$input.is(":checked");if(m.isCheckbox){if(l){i(n,true)}else{j(n,true)}}else{if(l){i(n)}}}}function i(n,l){var m=n.data;if(typeof m.group!=="undefined"&&m.isRadio){c('input[name="'+m.group+'"]').not(m.$input).trigger("deselect")}m.$picker.addClass("checked")}function j(n,l){var m=n.data;m.$picker.removeClass("checked")}function f(l){l.data.$picker.addClass("focus")}function d(l){l.data.$picker.removeClass("focus")}c.fn.picker=function(l){if(b[l]){return b[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return g.apply(this,arguments)}}return this}})(jQuery)}(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}}(function(f){var p="left",o="right",e="up",x="down",c="in",z="out",m="none",s="auto",l="swipe",t="pinch",A="tap",j="doubletap",b="longtap",y="hold",D="horizontal",u="vertical",i="all",r=10,g="start",k="move",h="end",q="cancel",a="ontouchstart" in window,v=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,d=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,B="TouchSwipe";var n={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};f.fn.swipe=function(G){var F=f(this),E=F.data(B);if(E&&typeof G==="string"){if(E[G]){return E[G].apply(this,Array.prototype.slice.call(arguments,1))}else{f.error("Method "+G+" does not exist on jQuery.swipe")}}else{if(!E&&(typeof G==="object"||!G)){return w.apply(this,arguments)}}return F};f.fn.swipe.defaults=n;f.fn.swipe.phases={PHASE_START:g,PHASE_MOVE:k,PHASE_END:h,PHASE_CANCEL:q};f.fn.swipe.directions={LEFT:p,RIGHT:o,UP:e,DOWN:x,IN:c,OUT:z};f.fn.swipe.pageScroll={NONE:m,HORIZONTAL:D,VERTICAL:u,AUTO:s};f.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:i};function w(E){if(E&&(E.allowPageScroll===undefined&&(E.swipe!==undefined||E.swipeStatus!==undefined))){E.allowPageScroll=m}if(E.click!==undefined&&E.tap===undefined){E.tap=E.click}if(!E){E={}}E=f.extend({},f.fn.swipe.defaults,E);return this.each(function(){var G=f(this);var F=G.data(B);if(!F){F=new C(this,E);G.data(B,F)}})}function C(a4,av){var az=(a||d||!av.fallbackToMouseEvents),J=az?(d?(v?"MSPointerDown":"pointerdown"):"touchstart"):"mousedown",ay=az?(d?(v?"MSPointerMove":"pointermove"):"touchmove"):"mousemove",U=az?(d?(v?"MSPointerUp":"pointerup"):"touchend"):"mouseup",S=az?null:"mouseleave",aD=(d?(v?"MSPointerCancel":"pointercancel"):"touchcancel");var ag=0,aP=null,ab=0,a1=0,aZ=0,G=1,aq=0,aJ=0,M=null;var aR=f(a4);var Z="start";var W=0;var aQ=null;var T=0,a2=0,a5=0,ad=0,N=0;var aW=null,af=null;try{aR.bind(J,aN);aR.bind(aD,a9)}catch(ak){f.error("events not supported "+J+","+aD+" on jQuery.swipe")}this.enable=function(){aR.bind(J,aN);aR.bind(aD,a9);return aR};this.disable=function(){aK();return aR};this.destroy=function(){aK();aR.data(B,null);return aR};this.option=function(bc,bb){if(av[bc]!==undefined){if(bb===undefined){return av[bc]}else{av[bc]=bb}}else{f.error("Option "+bc+" does not exist on jQuery.swipe.options")}return null};function aN(bd){if(aB()){return}if(f(bd.target).closest(av.excludedElements,aR).length>0){return}var be=bd.originalEvent?bd.originalEvent:bd;var bc,bb=a?be.touches[0]:be;Z=g;if(a){W=be.touches.length}else{bd.preventDefault()}ag=0;aP=null;aJ=null;ab=0;a1=0;aZ=0;G=1;aq=0;aQ=aj();M=aa();R();if(!a||(W===av.fingers||av.fingers===i)||aX()){ai(0,bb);T=at();if(W==2){ai(1,be.touches[1]);a1=aZ=au(aQ[0].start,aQ[1].start)}if(av.swipeStatus||av.pinchStatus){bc=O(be,Z)}}else{bc=false}if(bc===false){Z=q;O(be,Z);return bc}else{if(av.hold){af=setTimeout(f.proxy(function(){aR.trigger("hold",[be.target]);if(av.hold){bc=av.hold.call(aR,be,be.target)}},this),av.longTapThreshold)}ao(true)}return null}function a3(be){var bh=be.originalEvent?be.originalEvent:be;if(Z===h||Z===q||am()){return}var bd,bc=a?bh.touches[0]:bh;var bf=aH(bc);a2=at();if(a){W=bh.touches.length}if(av.hold){clearTimeout(af)}Z=k;if(W==2){if(a1==0){ai(1,bh.touches[1]);a1=aZ=au(aQ[0].start,aQ[1].start)}else{aH(bh.touches[1]);aZ=au(aQ[0].end,aQ[1].end);aJ=ar(aQ[0].end,aQ[1].end)}G=a7(a1,aZ);aq=Math.abs(a1-aZ)}if((W===av.fingers||av.fingers===i)||!a||aX()){aP=aL(bf.start,bf.end);al(be,aP);ag=aS(bf.start,bf.end);ab=aM();aI(aP,ag);if(av.swipeStatus||av.pinchStatus){bd=O(bh,Z)}if(!av.triggerOnTouchEnd||av.triggerOnTouchLeave){var bb=true;if(av.triggerOnTouchLeave){var bg=aY(this);bb=E(bf.end,bg)}if(!av.triggerOnTouchEnd&&bb){Z=aC(k)}else{if(av.triggerOnTouchLeave&&!bb){Z=aC(h)}}if(Z==q||Z==h){O(bh,Z)}}}else{Z=q;O(bh,Z)}if(bd===false){Z=q;O(bh,Z)}}function L(bb){var bc=bb.originalEvent;if(a){if(bc.touches.length>0){F();return true}}if(am()){W=ad}a2=at();ab=aM();if(ba()||!an()){Z=q;O(bc,Z)}else{if(av.triggerOnTouchEnd||(av.triggerOnTouchEnd==false&&Z===k)){bb.preventDefault();Z=h;O(bc,Z)}else{if(!av.triggerOnTouchEnd&&a6()){Z=h;aF(bc,Z,A)}else{if(Z===k){Z=q;O(bc,Z)}}}}ao(false);return null}function a9(){W=0;a2=0;T=0;a1=0;aZ=0;G=1;R();ao(false)}function K(bb){var bc=bb.originalEvent;if(av.triggerOnTouchLeave){Z=aC(h);O(bc,Z)}}function aK(){aR.unbind(J,aN);aR.unbind(aD,a9);aR.unbind(ay,a3);aR.unbind(U,L);if(S){aR.unbind(S,K)}ao(false)}function aC(bf){var be=bf;var bd=aA();var bc=an();var bb=ba();if(!bd||bb){be=q}else{if(bc&&bf==k&&(!av.triggerOnTouchEnd||av.triggerOnTouchLeave)){be=h}else{if(!bc&&bf==h&&av.triggerOnTouchLeave){be=q}}}return be}function O(bd,bb){var bc=undefined;if(I()||V()){bc=aF(bd,bb,l)}else{if((P()||aX())&&bc!==false){bc=aF(bd,bb,t)}}if(aG()&&bc!==false){bc=aF(bd,bb,j)}else{if(ap()&&bc!==false){bc=aF(bd,bb,b)}else{if(ah()&&bc!==false){bc=aF(bd,bb,A)}}}if(bb===q){a9(bd)}if(bb===h){if(a){if(bd.touches.length==0){a9(bd)}}else{a9(bd)}}return bc}function aF(be,bb,bd){var bc=undefined;if(bd==l){aR.trigger("swipeStatus",[bb,aP||null,ag||0,ab||0,W,aQ]);if(av.swipeStatus){bc=av.swipeStatus.call(aR,be,bb,aP||null,ag||0,ab||0,W,aQ);if(bc===false){return false}}if(bb==h&&aV()){aR.trigger("swipe",[aP,ag,ab,W,aQ]);if(av.swipe){bc=av.swipe.call(aR,be,aP,ag,ab,W,aQ);if(bc===false){return false}}switch(aP){case p:aR.trigger("swipeLeft",[aP,ag,ab,W,aQ]);if(av.swipeLeft){bc=av.swipeLeft.call(aR,be,aP,ag,ab,W,aQ)}break;case o:aR.trigger("swipeRight",[aP,ag,ab,W,aQ]);if(av.swipeRight){bc=av.swipeRight.call(aR,be,aP,ag,ab,W,aQ)}break;case e:aR.trigger("swipeUp",[aP,ag,ab,W,aQ]);if(av.swipeUp){bc=av.swipeUp.call(aR,be,aP,ag,ab,W,aQ)}break;case x:aR.trigger("swipeDown",[aP,ag,ab,W,aQ]);if(av.swipeDown){bc=av.swipeDown.call(aR,be,aP,ag,ab,W,aQ)}break}}}if(bd==t){aR.trigger("pinchStatus",[bb,aJ||null,aq||0,ab||0,W,G,aQ]);if(av.pinchStatus){bc=av.pinchStatus.call(aR,be,bb,aJ||null,aq||0,ab||0,W,G,aQ);if(bc===false){return false}}if(bb==h&&a8()){switch(aJ){case c:aR.trigger("pinchIn",[aJ||null,aq||0,ab||0,W,G,aQ]);if(av.pinchIn){bc=av.pinchIn.call(aR,be,aJ||null,aq||0,ab||0,W,G,aQ)}break;case z:aR.trigger("pinchOut",[aJ||null,aq||0,ab||0,W,G,aQ]);if(av.pinchOut){bc=av.pinchOut.call(aR,be,aJ||null,aq||0,ab||0,W,G,aQ)}break}}}if(bd==A){if(bb===q||bb===h){clearTimeout(aW);clearTimeout(af);if(Y()&&!H()){N=at();aW=setTimeout(f.proxy(function(){N=null;aR.trigger("tap",[be.target]);if(av.tap){bc=av.tap.call(aR,be,be.target)}},this),av.doubleTapThreshold)}else{N=null;aR.trigger("tap",[be.target]);if(av.tap){bc=av.tap.call(aR,be,be.target)}}}}else{if(bd==j){if(bb===q||bb===h){clearTimeout(aW);N=null;aR.trigger("doubletap",[be.target]);if(av.doubleTap){bc=av.doubleTap.call(aR,be,be.target)}}}else{if(bd==b){if(bb===q||bb===h){clearTimeout(aW);N=null;aR.trigger("longtap",[be.target]);if(av.longTap){bc=av.longTap.call(aR,be,be.target)}}}}}return bc}function an(){var bb=true;if(av.threshold!==null){bb=ag>=av.threshold}return bb}function ba(){var bb=false;if(av.cancelThreshold!==null&&aP!==null){bb=(aT(aP)-ag)>=av.cancelThreshold}return bb}function ae(){if(av.pinchThreshold!==null){return aq>=av.pinchThreshold}return true}function aA(){var bb;if(av.maxTimeThreshold){if(ab>=av.maxTimeThreshold){bb=false}else{bb=true}}else{bb=true}return bb}function al(bb,bc){if(av.allowPageScroll===m||aX()){bb.preventDefault()}else{var bd=av.allowPageScroll===s;switch(bc){case p:if((av.swipeLeft&&bd)||(!bd&&av.allowPageScroll!=D)){bb.preventDefault()}break;case o:if((av.swipeRight&&bd)||(!bd&&av.allowPageScroll!=D)){bb.preventDefault()}break;case e:if((av.swipeUp&&bd)||(!bd&&av.allowPageScroll!=u)){bb.preventDefault()}break;case x:if((av.swipeDown&&bd)||(!bd&&av.allowPageScroll!=u)){bb.preventDefault()}break}}}function a8(){var bc=aO();var bb=X();var bd=ae();return bc&&bb&&bd}function aX(){return !!(av.pinchStatus||av.pinchIn||av.pinchOut)}function P(){return !!(a8()&&aX())}function aV(){var be=aA();var bg=an();var bd=aO();var bb=X();var bc=ba();var bf=!bc&&bb&&bd&&bg&&be;return bf}function V(){return !!(av.swipe||av.swipeStatus||av.swipeLeft||av.swipeRight||av.swipeUp||av.swipeDown)}function I(){return !!(aV()&&V())}function aO(){return((W===av.fingers||av.fingers===i)||!a)}function X(){return aQ[0].end.x!==0}function a6(){return !!(av.tap)}function Y(){return !!(av.doubleTap)}function aU(){return !!(av.longTap)}function Q(){if(N==null){return false}var bb=at();return(Y()&&((bb-N)<=av.doubleTapThreshold))}function H(){return Q()}function ax(){return((W===1||!a)&&(isNaN(ag)||ag<av.threshold))}function a0(){return((ab>av.longTapThreshold)&&(ag<r))}function ah(){return !!(ax()&&a6())}function aG(){return !!(Q()&&Y())}function ap(){return !!(a0()&&aU())}function F(){a5=at();ad=event.touches.length+1}function R(){a5=0;ad=0}function am(){var bb=false;if(a5){var bc=at()-a5;if(bc<=av.fingerReleaseThreshold){bb=true}}return bb}function aB(){return !!(aR.data(B+"_intouch")===true)}function ao(bb){if(bb===true){aR.bind(ay,a3);aR.bind(U,L);if(S){aR.bind(S,K)}}else{aR.unbind(ay,a3,false);aR.unbind(U,L,false);if(S){aR.unbind(S,K,false)}}aR.data(B+"_intouch",bb===true)}function ai(bc,bb){var bd=bb.identifier!==undefined?bb.identifier:0;aQ[bc].identifier=bd;aQ[bc].start.x=aQ[bc].end.x=bb.pageX||bb.clientX;aQ[bc].start.y=aQ[bc].end.y=bb.pageY||bb.clientY;return aQ[bc]}function aH(bb){var bd=bb.identifier!==undefined?bb.identifier:0;var bc=ac(bd);bc.end.x=bb.pageX||bb.clientX;bc.end.y=bb.pageY||bb.clientY;return bc}function ac(bc){for(var bb=0;bb<aQ.length;bb++){if(aQ[bb].identifier==bc){return aQ[bb]}}}function aj(){var bb=[];for(var bc=0;bc<=5;bc++){bb.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return bb}function aI(bb,bc){bc=Math.max(bc,aT(bb));M[bb].distance=bc}function aT(bb){if(M[bb]){return M[bb].distance}return undefined}function aa(){var bb={};bb[p]=aw(p);bb[o]=aw(o);bb[e]=aw(e);bb[x]=aw(x);return bb}function aw(bb){return{direction:bb,distance:0}}function aM(){return a2-T}function au(be,bd){var bc=Math.abs(be.x-bd.x);var bb=Math.abs(be.y-bd.y);return Math.round(Math.sqrt(bc*bc+bb*bb))}function a7(bb,bc){var bd=(bc/bb)*1;return bd.toFixed(2)}function ar(){if(G<1){return z}else{return c}}function aS(bc,bb){return Math.round(Math.sqrt(Math.pow(bb.x-bc.x,2)+Math.pow(bb.y-bc.y,2)))}function aE(be,bc){var bb=be.x-bc.x;var bg=bc.y-be.y;var bd=Math.atan2(bg,bb);var bf=Math.round(bd*180/Math.PI);if(bf<0){bf=360-Math.abs(bf)}return bf}function aL(bc,bb){var bd=aE(bc,bb);if((bd<=45)&&(bd>=0)){return p}else{if((bd<=360)&&(bd>=315)){return p}else{if((bd>=135)&&(bd<=225)){return o}else{if((bd>45)&&(bd<135)){return x}else{return e}}}}}function at(){var bb=new Date();return bb.getTime()}function aY(bb){bb=f(bb);var bd=bb.offset();var bc={left:bd.left,right:bd.left+bb.outerWidth(),top:bd.top,bottom:bd.top+bb.outerHeight()};return bc}function E(bb,bc){return(bb.x>bc.left&&bb.x<bc.right&&bb.y>bc.top&&bb.y<bc.bottom)}}}));function transitionEnd(){var b=document.createElement("bootstrap");var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in a){if(b.style[c]!==undefined){return{end:a[c]}}}return false}(function(a){a.fn.smartZoom=function(J){function O(b){}function K(d,b){var c=U.data("smartZoomData");if(c.currentWheelDelta*b<0){c.currentWheelDelta=0}c.currentWheelDelta+=b;Y.zoom(c.mouseWheelDeltaFactor*c.currentWheelDelta,{x:d.pageX,y:d.pageY})}function R(b){b.preventDefault()}function H(){var d=U.data("smartZoomData");if(d.settings.mouseMoveEnabled!=true||d.settings.moveCursorEnabled!=true){return}var b=j();var c=b.width/d.originalSize.width;if(parseInt(c*100)>parseInt(d.adjustedPosInfos.scale*100)){U.css({cursor:"move"})}else{U.css({cursor:"default"})}}function af(b){V(b.pageX,b.pageY)}function ab(b){b.preventDefault();a(document).on("mousemove.smartZoom",W);a(document).bind("mouseup.smartZoom",ad);var c=U.data("smartZoomData");c.moveCurrentPosition=new P(b.pageX,b.pageY);c.moveLastPosition=new P(b.pageX,b.pageY)}function W(c){var b=U.data("smartZoomData");if(b.mouseMoveForPan||!b.mouseMoveForPan&&b.moveCurrentPosition.x!=c.pageX&&b.moveCurrentPosition.y!=c.pageY){b.mouseMoveForPan=true;G(c.pageX,c.pageY,0,false)}}function ad(c){var d=U.data("smartZoomData");if(d.mouseMoveForPan){d.mouseMoveForPan=false;if(d.moveLastPosition.distance(d.moveCurrentPosition)>4){var b=d.moveLastPosition.interpolate(d.moveCurrentPosition,-4);G(b.x,b.y,500,true)}else{G(d.moveLastPosition.x,d.moveLastPosition.y,0,true)}}else{if(d.settings.zoomOnSimpleClick){V(c.pageX,c.pageY)}}a(document).unbind("mousemove.smartZoom");a(document).unbind("mouseup.smartZoom")}function Z(f){f.preventDefault();a(document).unbind("touchmove.smartZoom");a(document).unbind("touchend.smartZoom");a(document).bind("touchmove.smartZoom",Q);a(document).bind("touchend.smartZoom",ac);var h=f.originalEvent.touches;var d=h[0];var g=U.data("smartZoomData");g.touch.touchMove=false;g.touch.touchPinch=false;g.moveCurrentPosition=new P(d.pageX,d.pageY);g.moveLastPosition=new P(d.pageX,d.pageY);g.touch.lastTouchPositionArr=new Array;var k;var c=h.length;for(var b=0;b<c;++b){k=h[b];g.touch.lastTouchPositionArr.push(new P(k.pageX,k.pageY))}}function Q(al){al.preventDefault();var C=U.data("smartZoomData");var N=al.originalEvent.touches;var L=N.length;var T=N[0];if(L==1&&!C.touch.touchPinch&&C.settings.touchMoveEnabled==true){if(!C.touch.touchMove){var v=C.touch.lastTouchPositionArr[0];if(v.distance(new P(T.pageX,T.pageY))<3){return}else{C.touch.touchMove=true}}G(T.pageX,T.pageY,0,false)}else{if(L==2&&!C.touch.touchMove&&C.settings.pinchEnabled==true){C.touch.touchPinch=true;var ap=N[1];var ak=C.touch.lastTouchPositionArr[0];var ah=C.touch.lastTouchPositionArr[1];var an=new P(T.pageX,T.pageY);var ai=new P(ap.pageX,ap.pageY);var S=an.distance(ai);var am=ak.distance(ah);var ag=S-am;if(Math.abs(ag)<3){return}var aj=new P((an.x+ai.x)/2,(an.y+ai.y)/2);var i=j();var ao=C.originalSize;var n=i.width/ao.width;var A=S/am;var k=i.width*A/ao.width;Y.zoom(k-n,aj,0);C.touch.lastTouchPositionArr[0]=an;C.touch.lastTouchPositionArr[1]=ai}}}function ac(c){c.preventDefault();var f=c.originalEvent.touches.length;if(f==0){a(document).unbind("touchmove.smartZoom");a(document).unbind("touchend.smartZoom")}var b=U.data("smartZoomData");if(b.touch.touchPinch){return}if(b.touch.touchMove){if(b.moveLastPosition.distance(b.moveCurrentPosition)>2){var d=b.moveLastPosition.interpolate(b.moveCurrentPosition,-4);G(d.x,d.y,500,true)}}else{if(b.settings.dblTapEnabled==true&&b.touch.lastTouchEndTime!=0&&(new Date).getTime()-b.touch.lastTouchEndTime<400){var g=b.touch.lastTouchPositionArr[0];V(g.x,g.y)}b.touch.lastTouchEndTime=(new Date).getTime()}}function G(k,r,g,v){aa(O.PAN);var b=U.data("smartZoomData");b.moveLastPosition.x=b.moveCurrentPosition.x;b.moveLastPosition.y=b.moveCurrentPosition.y;var p=U.offset();var n=j();var h=p.left+(k-b.moveCurrentPosition.x);var d=p.top+(r-b.moveCurrentPosition.y);var m=B(h,d,n.width,n.height);D(O.PAN,O.START,false);I(U,m.x,m.y,n.width,n.height,g,v==true?function(){D(O.PAN,O.END,false)}:null);b.moveCurrentPosition.x=k;b.moveCurrentPosition.y=r}function V(h,m){var b=U.data("smartZoomData");var n=b.originalSize;var c=j();var k=c.width/n.width;var i=b.adjustedPosInfos.scale;var g=parseFloat(b.settings.dblClickMaxScale);var d;if(k.toFixed(2)>g.toFixed(2)||Math.abs(g-k)>Math.abs(k-i)){d=g-k}else{d=i-k}Y.zoom(d,{x:h,y:m})}function aa(c){var f=U.data("smartZoomData");if(f.transitionObject){if(f.transitionObject.cssAnimHandler){U.off(a.support.transition,f.transitionObject.cssAnimTimer)}var b=f.originalSize;var d=j();var g=new Object;g[f.transitionObject.transition]="all 0s";if(f.transitionObject.css3dSupported){g[f.transitionObject.transform]="translate3d("+d.x+"px, "+d.y+"px, 0) scale3d("+d.width/b.width+","+d.height/b.height+", 1)"}else{g[f.transitionObject.transform]="translateX("+d.x+"px) translateY("+d.y+"px) scale("+d.width/b.width+","+d.height/b.height+")"}U.css(g)}else{U.stop()}H();if(c!=null){D(c,"",true)}}function B(h,d,g,c){var f=U.data("smartZoomData");var k=Math.min(f.adjustedPosInfos.top,d);k+=Math.max(0,f.adjustedPosInfos.top+f.adjustedPosInfos.height-(k+c));var b=Math.min(f.adjustedPosInfos.left,h);b+=Math.max(0,f.adjustedPosInfos.left+f.adjustedPosInfos.width-(b+g));return new P(b.toFixed(2),k.toFixed(2))}function ae(b){U.unbind("load.smartZoom");Y.init.apply(U,[b.data.arguments])}function F(){var m=U.data("smartZoomData");var u=m.containerDiv;var b=m.originalSize;var h=u.parent().offset();var v=M(m.settings.left,h.left,u.parent().width());var d=M(m.settings.top,h.top,u.parent().height());u.offset({left:v,top:d});u.width(q(m.settings.width,u.parent().width(),v-h.left));u.height(q(m.settings.height,u.parent().height(),d-h.top));var p=z(u);var k=Math.min(Math.min(p.width/b.width,p.height/b.height),1).toFixed(2);var g=b.width*k;var n=b.height*k;m.adjustedPosInfos={left:(p.width-g)/2+h.left,top:(p.height-n)/2+h.top,width:g,height:n,scale:k};aa();I(U,m.adjustedPosInfos.left,m.adjustedPosInfos.top,g,n,0,function(){U.css("visibility","visible")});H()}function I(E,b,n,L,k,C,A){var w=U.data("smartZoomData");var m=w.containerDiv.offset();var y=b-m.left;var v=n-m.top;if(w.transitionObject!=null){var g=w.originalSize;var x=new Object;x[w.transitionObject.transform+"-origin"]="0 0";x[w.transitionObject.transition]="all "+C/1000+"s ease-out";if(w.transitionObject.css3dSupported){x[w.transitionObject.transform]="translate3d("+y+"px, "+v+"px, 0) scale3d("+L/g.width+","+k/g.height+", 1)"}else{x[w.transitionObject.transform]="translateX("+y+"px) translateY("+v+"px) scale("+L/g.width+","+k/g.height+")"}if(A!=null){w.transitionObject.cssAnimHandler=A;E.one(a.support.transition.end,w.transitionObject.cssAnimHandler)}E.css(x)}else{E.animate({"margin-left":y,"margin-top":v,width:L,height:k},{duration:C,easing:w.settings.easing,complete:function(){if(A!=null){A()}}})}}function j(m){var w=U.data("smartZoomData");var b=U.width();var h=U.height();var x=U.offset();var d=parseInt(x.left);var v=parseInt(x.top);var p=w.containerDiv.offset();if(m!=true){d=parseInt(d)-p.left;v=parseInt(v)-p.top}if(w.transitionObject!=null){var k=U.css(w.transitionObject.transform);if(k&&k!=""&&k.search("matrix")!=-1){var g;var n;if(k.search("matrix3d")!=-1){n=k.replace("matrix3d(","").replace(")","").split(",");g=n[0]}else{n=k.replace("matrix(","").replace(")","").split(",");g=n[3];d=parseFloat(n[4]);v=parseFloat(n[5]);if(m){d=parseFloat(d)+p.left;v=parseFloat(v)+p.top}}b=g*b;h=g*h}}return{x:d,y:v,width:b,height:h}}function D(g,d,c){var f=U.data("smartZoomData");var h="";if(c==true&&f.currentActionType!=g){h=f.currentActionType+"_"+O.END;f.currentActionType="";f.currentActionStep=""}else{if(f.currentActionType!=g||f.currentActionStep==O.END){f.currentActionType=g;f.currentActionStep=O.START;h=f.currentActionType+"_"+f.currentActionStep}else{if(f.currentActionType==g&&d==O.END){f.currentActionStep=O.END;h=f.currentActionType+"_"+f.currentActionStep;f.currentActionType="";f.currentActionStep=""}}}if(h!=""){var b=jQuery.Event(h);b.targetRect=j(true);b.scale=b.targetRect.width/f.originalSize.width;U.trigger(b)}}function e(){var m=document.body||document.documentElement;var d=m.style;var b=["transition","WebkitTransition","MozTransition","MsTransition","OTransition"];var g=["transition","-webkit-transition","-moz-transition","-ms-transition","-o-transition"];var p=["transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"];var c=b.length;var l;for(var k=0;k<c;k++){if(d[b[k]]!=null){transformStr=p[k];var h=a('<div style="position:absolute;">Translate3d Test</div>');a("body").append(h);l=new Object;l[p[k]]="translate3d(20px,0,0)";h.css(l);css3dSupported=h.offset().left-a("body").offset().left==20;h.empty().remove();if(css3dSupported){return{transition:g[k],transform:p[k],css3dSupported:css3dSupported}}}}return null}function q(c,b,d){if(c.search&&c.search("%")!=-1){return(b-d)*(parseInt(c)/100)}else{return parseInt(c)}}function M(c,b,d){if(c.search&&c.search("%")!=-1){return b+d*(parseInt(c)/100)}else{return b+parseInt(c)}}function X(){F()}function z(d){var b=d.offset();if(!b){return null}var f=b.left;var c=b.top;return{x:f,y:c,width:d.outerWidth(),height:d.outerHeight()}}function P(c,b){this.x=c;this.y=b;this.toString=function(){return"(x="+this.x+", y="+this.y+")"};this.interpolate=function(g,d){var h=d*this.x+(1-d)*g.x;var f=d*this.y+(1-d)*g.y;return new P(h,f)};this.distance=function(d){return Math.sqrt(Math.pow(d.y-this.y,2)+Math.pow(d.x-this.x,2))}}var U=this;O.ZOOM="SmartZoom_ZOOM";O.PAN="SmartZoom_PAN";O.START="START";O.END="END";O.DESTROYED="SmartZoom_DESTROYED";var Y={init:function(f){if(U.data("smartZoomData")){return}settings=a.extend({top:"0",left:"0",width:"100%",height:"100%",easing:"smartZoomEasing",initCallback:null,maxScale:3,dblClickMaxScale:1.8,mouseEnabled:true,scrollEnabled:true,dblClickEnabled:true,mouseMoveEnabled:true,moveCursorEnabled:true,adjustOnResize:true,touchEnabled:true,dblTapEnabled:true,zoomOnSimpleClick:false,pinchEnabled:true,touchMoveEnabled:true,containerBackground:"#FFFFFF",containerClass:""},f);var g=U.attr("style");var d="smartZoomContainer"+(new Date).getTime();var c=a('<div id="'+d+'" class="'+settings.containerClass+'"></div>');U.before(c);U.remove();c=a("#"+d);c.css({overflow:"hidden"});if(settings.containerClass==""){c.css({"background-color":settings.containerBackground})}c.append(U);var b=new Object;b.lastTouchEndTime=0;b.lastTouchPositionArr=null;b.touchMove=false;b.touchPinch=false;U.data("smartZoomData",{settings:settings,containerDiv:c,originalSize:{width:U.width(),height:U.height()},originalPosition:U.offset(),transitionObject:e(),touch:b,mouseWheelDeltaFactor:0.15,currentWheelDelta:0,adjustedPosInfos:null,moveCurrentPosition:null,moveLastPosition:null,mouseMoveForPan:false,currentActionType:"",initialStyles:g,currentActionStep:""});F();if(settings.touchEnabled==true){U.bind("touchstart.smartZoom",Z)}if(settings.mouseEnabled==true){if(settings.mouseMoveEnabled==true){U.bind("mousedown.smartZoom",ab)}if(settings.scrollEnabled==true){c.bind("mousewheel.smartZoom",K);c.bind("mousewheel.smartZoom DOMMouseScroll.smartZoom",R)}if(settings.dblClickEnabled==true&&settings.zoomOnSimpleClick==false){c.bind("dblclick.smartZoom",af)}}document.ondragstart=function(){return false};if(settings.adjustOnResize==true){a(window).bind("resize.smartZoom",X)}if(settings.initCallback!=null){settings.initCallback.apply(this,U)}},zoom:function(ah,u,L){var x=U.data("smartZoomData");var A;var al;if(!u){var ag=z(x.containerDiv);A=ag.x+ag.width/2;al=ag.y+ag.height/2}else{A=u.x;al=u.y}aa(O.ZOOM);var E=j(true);var aj=x.originalSize;var S=E.width/aj.width+ah;S=Math.max(x.adjustedPosInfos.scale,S);S=Math.min(x.settings.maxScale,S);var y=aj.width*S;var ai=aj.height*S;var r=A-E.x;var C=al-E.y;var ak=y/E.width;var n=E.x-(r*ak-r);var g=E.y-(C*ak-C);var k=B(n,g,y,ai);if(L==null){L=700}D(O.ZOOM,O.START,false);I(U,k.x,k.y,y,ai,L,function(){x.currentWheelDelta=0;H();D(O.ZOOM,O.END,false)})},pan:function(g,d,c){if(g==null||d==null){return}if(c==null){c=700}var f=U.offset();var h=j();var b=B(f.left+g,f.top+d,h.width,h.height);if(b.x!=f.left||b.y!=f.top){aa(O.PAN);D(O.PAN,O.START,false);I(U,b.x,b.y,h.width,h.height,c,function(){D(O.PAN,O.END,false)})}},destroy:function(){var c=U.data("smartZoomData");if(!c){return}aa();var b=c.containerDiv;U.unbind("mousedown.smartZoom");U.bind("touchstart.smartZoom");b.unbind("mousewheel.smartZoom");b.unbind("dblclick.smartZoom");b.unbind("mousewheel.smartZoom DOMMouseScroll.smartZoom");a(window).unbind("resize.smartZoom");a(document).unbind("mousemove.smartZoom");a(document).unbind("mouseup.smartZoom");a(document).unbind("touchmove.smartZoom");a(document).unbind("touchend.smartZoom");U.css({cursor:"default"});b.before(U);I(U,c.originalPosition.left,c.originalPosition.top,c.originalSize.width,c.originalSize.height,5);U.removeData("smartZoomData");b.remove();U.attr("style",c.initialStyles);U.trigger(O.DESTROYED)},isPluginActive:function(){return U.data("smartZoomData")!=undefined}};if(Y[J]){return Y[J].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof J==="object"||!J){if(U[0].tagName.toLowerCase()=="img"&&!U[0].complete){U.bind("load.smartZoom",{arguments:arguments[0]},ae)}else{Y.init.apply(U,[arguments[0]])}}else{a.error("Method "+J+" does not exist on e-smartzoom jquery plugin")}}}})(jQuery);(function(a){a.extend(a.easing,{smartZoomEasing:function(c,f,e,b,d){return a.easing.smartZoomOutQuad(c,f,e,b,d)},smartZoomOutQuad:function(f,c,g,d,b){return -d*(c/=b)*(c-2)+g}})})(jQuery);(function(c){function a(g){var l=g||window.event,j=[].slice.call(arguments,1),f=0,h=true,k=0,e=0;g=c.event.fix(l);g.type="mousewheel";if(l.wheelDelta){f=l.wheelDelta/120}if(l.detail){f=-l.detail/3}e=f;if(l.axis!==undefined&&l.axis===l.HORIZONTAL_AXIS){e=0;k=-1*f}if(l.wheelDeltaY!==undefined){e=l.wheelDeltaY/120}if(l.wheelDeltaX!==undefined){k=-1*l.wheelDeltaX/120}j.unshift(g,f,k,e);return(c.event.dispatch||c.event.handle).apply(this,j)}var d=["DOMMouseScroll","mousewheel"];if(c.event.fixHooks){for(var b=d.length;b;){c.event.fixHooks[d[--b]]=c.event.mouseHooks}}c.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var f=d.length;f;){this.addEventListener(d[--f],a,false)}}else{this.onmousewheel=a}},teardown:function(){if(this.removeEventListener){for(var f=d.length;f;){this.removeEventListener(d[--f],a,false)}}else{this.onmousewheel=null}}};c.fn.extend({mousewheel:function(f){return f?this.bind("mousewheel",f):this.trigger("mousewheel")},unmousewheel:function(f){return this.unbind("mousewheel",f)}})})(jQuery);$.fn.emulateTransitionEnd=function(c){var a=false,d=this;$(this).one($.support.transition.end,function(){a=true});var b=function(){if(!a){$(d).trigger($.support.transition.end)}};setTimeout(b,c);return this};$(function(){$.support.transition=transitionEnd()});angular.module("acead").directive("homeCarousel",["$timeout",function(a){return{restrict:"A",link:function(c,b,d){a(function(){var f=$.fn.swipe.defaults.excludedElements,e;$.fn.swipe.defaults.excludedElements="label, button, input, select, textarea, .noSwipe";$(b).carouFredSel({responsive:true,height:"variable",items:{visible:1,height:"variable"},scroll:{fx:"scroll",duration:550},swipe:{onTouch:true,onMouse:true},auto:false,prev:{button:"#carousel_prev",key:"left"},next:{button:"#carousel_next",key:"right"},pagination:{items:1,container:"#carousel_paging",anchorBuilder:function(g){var h=$(".js_carousel_thumbnail",this);if(h.length){return h}else{return $(e)[g-1]}}},onCreate:function(){$.fn.swipe.defaults.excludedElements=f;a(function(){var g=$(".js_carousel_thumbnail"),i=g.height(),h=g.find("span");h.css("line-height",i+"px").css("height",i+"px");h.wrapInner("<i class='thumbnail_holder'></i>");e=$("#carousel_paging").html();$(window).trigger("resize")},0)}})},0)}}}]);angular.module("acead").directive("fredCarousel",["$timeout",function(a){return{restrict:"A",link:function(d,c,b){d.$watch(b.fredCarousel,function(){a(function(){var h=$.fn.swipe.defaults.excludedElements,g=d.$eval(b.config)||{},f=d.$eval(b.mobileConfig)||{},i=d.$eval(b.tabletConfig)||{},e={items:{minimum:3,visible:4},align:"left",width:989,scroll:1,swipe:{onTouch:true,onMouse:true},auto:false,prev:"#carousel_prev",next:"#carousel_next",onCreate:function(){$.fn.swipe.defaults.excludedElements=h}};if(app.preferences.isMobile&&app.preferences.pageIsResponsive&&b.mobileConfig){angular.extend(e,f)}else{if(app.preferences.isTablet&&app.preferences.pageIsResponsive&&b.tabletConfig){angular.extend(e,i)}else{if($("body").hasClass("orientationlandscape")){angular.extend(e,i)}else{angular.extend(e,g)}}}$.fn.swipe.defaults.excludedElements="label, button, input, select, textarea, .noSwipe";$(c).carouFredSel(e)},500)},true)}}}]);angular.module("acead").directive("mouseenter",[function(){return{restrict:"A",link:function(b,d,a){function c(f,e){if(!f){return false}while(f.parentNode){if(f==e){return true}f=f.parentNode}while(f.offsetParent){if(f==e){return true}f=f.offsetParent}return false}d.bind("mouseover",function(i){var f=i||window.event;var h=f.target||f.srcElement;var g=f.relatedTarget||f.fromElement;if(c(g,d[0])){return}if(b.$root.$$phase){b.$eval(a.mouseenter)}else{b.$apply(a.mouseenter)}})}}}]).directive("mouseleave",[function(){return{restrict:"A",link:function(b,d,a){function c(f,e){if(!f){return false}while(f.parentNode){if(f==e){return true}f=f.parentNode}while(f.offsetParent){if(f==e){return true}f=f.offsetParent}return false}d.bind("mouseout",function(i){var f=i||window.event;var h=f.target||f.srcElement;var g=f.relatedTarget||f.toElement;if(c(g,d[0])){return}if(b.$root.$$phase){b.$eval(a.mouseleave)}else{b.$apply(a.mouseleave)}})}}}]);angular.module("acead").directive("customProductImages",["$timeout",function(a){return{restrict:"A",scope:true,link:function(f,e,d){var b=$(e);a(function(){f.firstImage=b.find("img").first();f.activeImage=f.firstImage;f.activeImage.show();c()},0);function c(){a(function(){b.height(f.activeImage.height());f.activeImage=f.activeImage.fadeOut().next();if(!f.activeImage.length){f.activeImage=$(f.firstImage)}f.activeImage.delay(500).fadeIn(400,function(){b.height("auto")});c()},5000)}}}}]);angular.module("acead").controller("CompareCarouselCtrl",["$scope",function(a){a.next=function(){if(a.currentIndex+a.items<a.columnsCount){a.currentIndex++;var c=a.currentIndex+1;var b=a.currentIndex+a.items+1;$(".js_compare_wrapper").addClass("carousel_animated");a.compareTable.find("tr > :nth-child("+c+") > :nth-child(1)").css({"margin-left":0}).animate({"margin-left":-a.itemWidth},400,function(){a.compareTable.find("tr > :nth-child("+c+")").hide();$(".js_compare_wrapper").removeClass("carousel_animated")});a.compareTable.find("tr > :nth-child("+b+")").show()}};a.prev=function(){if(a.currentIndex>0){a.currentIndex--;var b=a.currentIndex+2;var c=a.currentIndex+a.items+2;a.compareTable.find("tr > :nth-child("+b+")").show();$(".js_compare_wrapper").addClass("carousel_animated");a.compareTable.find("tr > :nth-child("+b+") > :nth-child(1)").css({"margin-left":-a.itemWidth}).animate({"margin-left":0},400,function(){a.compareTable.find("tr > :nth-child("+c+")").hide();$(".js_compare_wrapper").removeClass("carousel_animated")})}};a.initTable=function(e,c){a.columnsCount=a.compareTable.find("tr:first td.js_scrollable").length/2;if(!a.columnsCount){return}if(a.columnsCount==2){a.compareTable.addClass("compare_two_items")}else{a.compareTable.removeClass("compare_two_items")}if(c>a.columnsCount){c--;e--;a.currentIndex--}for(var b=2;b<=a.columnsCount+1;b++){var d=a.compareTable.find("tr > :nth-child("+b+")");if(b<e+2||b>=c+2){d.hide()}else{d.show()}}}}]).directive("compareCarousel",["$timeout",function(a){return{restrict:"A",controller:"CompareCarouselCtrl",require:"compareCarousel",scope:true,link:function(d,c,b){d.element=$(c);d.items=b.items?parseInt(b.items):3;d.currentIndex=0;d.compareTable=$(c).find("table");d.$watch(b.compareCarousel,function(){a(function(){d.itemWidth=d.compareTable.find("tr > :nth-child(2)").width();d.initTable(d.currentIndex,d.currentIndex+d.items)},0)},true);d.compareTable.swipe({excludedElements:":input",threshold:d.compareTable.find("tr > :nth-child(2)").width(),triggerOnTouchEnd:false,swipeLeft:function(){d.next()},swipeRight:function(){d.prev()}})}}}]);angular.module("acead").directive("customSelect",["$timeout",function(a){return{restrict:"A",require:"ngModel",link:function(h,i,g,c){var f=app.utils.parsePath(h,g.ngModel),e=(g.optionModel)?app.utils.parsePath(h,g.optionModel):null,d=(g.changeCallback)?app.utils.parsePath(h,g.changeCallback):null;a(function(){$(i).selectBoxIt(app.preferences.customSelectSettings);$(i).addClass("visually_hidden_select");if("refreshOn" in g){h.$watch(g.refreshOn,j,true)}$(i).on("change",function(){if(c.$pristine){i.removeClass("ng-pristine").addClass("ng-dirty");c.$dirty=true;c.$pristine=false}h.$apply(function(){f.root&&(f.root[f.path]=(e)?e.root[e.path][parseInt($(i).val())]:$(i).val());(d&&d.root[d.path]())})});b()},0);h.$on("cusel-parent-show",j);function j(){$(i).data("selectBox-selectBoxIt").wait(0,function(){$(i).data("selectBox-selectBoxIt").refresh();b()})}function b(){var n=$(i).data("selectBox-selectBoxIt"),m=n.dropdownContainer.find(".selectboxit-options"),l=angular.extend({},app.preferences.customScrollSettings,{autoReinitialise:false,contentWidth:"100%"}),k=m&&m.css({display:"block"}).jScrollPane(l).css({display:"none"}).data("jsp");$(i).on("search moveDown moveUp",function(){k.scrollToElement(n.listItems[n.currentFocus],true)})}}}}]);angular.module("acead").directive("customRadioCheckbox",["$timeout",function(a){return{restrict:"A",link:function(d,c,b){d.$watch(b.customRadioCheckbox,function(){$(c).trigger("change")},true);if("ngDisabled" in b){d.$watch(b.ngDisabled,function(e){$(c).picker(e?"disable":"enable")},true)}a(function(){$(c).picker()},0)}}}]);angular.module("acead").directive("contentNavigation",function(){return{restrict:"A",link:function(h,i,g){var a=$(i).find(".js_static_page .content-asset"),b=2,f=6,j,e;j=c(b);e=j?d(j.elements,j.level):null;function c(m){var l={elements:a.children("h"+m),level:m};for(var k=0;k<l.elements.length;k++){$(l.elements[k]).attr("id",l.elements[k].tagName.toLowerCase()+"_"+k)}return l.elements.length?l:m==f?null:c(m+1)}function d(n,o){var m={},l=c(o+1);for(var k=0;k<n.length;k++){m[n[k].id]={elementAnchor:"#"+n[k].id,elementContent:n[k].innerText||n[k].textContent,children:function(){if(l){var q=[];for(var p=0;p<l.elements.length;p++){$(l.elements[p]).prevAll("h"+o)[0].id==n[k].id&&q.push(l.elements[p])}return q.length?d(q,l.level):null}else{return null}}()}}return m}h.navigationMap=e}}});angular.module("acead").directive("customProductInfo",["$compile","$timeout","eventService","customizerService",function(d,c,a,b){return{restrict:"A",link:function(l,k,i){var j=document.getElementsByTagName("head")[0],h;a.bind("PC_showProductInfo",function(m){h=m.params.pid;b.getCustomProductTabs(h,g)});a.bind("PC_removeProductInfo",function(m){e()});function g(m){app.utils.applyTemplateScripts(angular.element("<div>").append(m));k.html(m);d(k.contents())(l);c(function(){var o=app.data.product,n=h;if(o.master&&app.data.product.master.id){n=o.master.id}f(n)},0)}function e(){k.html("")}function f(m){POWERREVIEWS.display.engine({write:function(o){var n=$(o);if(n.length&&n[0].nodeName==="LINK"){j.appendChild(n[0])}else{if(app.preferences.isMobile&&app.preferences.pageIsResponsive){$("[id=pwr-reviews-container] .flyout_content").append(n)}else{$("[id=pwr-reviews-container]").append(n)}}}},{pr_page_id:m,pr_write_review:app.utils.updateURL(app.urls.createReview,"pid",m)})}}}}]);angular.module("acead").directive("eventsTracking",["eventService","analyticService",function(a,b){return{restrict:"A",link:function(g,f,d){var c=f;f.bind("click",function(l){var i=l.target||l.srcElement,h=e(angular.element(i)),k="data-{0}-params",j=h.attr("data-tracking-event");if(!j){return false}b.trackAll(j,i,function(m){var p,o;try{o=k.replace("{0}",m);h.attr(o)&&(p=g.$eval(h.attr(o)))}catch(n){}return p})});function e(h){while(h[0]&&(h[0]!==c[0])){if(h.attr("data-tracking-event")){break}h=h.parent()}return h}}}}]);angular.module("acead").directive("linksTracking",["eventService","analyticService",function(a,b){return{restrict:"A",link:function(g,f,e){var d=f;f.bind("click",function(p){var j=p.target||p.srcElement,m,k="data-{0}-params",o,n;m=c(j);if(!m||m.tagName!=="A"){return false}n=b.getAllProviderNames();for(var l=0,h=n.length;l<h;l++){o=k.replace("{0}",n[l]);try{a.trigger("trackLink",{eventObject:m,trackingParams:g.$eval(d.attr(o)),})}catch(p){}}});function c(i){var h=null;while(i&&(i!==d[0])){if(i.tagName==="A"){h=i;break}i=i.parentNode}return h}}}}]);angular.module("acead").directive("customElementsTracking",["eventService","analyticService",function(a,b){return{restrict:"A",link:function(g,f,d){var e,h,c;c=f;if(!d.customElements){return}e={writeReviewLink:{selectors:[".pr-write-review-link"],event:"writeReviewWrapper"}};h=d.customElements.split(",");f.bind("click",function(j){var i=$(j.target||j.srcElement);angular.forEach(h,function(k){var l=e[k];if(!l||!angular.isObject(l)){return false}angular.forEach(l.selectors,function(m){while(i[0]&&(i[0]!==c[0])){if(i.is(m)){a.trigger(l.event);break}i=i.parent()}})})})}}}]);angular.module("acead").directive("formTracking",["eventService",function(a){return{restrict:"A",link:function(f,d,c){var d=$(d),b=app.data.tracking,g={};if(b&&b.ga&&b.ga.formsModel){g=b.ga.formsModel}d.bind("change",function(i){var h=i.target||i.srcElement;if(h.tagName==="INPUT"&&/radio|checkbox/.test(h.type)){return}e(i.target||i.srcElement)});d.on("click","input:radio, input:checkbox",function(h){e(h.target||h.srcElement)});function e(h){var i;if((typeof(g[h.name])==="string")&&g[h.name]){i=g[h.name]}else{if((typeof(g[h.name])==="object")&&app.data.currentPage&&g[h.name][app.data.currentPage]){i=g[h.name][app.data.currentPage]}}if(!i){if(h.hasAttribute("data-track-form-element")){i=h.name}else{return}}if(i){a.trigger("formElementChange",{formElementName:i,eventObject:h})}}}}}]);angular.module("acead").directive("cookieContent",[function(){return{restrict:"A",scope:true,link:function(a,c,b){a.showContent=!$.cookie(b.cookieContent)||false;a.setContentHidden=function(){+b.expires?$.cookie(b.cookieContent,"hidden",{expires:+b.expires,path:"/"}):$.cookie(b.cookieContent,"hidden",{path:"/"});a.showContent=false}}}}]);angular.module("acead").directive("selectDatepicker",function(){return{restrict:"A",scope:true,link:function(h,d,g){var a=new Date();h.daysArray=c(31);h.monthsArray=[];h.yearsArray=c(a.getFullYear(),a.getFullYear()-100).reverse();h.formfieldName=g.formfieldName||"";for(var e=0;e<app.resources.months.length;e++){h.monthsArray.push({id:e,label:app.resources.shortMonths[e]})}if(g.formfieldValue){var b=new Date(g.formfieldValue);h.selectedYear=b.getFullYear().toString();h.selectedDay=f(b.getDate());h.selectedMonth=h.monthsArray[b.getMonth()]}h.$watch("[selectedYear, selectedMonth]",function(){var i=new Date(),k,l=h.selectedYear||i.getFullYear(),m=h.selectedMonth?h.selectedMonth.id+1:i.getMonth()+1;k=new Date(l,m,0);h.daysArray=c(m===2?29:k.getDate())},true);h.$watch("[selectedYear, selectedMonth, selectedDay]",function(){h.generatedDate=(h.selectedYear&&h.selectedMonth&&h.selectedDay)?new Date(h.selectedYear,h.selectedMonth.id,h.selectedDay):null;h.generatedDateFormated=h.generatedDate?[(h.selectedMonth.id+1),h.selectedDay,h.selectedYear].join("/"):""},true);function c(k,n){var m=[];for(var l=n||1;l<=k;l++){m.push(f(l))}return m}function j(l,m){var i=new Date(),k=new Date(l||i.getFullYear(),m?m+1:(i.getMonth()+1),0).getDate();return k}function f(i){if(!parseInt(i)){return}var k=(i<10)?"0"+i:i.toString();return k}},templateUrl:app.urls.showTemplate+"?template=selectdatepicker"}});angular.module("acead").directive("disableCopy",["$parse",function(a){return{restrict:"A",require:"ngModel",link:function(d,c,e,b){c.bind("paste",function(f){f.preventDefault();c.removeClass("ng-pristine").addClass("ng-dirty").addClass("has-visited").removeClass("has-focus");d.$apply(function(){d[$(c).parents("form").attr("name")].$setDirty(true);b.$setValidity("required",false);b.$dirty=true;b.$pristine=false;b.hasVisited=true;b.hasFocus=false})})}}}]);angular.module("acead").directive("charLimit",["$parse",function(a){return{restrict:"A",require:"ngModel",scope:true,link:function(g,f,c,b){var e=c.maxlength||null,d=c.charLimitMask||app.resources.characterLimit.replace("{1}",""+e),h=!("maxLength" in document.createElement("textarea"));(c.charLimit)&&a(c.charLimit).assign(g,d.replace("{0}",500));if(e!==null){f.bind("keypress",function(j){var i=f.val().replace(/\r\n/g,"~~").replace(/\n/g,"~~");if(i.length>=e){j.keyCode!=8&&j.preventDefault()}});b.$parsers.unshift(function(j){var i=f.val().replace(/\r\n/g,"~~").replace(/\n/g,"~~");if(i.length>=e&&h){b.$setViewValue(i.substr(0,e));b.$render()}(c.charLimit)&&(a(c.charLimit).assign(g,d.replace("{0}",500-i.length)));return j})}}}}]);angular.module("acead").directive("dynamicPattern",function(){return{restrict:"A",require:"ngModel",scope:true,link:function(d,c,b,a){d.$watch(b.dynamicPattern,function(){if(a.$viewValue){if(d[b.dynamicPattern].test(c.val())){a.$setValidity("pattern",true)}else{a.$setValidity("pattern",false)}if(a.$pristine){c.removeClass("ng-pristine").addClass("ng-dirty").addClass("has-visited");a.hasVisited=true;a.$dirty=true;a.$pristine=false}}})}}});angular.module("acead").directive("dynamicCreditCardType",["$parse",function(a){return{restrict:"A",require:"ngModel",link:function(d,c,e,b){var f={Visa:/^4[0-9]{12}(?:[0-9]{3})?$/,MasterCard:/^5[1-5][0-9]{14}$/,Amex:/^3[47][0-9]{13}$/,Discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/};if(a(e.dynamicCreditCardType)(d).hiddenNumber){$(c).on("click.clearOldNumber",function(g){$(g.target).val("");$(g.target).off("click.clearOldNumber")})}d.$watch(e.ngModel,function(n,h){if(h!=n){var l=/[0-9]/g;n=""+n;(n)&&(l.test(n))&&(n=+n.match(/[0-9]/g).join(""));a(e.dynamicCreditCardType)(d).type=null;for(var g in f){if(f[g].test(n)){for(var m=0;m<d.paymentMethods.length;m++){if(!d.paymentMethods[m].cards||d.paymentMethods[m].cards.length<1){continue}for(var k=0;k<d.paymentMethods[m].cards.length;k++){if(d.paymentMethods[m].cards[k].type==g){a(e.dynamicCreditCardType)(d).type=d.paymentMethods[m].cards[k].type;a(e.dynamicCreditCardType)(d).hiddenNumber=n;if(a(e.dynamicCreditCardType)(d).maskedNumber){(b.$viewValue=a(e.dynamicCreditCardType)(d).maskedNumber);$(c).on("click.clearMaskedNumber",function(i){$(i.target).off("click.clearMaskedNumber");a(e.dynamicCreditCardType)(d).maskedNumber="";a(e.dynamicCreditCardType)(d).number=""})}b.$setValidity("pattern",true);b.$render()}}}}}(!a(e.dynamicCreditCardType)(d).type)&&(b.$setValidity("pattern",false))}})}}}]);angular.module("acead").directive("searchInfo",function(){return{restrict:"A",link:function(b,a){b.productModel&&b.productModel.searchInfo&&a.prepend(b.productModel.searchInfo)}}});angular.module("acead").directive("jumpTo",[function(){return{restrict:"A",link:function(d,c,a){var b,e;c.bind("click",function(f){e=f.target||f.srcElement;if(e.tagName=="A"&&e.href){f.preventDefault()}if(a.destElementSelector){!b&&(b=document.querySelector(a.destElementSelector));try{b.scrollIntoView(true)}catch(f){}}else{if(a.jumpToTop=="true"){window.scrollTo(0,0)}else{if(a.jumpToY){window.scrollTo(a.jumpToX||0,a.jumpToY)}}}})}}}]);angular.module("acead").directive("focusOnShow",[function(){return{restrict:"A",link:function(c,b,a){c.$watch(function(){return $(b).is(":visible")},function(d){d&&b[0].scrollIntoView()})}}}]);angular.module("acead").directive("productPrice",function(){return{restrict:"A",templateUrl:"/productprice.html",scope:{product:"=productPrice"},link:function(h,i,g){try{var j=JSON.parse(g.options)}catch(d){var j={}}var a=("standardPriceFirst" in j)&&j.standardPriceFirst?"standard_price_first":"standard_price_last",b=("showStandardPrice" in j)&&!j.showStandardPrice?false:true,c=("showLabel" in j)&&j.showLabel,f=("usePromoPrice" in j)&&j.usePromoPrice;i.addClass("pricing");b&&i.addClass(a);h.$watch("product.id",function(){var e=h.product;if(e){$(i).removeClass("sales_price standard_price range_sales_price range_standard_price is_custom_product");if(f&&e.pricing.promoPrice.available&&e.pricing.salesPrice.value!=e.pricing.promoPrice.value){e.pricing.standardPrice=e.pricing.salesPrice;e.pricing.salesPrice=e.pricing.promoPrice}e.pricing.isPromoPrice=(e.pricing.standardPrice.value==e.pricing.salesPrice.value)?false:true;e.custom.inCustomizer&&!e.pricing.isStandardPriceRange&&c&&i.addClass("is_custom_product");if(e.pricing.isPriceRange){i.addClass("range_sales_price");e.pricing.isStandardPriceRange&&b&&i.addClass("range_standard_price")}else{i.addClass("sales_price");e.pricing.isPromoPrice&&b&&i.addClass("standard_price")}}},true)}}});angular.module("acead").directive("productTotalPrice",function(){return{restrict:"A",templateUrl:"/producttotalprice.html",scope:{productModel:"=productTotalPrice"},link:function(c,a,f){try{var d=JSON.parse(f.options)}catch(g){var d={}}var b=("showStandardPrice" in d)&&!d.showStandardPrice?false:true;a.addClass("pricing_total");c.$watch("productModel",function(e){if(e){$(a).removeClass("adjusted_price list_price");a.addClass("adjusted_price");(b&&(e.adjustedPrice!=e.price))&&a.addClass("list_price")}},true)}}});angular.module("acead").directive("showFitGuide",["eventService","$dialog","httpWrapper",function(a,b,c){return{restrict:"A",link:function(g,e,d){window.Util.init(g);e.bind("click",function(h){h.preventDefault();f()});function f(h){g.$apply(function(){c.get(app.urls.fitGuide,{},{},function(j){var i=angular.element("<div>").append(j);app.utils.applyTemplateScripts(i);window.popup=b.dialog({width:"980px",height:"665px",modalClass:"modal modal_fitguide modal_fullscreen",controller:"FitGuideCtrl",template:j,resolve:{data:function(){return{modelSelectionCallback:h}}}});window.popup.open()})})}g.$on("showFitGuidePopup",function(h,i){f(i)})}}}]);angular.module("acead").directive("externalScript",["$document",function(a){return{restrict:"A",link:function(d,c,b){a.ready(function(){var f=b.src,g=document.createElement("script");g.setAttribute("src",f);var e=document.write;document.write=function(h){$(c).append(h)};c.append(g);setTimeout(function(){document.write=e},100)})}}}]);angular.module("acead").directive("showOlarkChat",function(){return{restrict:"A",link:function(b,a,c){a.bind("click",function(d){d.preventDefault();typeof olark!=="undefined"&&olark("api.box.expand")})}}});angular.module("acead").directive("trackingPixel",["$document",function(a){return{restrict:"A",link:function(d,c,b){a.ready(function(){if(app[b.trackingProvider]&&app[b.trackingProvider][b.pageName]){var e=d.$eval(b.trackingPixel)||{};app[b.trackingProvider][b.pageName].sendPixel(e)}})}}}]);(function(a){a.marintags={footer:{sendPixel:function(){setTimeout(function(){if(!window._mTrack){window._mTrack=[];_mTrack.push(["trackPage"]);a.utils.appendConversionScript("//tracker.marinsm.com/tracker/async/528mvc29110.js")}},700)}},confirmation:{sendPixel:function(){setTimeout(function(){var c=[],b=a.data.order;window._mTrack=[];for(var g=0;g<b.shipments.length;g++){var d=b.shipments[g];for(var e=0;e<d.items.length;e++){var f=d.items[e];c.push({orderId:b.orderNumber,convType:"sale_conversion",price:f.price.replace(a.preferences.currencySymbol,"")})}}_mTrack.push(["addTrans",{currency:"USD",items:c}]);_mTrack.push(["processOrders"]);a.utils.appendConversionScript("//tracker.marinsm.com/tracker/async/528mvc29110.js")},800)}}};a.adlucent={confirmation:{sendPixel:function(){var b=a.data.order,f=a.customer;window.orderData=[];window.retailer="timbuk2";window.orderChannel="adlucent";window.orderDetail="";window.orderKey=b.orderNumber,window.customerType=f.registered?"regular":"new";for(var g=0;g<b.shipments.length;g++){var c=b.shipments[g];for(var d=0;d<c.items.length;d++){var e=c.items[d];window.orderData.push([e.id,e.quantity,e.price.replace(a.preferences.currencySymbol,"")])}}a.utils.appendScript("https://tracking.deepsearch.adlucent.com/adl.js")}}};a.kenshoo={confirmation:{sendPixel:function(){a.utils.loadScript("https://144.xg4ken.com/media/getpx.php?cid=6c766b68-8f98-4500-bc45-04dca32e7a82",function(){var b=a.data.order;k_trackevent(["id=6c766b68-8f98-4500-bc45-04dca32e7a82","type=conv","val="+b.orderTotal.replace(a.preferences.currencySymbol,""),"orderId="+b.orderNumber,"valueCurrency=USD"],"144")})}}};a.facebook={confirmation:{sendPixel:function(b){window.fb_param={};window.fb_param.pixel_id="6013769924638";window.fb_param.value=b.value||"0.00";window.fb_param.currency="USD";a.utils.appendScript("//connect.facebook.net/en_US/fp.js")}}};a.facebookretargeting={footer:{sendPixel:function(){var b=window._fbq||(window._fbq=[]);a.utils.appendScript("//connect.facebook.net/en_US/fbds.js");b.push(["addPixelId","791950324158119"]);window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}])}}};a.googleadwords={confirmation:{sendPixel:function(){}}};a.googletrustedstores={checkoutaddresses:{sendPixel:function(){setTimeout(function(){var e=a.data.basket,g={ET:"checkout-addresses",value:e.totals.orderSubTotal,step:"A",Pcat:[],Pid:[],pagetype:"purchase",prodid:[]};for(var f=0;f<e.shipments.length;f++){var b=e.shipments[f];for(var c=0;c<b.items.length;c++){var d=b.items[c];g.Pid.push(d.id);g.Pcat.push(d.name);g.prodid.push(d.id)}}window.google_custom_params=g},200)}},checkoutmethods:{sendPixel:function(){setTimeout(function(){var e=a.data.basket,g={ET:"checkout-payment",value:e.totals.orderSubTotal,step:"B",Pcat:[],Pid:[],pagetype:"purchase",prodid:[]};for(var f=0;f<e.shipments.length;f++){var b=e.shipments[f];for(var c=0;c<b.items.length;c++){var d=b.items[c];g.Pid.push(d.id);g.Pcat.push(d.name);g.prodid.push(d.id)}}window.google_custom_params=g},200)}},confirmation:{sendPixel:function(){setTimeout(function(){var b=a.data.order,g={OrderID:b.orderNumber,ET:"checkout-billing",value:b.subTotal,step:"C",Pcat:[],Pid:[],pagetype:"purchase",prodid:[]};for(var f=0;f<b.shipments.length;f++){var c=b.shipments[f];for(var d=0;d<c.items.length;d++){var e=c.items[d];g.Pid.push(e.id);g.Pcat.push(e.name);g.prodid.push(e.id)}}window.google_custom_params=g},200)}},pdp:{sendPixel:function(){setTimeout(function(){var b=a.data.product;google_params={Pcat:b.name,Pid:b.id,pagetype:"product",prodid:b.id};window.google_custom_params=google_params},200)}},footer:{sendPixel:function(){setTimeout(function(){window.google_conversion_id=1070173386;window.google_remarketing_only=true;if(!window.google_custom_params){window.google_custom_params={}}a.utils.appendConversionScript("https://www.googleadservices.com/pagead/conversion.js")},500)}}};a.mediamind={footer:{sendPixel:function(){setTimeout(function(){var b=Math.random()+"";b=b*1000000;var c="https://bs.serving-sys.com/BurstingPipe/ActivityServer.bs?cn=as&ActivityID=347886&rnd="+b;a.utils.appendConversionScript(c)},400)}},confirmation:{sendPixel:function(){setTimeout(function(){var f=a.data.order;var e=f.subTotal;var g=f.orderNumber;var j="";var k="";var l=0;var i=Math.random()+"";i=i*1000000;for(var d=0;d<f.shipments.length;d++){var h=f.shipments[d];for(var c=0;c<h.items.length;c++){var m=h.items[c];l=l+m.quantity+",";k=k+m.name+",";j=j+m.id+","}}var b="https://bs.serving-sys.com/BurstingPipe/ActivityServer.bs?cn=as&amp;ActivityID=347885&amp;rnd="+i+"&amp;Value="+e+"&amp;OrderID="+g+"&amp;ProductID="+j+"&amp;ProductInfo="+k+"&amp;Quantity="+l;a.utils.appendConversionScript(b)},400)}}};a.affiliate={confirmation:{sendPixel:function(){var b=a.data.order,h="https://t.pepperjamnetwork.com/track",d=0;h=a.utils.updateURL(h,"PID","6955");h=a.utils.updateURL(h,"INT","ITEMIZED");for(var g=0;g<b.shipments.length;g++){var c=b.shipments[g];for(var e=0;e<c.items.length;e++){var f=c.items[e];d++;h=a.utils.updateURL(h,"ITEM"+d,f.id);h=a.utils.updateURL(h,"QTY"+d,f.quantity);h=a.utils.updateURL(h,"TOTALAMOUNT"+d,f.proratedPrice.replace(a.preferences.currencySymbol,""))}}h=a.utils.updateURL(h,"OID",b.orderNumber);a.utils.appendIframe(h)}}};a.floodlight={confirmation:{sendPixel:function(){var b=a.data.order,e="https://4446451.fls.doubleclick.net/activityi",d={src:"4446451",type:"Thank0",cat:"Thank0",qty:"1",cost:b.orderTotal.replace(a.preferences.currencySymbol,""),ord:b.orderNumber+"?"};for(var c in d){e=e+";"+c+"="+d[c]}a.utils.appendIframe(e)}}}})(window.app||(window.app={}));angular.module("acead").directive("centerMap",function(){return{restrict:"A",link:function(b,a){var c=a;c.attr("src",c.attr("src"))}}});angular.module("acead").directive("windowPrint",["$window","eventService",function(b,a){return{restrict:"A",scope:true,link:function(c,e,d){e.bind("click",function(f){f.preventDefault();a.trigger("printWindow");b.print()})}}}]);angular.module("acead").directive("mobileFlyout",["eventService",function(a){return{scope:true,restrict:"A",link:function(c,b,e){if(f(b,"[data-flyout-content]").length){$(b).delegate("[data-flyout-label]","click",d)}if(e.closeOn){a.bind(e.closeOn,function(){b.removeClass("flyout_content_active")})}function d(g){if(!$(this).closest("[data-mobile-flyout]").is(b)){return true}if(app.preferences.isMobile){g.preventDefault()}if(b.hasClass("flyout_content_active")){b.removeClass("flyout_content_active")}else{e.closeOtherFlyouts&&$(b).siblings().removeClass("flyout_content_active");b.addClass("flyout_content_active");if(e.closeOnClickOutside){setTimeout(function(){$(".main").on("click",function(h){if($(h.target).parents().is(b)){return false}h.preventDefault();b.removeClass("flyout_content_active");$(this).off(h)})},500)}}c.$broadcast("cusel-parent-show")}function f(g,h){g=$(g);return g.find(h).filter(function(){return $(this).closest("[data-mobile-flyout]").is(g)})}}}}]);angular.module("acead").directive("fixedToBottom",[function(){return{restrict:"A",scope:true,link:function(c,b,a){setTimeout(function(){var e=$(b),g=e.offset().top,f=$(window).height();d();$(window).scroll(function(){d()});function d(){if($(window).scrollTop()+f>g){e.removeClass("js_fixed_to_bottom")}else{e.addClass("js_fixed_to_bottom")}}},0)}}}]);angular.module("acead").directive("facebookShare",function(){return{restrict:"A",link:function(c,b,a){$(b).on("click",function(){window.open("http://www.facebook.com/sharer.php?p[title]="+a.ogTitle+"&p[url]="+a.ogUrl+"&p[images][0]="+a.ogImage,"sharer","toolbar=0,status=0,width=548,height=325")})}}});angular.module("acead").directive("smartZoom",["$timeout","eventService",function(b,a){return{restrict:"A",link:function(g,e,d){var f=g.$eval(d.config)||{},c={mouseEnabled:false,scrollEnabled:false,dblClickEnabled:false,mouseMoveEnabled:false,moveCursorEnabled:false,touchEnabled:true,dblTapEnabled:true,pinchEnabled:true,touchMoveEnabled:true};angular.extend(c,f);b(function(){$(e).smartZoom(c)},0);g.$watch(d.smartZoom,function(){var h={level:"global"};a.trigger("LoadingStart",h)});e.bind("load",function(){b(function(){$(e).smartZoom("destroy");$(e).smartZoom(c);var h={level:"global"};a.trigger("LoadingEnd",h)},0)});$(window).bind("resize",function(){e.triggerHandler("load")})}}}]);angular.module("acead").directive("hoverEffect",function(){return{restrict:"A",scope:true,replace:false,link:function(c,b,a){var d=a.hoverEffect||"hover";$(b).on("mouseenter",function(){$(this).addClass(d)}).on("mouseleave",function(){$(this).removeClass(d)})}}});angular.module("acead").filter("inchesToCm",function(){return function(a){return a*2.54}}).filter("cmToInches",function(){return function(a){return a/2.54}}).filter("kgToPounds",function(){return function(a){return a*2.20462}}).filter("litersToCuIn",function(){return function(a){return a*61.0237}}).filter("dateStrToObj",[function(){return function(a){return new Date(a)}}]);angular.module("acead").filter("tbLimit",function(){return function(a,b){return(a||[]).slice(0,b)}});angular.module("acead").service("googleAnalyticService",[function(){var a={pdp:{defaults:{category:"ProductPage"},change_quantity:{action:"Quantity"},add_to_cart:{action:"AddToCart"},add_to_wishlist:{action:"AddToWishList"},compare_products:{action:"Compare"},show_all_variants:{action:"AllColorsSizes"},change_gift_certificate_amount_radio:{action:"SelectGift"},change_gift_certificate_amount_textbox:{action:"SelectGift",label:"DefineValue"},change_gift_certificate_delivery_date:{action:"DeliverOn"},write_review:{action:"WriteReview"},select_variation:{},socialbuttons:{defaults:{action:"Share"},share_with_email:{label:"Email"},share_with_facebook:{label:"Facebook"},share_with_twitter:{label:"Twitter"},share_with_pinterest:{label:"Pinterest"}},activate_tab:{action:"Tab"},back_to_top:{action:"BackToTop",label:"Click"}},plp:{defaults:{category:"CategoryPage",action:"View",label:"Click"},apply_refinement:{action:"Other"},change_sorting_option:{action:"Sort By"},change_items_per_page:{action:"View",label:"Click"}},cart:{defaults:{category:"ShoppingCart"},continue_shopping:{action:"ContinueShopping",label:"Click"},cart_banner_click:{category:"ShoppingCartCrossSell",action:"CartBanner"},cross_sell_recommendations:{defaults:{category:"ShoppingCartCrossSell",label:"Click"},next:{action:"CarouselNext",value:"Click"},previous:{action:"CarouselPrevious",value:"Click"},click_item:{action:"ClickItem",}}},checkout:{defaults:{category:"CheckOut2014",action:"Click"},minisummary_product_click:{label:"OrderSummary"},edit_cart:{label:"EditCart"},"continue":{label:"Continue"},shipping_country_change:{label:"SelectCountry"},shipping_state_change:{label:"SelectState"},shipping_method_change:{label:"Edit Shipping Method"},submit_order:{label:"SubmitOrder"},apply_coupon:{label:"ApplyCoupon"},apply_credit:{label:"ApplyCredit"},back_to_address_step:{label:"Address"},add_gift_message:{label:"AddMessage"},continue_shopping:{label:"ContinueShopping"},print_receipt:{label:"PrintReceipt"},track_order:{label:"OrderTracking"}},account:{defaults:{category:"MyAccount",action:"Click"},sign_in:{label:"Sign In"},sign_out:{label:"Sign Out"},create_account:{label:"Create Account"},forgot_password:{label:"Forgot Password"},view_overview:{label:"Overview"},view_personal_info:{label:"Personal Info"},manage_personal_info:{label:"Manage Personal Info"},view_address_book:{label:"Address Book"},manage_address_book:{label:"Manage Address Book"},view_paymemt_settings:{label:"Payment Settings"},manage_payment_info:{label:"Manage Payment Info"},view_orders:{label:"Orders"},view_order_history:{label:"Order History"},view_returns:{label:"Returns"},view_wishlist:{label:"Wish List"},modify_wishlist:{label:"Modify Wish List"},manage_wishlist:{label:"Manage Wish List"},search_wishlist:{label:"Search Wish List"},view_privacy_policy:{label:"Privacy Policy"},view_secure_shopping:{label:"Secure Shopping"},wishlist:{edit:{defaults:{action:"EditWishList",value:"Click"},add_address:{label:"Add Address"},make_private:{label:"Make Private"},send_to_friend:{label:"Send to a Friend"},copy_url:{label:"Copy URL"},explain:{label:"Explain Wish List"},open_pdp:{label:"Product Name"},edit_product:{label:"Edit Product"},delete_product:{label:"Delete Product"},save_changes:{label:"Save Changes"},add_to_cart:{label:"Add to Cart"},select_priority:{label:"Select Priority"},change_item_access:{label:"Make this Item"}},search_wishlist:{action:"SearchWishList",label:"Click"},view_wishlist:{action:"SearchWishList",label:"ViewWishList"}},edit_profile:{defaults:{action:"EditPersonalInfo"},save:{label:"Save Personal"}}},home:{main_carousel:{defaults:{category:"CarouselWide",label:"Click"},show_left_item:{category:"CarouselWide",action:"left arrow"},show_right_item:{category:"CarouselWide",action:"right arrow"}}},header:{defaults:{category:"Header",action:"click"},open_device_fit_guide:{category:"HeaderOffer",action:"click",label:"#showLaptopGuide"},logo_click:{category:"Timbuk2 Logo"}},footer:{defaults:{category:"Footer",label:"click"},privacy_policy:{action:"Privacy Policy"},unsubscribe:{action:"Unsubscribe"},view_terms_of_use:{action:"TermsOfUse"},view_site_map:{action:"SiteMap"},about:{view_people:{action:"People"},view_product:{action:"Product"},view_environment:{action:"Environment"},view_manufacturing:{action:"Manufacturing"},view_retail_stores:{action:"RetailStores"}}},global:{breadcrumbs:{defaults:{category:"BreadCrumb",action:"Click"}},minicart:{defaults:{label:"varies"},checkout:{action:"Checkout"},remove_item:{action:"Remove"},update_item:{action:"UpdateCart"},view_details:{action:"Details"}},compare:{carousel:{defaults:{category:"ProductPage",label:"Click"},view_product:{action:"SimilarProducts"},show_prev_product:{action:"SimilarProductsPrev"},show_next_product:{action:"SimilarProductsNext"}}},form_element_blur:{label:"Click"},add_to_cart:{category:"AddToCart Tracking",action:"AddToCart"},add_to_wishlist:{category:"AddToWishList Tracking",action:"AddToWishList"}}};return{getConfig:function(){return a}}}]);angular.module("acead").factory("customizerService",["httpWrapper",function(a){return{executeCustomizerFeedJSONPRequest:function(c){var b;c=angular.extend({feedIndex:0,feedSize:4,cb:function(){}},c);b=app.urls.customizerFeedUrl.replace("{0}",c.feedSize).replace("{1}",c.feedIndex*c.feedSize);app.utils.jsonpRequest({url:b,cb:function(d){c.cb(d)}})},getCustomProductTabs:function(c,b){a.get(app.urls.customizerGetProductInfo,{pid:c},{},b)}}}]);angular.module("acead").factory("fitGuideService",["httpWrapper",function(a){return{getBrands:function(b){a.get(app.urls.brands,{},{},b)},createBrandsModel:function(c){var d=[];d=this.getTopBrands(c);for(var b=0;b<c.length;b++){var e=c[b];d.push({id:e[0],name:e[1],group:app.resources.fitGuide.allbrands})}return d},getTopBrands:function(g){var f,b=[];try{f=JSON.parse(app.preferences.fitGuide.topbrands)}catch(h){}if(f){b.push({id:"0",name:app.resources.fitGuide.selectbrand,group:""});for(var d=0;d<g.length;d++){var j=g[d];var c=j[1].toLowerCase();if($.inArray(c,f)>=0){b.push({id:j[0],name:j[1],group:app.resources.fitGuide.topbrands})}}b.sort(function(i,e){var n=i.name.toLowerCase();var m=e.name.toLowerCase();var l=$.inArray(n,f);var k=$.inArray(m,f);return l-k})}return b},getBrandById:function(c,d){if(!d){return null}for(var b=0;b<c.length;b++){if(c[b].id==d){return c[b];break}}return null},getBrandModels:function(c,b){a.get(app.utils.updateURL(app.urls.brands,"brand",c),{},{},b)},createModelsModel:function(e){var c=[];for(var d=0;d<e.length;d++){var b=e[d];c.push({brandId:b[0],name:b[1],width:b[2],height:b[3],depth:b[4]})}return c}}}]);angular.module("acead").controller("clpCtrl",["$scope","httpWrapper",function(b,c){b.resources=app.resources;b.preferences=app.preferences;b.urls=app.urls;b.searchCategory=app.data.searchCategory;b.subCategories=app.data.subCategories;a();function a(){var d={cgid:b.searchCategory.id,config:{types:[2],maxItemsCount:app.data.recommendationsMaxItemsCount}};c.get(app.urls.getRecommendations,d,{},function(e){b.recommendations=e.data.recommendations})}}]);angular.module("acead").controller("VariantsSelectionCtrl",["$scope","eventService",function(c,b){c.items=app.data.items;c.selectVariant=function(f,e){var g=f.color.id,d={};d[app.preferences.colorVariationAttributeID]=g;if(!f.color.selectable){d[app.preferences.sizeVariationAttributeID]=a(f.sizes)}e&&(d[app.preferences.sizeVariationAttributeID]=e.id);b.trigger("selectProductFromAllVariantsPopup",d);c.closeDialog()};function a(g){var e=app.preferences.sizesPriorityList.split(",");for(var d=0;d<e.length;d++){for(var f=0;f<g.length;f++){if(g[f].value==e[d]){return g[f].id}}}return g[0].id}}]);angular.module("acead").controller("CheckoutCtrl",["$scope","$dialog","$rootScope","$element","$timeout","eventService","basketService","billingService",function(k,c,i,l,d,b,e,m){k.basket=e.$basket;k.billingDetails=m.getBillingDetails();k.selectCountries=app.preferences.countriesWithStateSelectboxes;k.shipments=app.data.basket.shipments;k.shippingAddress={};k.empty=app.utils.empty;k.hasGCItems=g();k.hasOnlyGCItems=h();k.hasGiftCardItems=f();if(k.hasOnlyGCItems){k.useAsBillingAddress=false}angular.forEach(k.shipments,function(n){n.isGCShipment=!!n.giftCertificates});k.proceedCheckoutCallback={success:function(n){var o=n.data.suggestedAddresses;if(n.data.suggestedAddresses&&o.length>1){c.dialog({templateUrl:app.utils.updateURL(app.urls.showAddressVerificationDialog,"format","ajax"),width:"485px",height:"690px",controller:"AddressVerificationCtrl",modalClass:"modal modal_addersver modal_fullscreen",resolve:{addressVerificationData:function(){return{suggestedAddresses:o,currentAddress:i.shippingAddress,urls:n.urls}}}}).open()}else{location.href=n.urls.goToNextStep}},error:function(n){}};function f(){for(var o=0;o<k.shipments.length;o++){for(var n=0;n<k.shipments[o].items.length;n++){if(k.shipments[o].items[n].product.custom.isGiftCard){return true}}}return false}function g(){for(var o=0;o<k.shipments.length;o++){if(k.shipments[o].giftCertificates){return true}for(var n=0;n<k.shipments[o].items.length;n++){if(k.shipments[o].items[n].product.custom.isGiftCard){return true}}}return false}function h(){for(var n=0;n<k.shipments.length;n++){if(k.shipments[n].items.length>0){return false}}return true}b.bind("miniSummaryOrderSubmit",function(){$("form",l).submit();return});b.bind("readyToSend",function(n){k.readyToSend=n.readyToSend});k.orderSubmit=function(){k.formSubmit=true};var a=l.find("form")[0],j=angular.element(a).attr("name");d(function(){k.$watch(j+".$pristine",function(n){if(n==false){b.trigger("checkoutFormDirty",{});k.hideServerErrors=true}});k.$watch(j+".$valid",function(n){if(n&&(k.billingDetails.selectedPaymentMethod===app.preferences.paymentMethodType.PAYPAL)&&k.empty(k.billingDetails.paypalPM)){n=false}k.readyToSend=n;b.trigger("readyToSend",{readyToSend:n})})},0)}]);angular.module("acead").controller("CheckoutRegisterPopupCtrl",["$scope","eventService",function(b,a){b.registerCustomerCallBack={};b.registerCustomerCallBack.success=function(c){a.trigger("customerRegistered",c.customer);b.closeDialog()};b.registerCustomerCallBack.error=function(c){}}]);angular.module("acead").controller("AddressVerificationCtrl",["$scope","httpWrapper","dialog","addressVerificationData",function(b,h,e,g){b.suggestedAddresses=g.suggestedAddresses;b.currentAddress=g.currentAddress;for(var d=0;d<b.suggestedAddresses.length;d++){if(b.suggestedAddresses[d].postalCodeMin==b.suggestedAddresses[d].postalCodeMax){b.suggestedAddresses[d].postalCode=b.suggestedAddresses[d].postalCodeMin}else{b.suggestedAddresses[d].postalCode=a(b.suggestedAddresses[d].postalCodeMin,b.suggestedAddresses[d].postalCodeMax)}}b.selectAction=function(k){b.selectedAction=k;for(var j=0;j<b.suggestedAddresses.length;j++){b.suggestedAddresses[j].selected=false}if(b.suggestedAddresses[b.selectedAction]){b.suggestedAddresses[b.selectedAction].selected=true;b.selectedAddress=b.suggestedAddresses[b.selectedAction]}};b.continueCheckout=function(){switch(b.selectedAction){case 0:case 1:case 2:correctAddress();break;case"goToNextStep":goToNextStep();break;case"backToAddresses":backToAddresses();break;default:correctAddress()}};correctAddress=function(){if(b.selectedAddress){c()}else{f()}if(!b.addressVerificationForm.$valid){return false}var i={postalCode:b.selectedAddress.postalCode,city:b.selectedAddress.city,stateCode:b.selectedAddress.stateCode};h.post(g.urls.correctAddress,{},{correctedAddress:JSON.stringify(i)},function(j){if(j.status!="ERROR"){e.close();location.href=g.urls.goToNextStep}})};backToAddresses=function(){e.close()};goToNextStep=function(){location.href=g.urls.goToNextStep};function a(l,j){var m=l.split(""),k=j.split(""),n=0;while(m[n]==k[n]&&n<l.length){n++}return l.substring(0,n)}function c(){if(b.selectedAddress.postalCode>b.selectedAddress.postalCodeMax||b.selectedAddress.postalCode<b.selectedAddress.postalCodeMin){b.addressVerificationForm.postalCode.$setValidity("value",false)}else{b.addressVerificationForm.postalCode.$setValidity("value",true)}}function f(){if(!b.selectedAction){b.addressVerificationForm.selectedAction.$setValidity("value",false)}else{b.addressVerificationForm.selectedAction.$setValidity("value",true)}}if(e.updateHeight){b.$watch(function(){return e.wrapper[0].offsetHeight},function(i,j){if(i!=0&&i!=j){e.updateHeight()}})}}]);angular.module("acead").controller("FindStoreController",["$scope","$element",function(b,a){b.findStore=function(){var c=angular.element(a.find("form")[0]);if(b[c.attr("name")].$invalid){return false}location.href=app.utils.updateURL(app.urls.showStoreLocator,"searchQuery",b.searchQuery)};b.showStoreLocator=function(){if(!app.preferences.isTouchDevice){location.href=app.urls.showStoreLocator}}}]);angular.module("acead").controller("CheckOrderCtrl",["$scope","httpWrapper","eventService",function(b,c,a){b.showForm=true;b.urls={orderDetails:app.urls.orderDetails};b.customer=app.customer;b.$watch("customer.authenticated",function(d){if(d){c.get(app.urls.getLatestOrders,{},{},function(e){if(e&&e.ordersModel){b.orders=e.ordersModel.orders}})}});b.checkOrderCallback={success:function(d){if(d.orderNotFoundMsg){b.orderNotFoundMsg=d.orderNotFoundMsg}else{if(d.orderModel){b.order=d.orderModel;b.orderNotFoundMsg="";b.showForm=false}}}};b.checkAnotherOrder=function(){b.showForm=true};a.bind("customerLogged",function(d){b.customer=app.customer})}]);angular.module("acead").controller("TrackOrderCtrl",["$scope","httpWrapper","eventService","loginService",function(c,d,a,b){c.failedServices=app.data.failedServices;c.customer=app.customer;c.isOrderStatusServiceFault=!app.utils.empty(c.failedServices)&&(app.preferences.services.ORDER_STATUS in c.failedServices);c.isOrderStatusServiceFault&&(c.orderStatusServiceFaultMsg=c.failedServices[app.preferences.services.ORDER_STATUS]);a.bind("customerLogged",function(e){c.customer=app.customer});c.showPopUpLoginForm=function(f){if(!app.preferences.isMobile){f.preventDefault();b.showPopUpLoginForm({options:{modalClass:"modal modal_compressed",height:"450px",width:"485px"},addData:{action:"login"}})}}}]);angular.module("acead").controller("StandardReturnSummaryCtrl",["$scope",function(a){a.returnItems=app.data.returnItems;a.orderNumber=app.data.orderNumber;a.returnCreatedDate=app.data.returnCreatedDate;a.returnAddress=app.data.returnAddress;a.urls={noImageSmall:app.urls.noImageSmall}}]);angular.module("acead").controller("WarrantyReturnCtrl",["$scope","$element","eventService",function(c,b,a){try{c.selectCountries=JSON.parse(app.preferences.countriesWithStateSlectboxes)}catch(d){}c.address={};c.countries=app.data.countries||[];c.states=app.data.states;c.address.addressCountryCode="US";c.showStateInput=false;c.wasFormSubmitted=false;c.failedServices=app.data.failedServices;c.isWarrantyReturnServiceFault=!app.utils.empty(c.failedServices)&&(app.preferences.services.WARRANTY_RETURN in c.failedServices);c.isWarrantyReturnServiceFault&&(c.warrantyReturnServiceFaultMsg=c.failedServices[app.preferences.services.WARRANTY_RETURN]);c.$watch("address.stateCode",function(g){var e=[];if(c.states){for(var f=0;f<c.states.length;f++){if(c.states[f].country==c.address.addressCountryCode){e.push(c.states[f])}}if(g&&e[g]){c.address.stateCode=e[g].value}}});c.$watch("address.addressCountryCode",function(e){if(c.selectCountries&&c.selectCountries.indexOf(e)==-1){c.regionLabel=c.countries[0].labels.state;c.zipLabel=c.countries[0].labels.zip;c.showStateInput=true;return}c.showStateInput=false;c.address.stateCode="";for(var f=0;f<c.countries.length;f++){if(c.countries[f].value==c.address.addressCountryCode){c.regionLabel=c.countries[f].labels.state;c.zipLabel=c.countries[f].labels.zip;break}}});c.submitForm=function(){c.wasFormSubmitted=true}}]);angular.module("acead").controller("StandardReturnCtrl",["$scope","$element",function(b,a){var f=[],d=a.find("form")[0],c=angular.element(d).attr("name");b.failedServices=app.data.failedServices;b.isStandardReturnServiceFault=!app.utils.empty(b.failedServices)&&(app.preferences.services.STANDARD_RETURN in b.failedServices);b.isStandardReturnServiceFault&&(b.standardReturnServiceFaultMsg=b.failedServices[app.preferences.services.STANDARD_RETURN]);$(a).find('input[type="checkbox"]').on("change",function(g){if(b.$$phase=="$apply"||b.$$phase=="$digest"){b.emptySelectedItems=false}else{b.$apply(function(){b.emptySelectedItems=false})}});b.beforeFormSubmit=function(o){var g=[],n=angular.element(d).find("tr");for(var k=0;k<d.elements.length;k++){if(d.elements[k].type=="checkbox"&&d.elements[k].checked){g.push(angular.element(d.elements[k]).attr("data-item-id"))}}for(var k=0;k<n.length;k++){var l=angular.element(n[k]),m=l.find("textarea"),p=l.find("select");flag=(g.indexOf(l.attr("name"))!="-1")?false:true;for(var h=0;h<m.length;h++){var q=angular.element(m[h]);e(q,flag)}for(var h=0;h<p.length;h++){var q=angular.element(p[h]);e(q,flag)}}if(g.length==0){b.$apply(function(){b.emptySelectedItems=true});return false}if(b[c].$invalid){return false}};function e(g,h){if(!b[c][g.attr("data-ng-model")].$modelValue){b.$apply(function(){g.removeClass("ng-pristine").addClass("ng-dirty").addClass("has-visited");b[c][g.attr("data-ng-model")].$setValidity("required",h);b[c][g.attr("data-ng-model")].$pristine=false;b[c][g.attr("data-ng-model")].$dirty=true;b[c][g.attr("data-ng-model")].hasVisited=true})}}}]).controller("StandardReturnItemCtrl",["$scope",function(a){a.data={}}]).directive("customRequiredValidation",["$parse",function(a){return{restrict:"A",require:"ngModel",scope:true,link:function(e,d,c,b){b.$parsers.unshift(function(f){(b.$error.required&&f&&b.$setValidity("required",true));return f});b.$formatters.unshift(function(f){(b.$error.required&&f&&b.$setValidity("required",true));return f})}}}]);angular.module("acead").controller("DatepickerCtrl",["$scope","$timeout",function(a,b){var c=new Date();c.setDate(c.getDate()+90);a.dateFormat="MM/dd/yyyy";a.minDate=new Date();a.maxDate=c}]);angular.module("acead").controller("customizerFeedCtrl",["$scope","$timeout","eventService","customizerService","httpWrapper",function(k,c,b,g,e){var f=app.urls.customizerFeedUrl,j=0,i=app.preferences.customizerFeedSize,l;h();cbStaticData={detailsUrl:app.urls.customBagDetailsUrl,imageUrl:app.urls.customBagImageUrl,label:app.resources.customBagLabel};k.urls={customizerInspirationListingPageURL:app.urls.customizerInspirationListingPageURL};k.getNextCustomBagsFeed=function(){j+=1;h()};k.getPreviousCustomBagsFeed=function(){if(j>0){j-=1;h()}};k.refreshCustomBagsFeed=function(){j=0;h()};function h(){g.executeCustomizerFeedJSONPRequest({feedIndex:j,feedSize:i,cb:d})}function d(m){if(!angular.isObject(m)||!angular.isArray(m.bags)){return false}c(function(){k.$apply(function(){k.customBags=[];angular.forEach(m.bags,function(n){k.customBags.push({title:n.type,label:cbStaticData.label.replace("{0}",n.type),createdTime:a(n.created_at),imageUrl:cbStaticData.imageUrl.replace("{0}",n.id),detailsUrl:cbStaticData.detailsUrl.replace("{0}",n.id)})})})},0)}function a(r){var v=app.resources.elapsedTime,w,s,u,n,t,m=1000,p=m*60,o=p*60,q=o*24;w=new Date().getTime()-new Date(r).getTime();s=Math.floor(w/q);if(s>0){return s===1?v.day:v.days.replace("{0}",s)}u=Math.floor(w/o);if(u>0){return u===1?v.hour:v.hours.replace("{0}",u)}n=Math.floor(w/p);if(n>0){return n===1?v.minute:v.minutes.replace("{0}",n)}n=Math.floor(w/m);if(t>0){return t===1?v.second:v.seconds.replace("{0}",t)}return v.recently}}]);angular.module("acead").controller("customizerCtrl",["$scope","$rootScope","eventService","basketService","productService","httpWrapper",function(d,a,c,e,b,f){a.showFullHeader=new Boolean(true);app.data.currentPage="customizer";var g="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no";window.setInterval(function(){var h=document.getElementById("viewport");if(h&&h.getAttribute("content")!=g){h.setAttribute("content",g)}var j=$(".pr-pagination-bottom .pr-page-next a");var k=/location.hash=.+?;/g;if(j[0]){var i=j[0].outerHTML;if(i.match(k)){i=i.replace(k,"");j.replaceWith(i)}}},1000);app.customizer.init(c,d);c.bind("PC_showProductInfo",function(h){d.$apply(function(){a.showFullHeader=new Boolean(false)})});c.bind("PC_removeProductInfo",function(h){d.$apply(function(){a.showFullHeader=new Boolean(true)})});c.bind("PC_addProduct",function(i){var h=i.params.cbid?app.urls.addCustomProduct:app.urls.addProduct,j=i.callback;f.post(h,i.params,{},function(){window.location=app.urls.cartShow})});c.bind("PC_updateRatings",function(h){if(!(h&&h.params&&h.params.pid&&angular.isFunction(h.callback))){return}b.getProductRatings(h.params.pid,function(j){var i=(j&&j.ratings)?j.ratings:null;if(!i){return}h.callback({starRating:i.averageValue,ratingBase:i.rangeValue,ratingCount:i.reviewsCount})})});c.bind("PC_shareEmail",function(i){var h=app.urls.shareByEmail,j=(i.callback&&typeof(i.callback)=="function")?i.callback:function(){};f.post(h,i.params,{},j)})}]);angular.module("acead").controller("customizerSlotsCtrl",["$scope","eventService",function(c,b){a();$(window).on("hashchange",function(){c.$apply(a)});function a(){var d=location.hash;if(/product|bag/.test(d)){c.showCustomizerPDPSlot=true;c.showCustomizerPLPSlot=c.showCustomizerInspirationPLPSlot=false}else{c.showCustomizerInspirationPLPSlot=(d.indexOf("inspiration")>=0);c.showCustomizerPLPSlot=!c.showCustomizerInspirationPLPSlot;c.showCustomizerPDPSlot=false}}}]);angular.module("acead").controller("SignUpCtrl",["$scope","$dialog","$element",function(d,g,b){var a=$(".signup_form input[type=text]"),f=b.find("form")[0],e=angular.element(f).attr("name");a.on("keydown",function(h){if(h.which===13){this.blur()}});d.submitSignUpForm=function(k){d.footerSignupSubscriberEmail="";if(k&&k.status&&k.status=="success"){for(var h=0,j=a.length;h<j;h++){$(a[h]).removeClass("has-visited");d[e][a[h].name].$pristine=true;d[e][a[h].name].hasVisited=false}g.dialog({templateUrl:app.urls.signupAdditionalDataDialog,width:"478px",height:"742px",modalClass:"modal modal_signup modal_fullscreen"}).open()}};d.showUnsubscribeDialog=function(){g.dialog({templateUrl:app.urls.unsubscribeDialog,width:"478px",height:"371px",modalClass:"modal modal_unsubscribe modal_fullscreen"}).open()};var c=app.utils.getHttpParameterMap(window.location.href);if("showUnsubscribeDialog" in c&&c.showUnsubscribeDialog==="true"){d.showUnsubscribeDialog()}}]).controller("AdditionalSignUpCtrl",["$scope","$dialog",function(a,b){a.submitAdditionalSignUpForm=function(c){if(c&&c.status&&c.status=="success"){a.closeDialog();b.dialog({templateUrl:app.urls.signupAdditionalDataSuccessDialog,width:"478px",height:"604px",modalClass:"modal modal_signup_success modal_fullscreen"}).open()}}}]).controller("UnsubscribeCtrl",["$scope","$dialog",function(a,b){a.submitUnsubscribeForm=function(c){if(c&&c.status&&c.status=="success"){a.closeDialog();b.dialog({templateUrl:app.urls.unsubscribeSuccessDialog,width:"478px",height:"279px",modalClass:"modal modal_unsubscribe_success modal_fullscreen"}).open()}}}]);angular.module("acead").controller("RefinementCtrl",["$scope","eventService",function(b,a){b.limits={current:app.resources.refinementLimits.limit,labelMoreLess:app.resources.refinementLimits.showMore,valuesLength:b.refinement.values.length,showLabel:b.refinement.values.length>app.resources.refinementLimits.limit,showMoreLabel:true,toggleLimit:function(){a.trigger("showMoreLessClick",b.limits.labelMoreLess);if(this.current==b.refinement.values.length){this.current=app.resources.refinementLimits.limit;this.labelMoreLess=app.resources.refinementLimits.showMore;this.showMoreLabel=true}else{this.current=b.refinement.values.length;this.labelMoreLess=app.resources.refinementLimits.showLess;this.showMoreLabel=false}}}}]);angular.module("acead").controller("FilterMobileCtrl",["$scope","$element",function(b,a){b.$watch("$parent.data.plp.refinements",function(c,d){if(!c){if(!app.data.productHits&&!app.data.content&&app.data.query){c=app.data.refinements=[]}else{return}}if(b.$parent.data.plp.query&&(!c.length||c[0].id!=="query")){c.unshift({name:app.resources.queryRefinementLabel,id:"query",selected:[app.resources.queryRefinementLabel],values:[{value:app.resources.queryRefinementLabel,name:app.resources.queryRefinementLabel,hits:true,url:app.urls.search+"?"+app.utils.getUrlHashMgr().deleteParam("q")}]})}c.forEach(function(e){e.selected=e.selected.filter(function(f){return e.values.some(function(g){return g.value==f})});e.selectedNames=e.selected.map(function(g){for(var f=0;f<e.values.length;f++){if(e.values[f].value==g){return e.values[f].name||e.values[f].value}}})})});b.activeRefinement=null;b.showRefinement=function(c){b.activeRefinement=c};b.hideRefinements=function(c){b.activeRefinement=null;if(c){$(a).find(".cancel_filter_btn").trigger("click")}}}]);angular.module("acead").controller("DisabledCookiesCtrl",["$scope","$cookies",function(a,b){a.areCookiesDisabled=app.utils.empty(b)}]);angular.module("acead").controller("SponsorshipCtrl",["$scope","$element","$timeout",function(b,a,d){b.sponsorship={};b.sponsorship.eventDate=new Date();b.projectSeekingOtherChecked=false;b.promotionResourcesOtherChecked=false;b.nonProfitErrorChecked=false;var e=a.find("form")[0],c=angular.element(e).attr("name"),f=Util.isIE8();b.validateForm=function(){var g=false;if(b.projectSeekingOtherChecked&&!b[c][b.projectSeekingOtherInput].$modelValue){b[c][b.projectSeekingOtherInput].$setValidity("value",false);g=true}if(b.promotionResourcesOtherChecked&&!b[c][b.promotionResourcesOtherInput].$modelValue){b[c][b.promotionResourcesOtherInput].$setValidity("value",false);g=true}if(b[c][b.nonProfit].$viewValue=="false"){g=true;if(b.$root.$$phase=="$apply"){b.nonProfitError=true}else{b.$apply(function(){b.nonProfitError=true})}}if(!b.sponsorship.eventDate||(new Date(b.sponsorship.eventDate).getTime()<new Date().setHours(0,0,0,0))){b[c][b.eventDateField].$setValidity("value",false);if(b.$root.$$phase=="$apply"){b.dateError=true}else{b.$apply(function(){b.dateError=true})}g=true}if(g){return false}};d(function(){b.$watch(c+"."+b.projectSeekingOther+".$viewValue",function(g){b.projectSeekingOtherChecked=g;b[c][b.projectSeekingOtherInput].$setValidity("value",true)});b.$watch(c+"."+b.projectSeekingOtherInput+".$modelValue",function(g){if(g.length>0){b[c][b.projectSeekingOtherInput].$setValidity("value",true)}});b.$watch(c+"."+b.promotionResourcesOther+".$viewValue",function(g){b.promotionResourcesOtherChecked=g;b[c][b.promotionResourcesOtherInput].$setValidity("value",true)});b.$watch(c+"."+b.promotionResourcesOtherInput+".$modelValue",function(g){if(g.length>0){b[c][b.promotionResourcesOtherInput].$setValidity("value",true)}});b.$watch(c+"."+b.nonProfit+".$viewValue",function(g){if(b[c][b.nonProfit].$viewValue=="true"||f){b.nonProfitError=false}});b.$watch(c+"."+b.eventDateField+".$viewValue",function(g){if((g)){b[c][b.eventDateField].$setValidity("value",true);b.dateError=false}})},0)}]);angular.module("acead").controller("FitGuideCtrl",["$scope","fitGuideService","eventService","filterFilter","dialog","data",function(w,r,c,f,z,F){var t=Util.isIE8(),u=null,s=null,A=new LaptopGuide(),p=null,j=500,B=100,n=0,a=0,b=10,E=LaptopGuide.getSelectedModel(),o=(E)?E.brandId:"";w.fitGuide={brands:[],models:[],filteredModels:[],currentPageModels:[],modelPages:[],selectedModelPage:"",selectedPageIndex:"",pageSize:b,selectedBrand:"",modelNameInput:"",showMainForm:true,};m();r.getBrands(function(G){if(G&&G.brands){w.fitGuide.brands=r.createBrandsModel(G.brands);w.fitGuide.selectedBrand=(o)?r.getBrandById(w.fitGuide.brands,o):w.fitGuide.brands[0]}});if(E){r.getBrandModels(E.brandId,function(G){C(G)})}w.changeBrandModel=function(){w.changeBrand()};w.changeBrand=function(){c.trigger("fitGuideBrandChanged",w.fitGuide.selectedBrand.name);if(w.fitGuide.selectedBrand.id=="0"){w.clearSelections();return}r.getBrandModels(w.fitGuide.selectedBrand.id,function(G){C(G);w.changeModelName()})};function C(G){if(G&&G.models){w.fitGuide.models=r.createModelsModel(G.models);w.fitGuide.filteredModels=w.fitGuide.models;w.fitGuide.pageSize=(app.preferences.isMobile&&app.preferences.pageIsResponsive)?b:w.fitGuide.filteredModels.length;k();w.fitGuide.currentPageModels=l(w.fitGuide.selectedModelPage.start);if(E!=null&&w.fitGuide.selectedBrand&&(E.brandId!=w.fitGuide.selectedBrand.id)){A.removeCookie()}n=0;a=(w.fitGuide.filteredModels.length>j&&t)?j:w.fitGuide.filteredModels.length;y();!(app.preferences.isMobile&&app.preferences.pageIsResponsive)&&(p.scrollToElement($("#row_0")))}}w.changeModelName=function(){w.fitGuide.filteredModels=f(w.fitGuide.models,function(K){var I=K.name+" "+K.width+" "+K.depth+K.height+K.depth,J=w.fitGuide.modelNameInput,M=J.split(" "),H="^";for(var G=0;G<M.length;G++){var L=M[G].trim();H+="(?=.*?"+L+")"}H+=".*$";return(new RegExp(H,"i").test(I))});w.fitGuide.pageSize=(app.preferences.isMobile&&app.preferences.pageIsResponsive)?b:w.fitGuide.filteredModels.length;k();w.fitGuide.currentPageModels=l(w.fitGuide.selectedModelPage?w.fitGuide.selectedModelPage.start:0);n=0;a=(w.fitGuide.currentPageModels.length>j&&t)?j:w.fitGuide.currentPageModels.length;y();!(app.preferences.isMobile&&app.preferences.pageIsResponsive)&&(p.scrollToElement($("#row_0")))};w.clearSelections=function(){A.removeCookie();w.fitGuide.modelNameInput="";x();w.fitGuide.selectedBrand=w.fitGuide.brands[0];v();e()};w.clearHandSelections=function(){w.fitGuide.deviceWidth="";w.fitGuide.deviceHeight="";w.fitGuide.deviceDepth=""};w.submitHandDimentions=function(){q({brandId:"0",name:app.resources.fitGuide.selfMeasuredDevice,width:w.fitGuide.deviceWidth,height:w.fitGuide.deviceHeight,depth:w.fitGuide.deviceDepth})};w.closeDialog=function(G){z.close()};function D(G){modelId=$(this).data("model-id");if(!w.fitGuide.filteredModels[modelId]){return}c.trigger("fitGuideModelSelected",w.fitGuide.filteredModels[modelId].name);q(w.fitGuide.filteredModels[modelId])}function q(G){model=new LaptopModel(G.brandId,G.name,G.depth,G.width,G.height);A.addCookie(model);w.closeDialog();if(F&&F.modelSelectionCallback){F.modelSelectionCallback();return}if(window.Customizer&&window.Customizer.T2Shim&&window.Customizer.T2Shim.selectedLaptopChanged){window.Customizer.T2Shim.selectedLaptopChanged();return}if(["PDP"].indexOf(app.data.currentPage)>-1){Util.refreshCurrentPage()}else{if(["quickview"].indexOf(app.data.currentPage)>-1){location.href=app.utils.removeURLParameter(app.utils.removeURLParameter(app.data.product.url,"format"),"source")}else{Util.showSearchResults()}}}function y(){(app.preferences.isMobile&&app.preferences.pageIsResponsive)?rows=h():rows=d();u.html(rows.join(""));v();(w.fitGuide.filteredModels.length==0)&&e()}function h(){var I=null,M,H,G,K,L=[];a=(a>w.fitGuide.currentPageModels.length)?w.fitGuide.currentPageModels.length:a;if(!w.fitGuide.currentPageModels.length){tdName='<td class="dataTables_empty">'+app.resources.fitGuide.couldntFindDeviceMsg+"</td>";L[0]='<tr id="row_0">'+tdName+"</tr>";e()}else{for(var J=n;J<a;J++){I=w.fitGuide.currentPageModels[J];M='<td class="model_name">'+I.name+"</td>";G='<td class="model_width">'+I.width+"</td>";H='<td class="model_height">'+I.height+"</td>";K='<td class="model_depth">'+I.depth+"</td>";L[J]='<tr id="row_'+J+'"data-model-id="'+J+'"><td>'+M+G+H+K+"</td></tr>"}}return L}function d(){var I=null,G,K,M,H,L=[];a=(a>w.fitGuide.filteredModels.length)?w.fitGuide.filteredModels.length:a;if(!w.fitGuide.filteredModels.length){G='<td class="dataTables_empty" colspan="4">'+app.resources.fitGuide.couldntFindDeviceMsg+"</td>";L[0]='<tr id="row_0">'+G+"</tr>";e()}else{for(var J=n;J<a;J++){I=w.fitGuide.filteredModels[J];G='<td class="model_name">'+I.name+"</td>";M='<td class="model_width">'+I.width+"</td>";K='<td class="model_height">'+I.height+"</td>";H='<td class="model_depth">'+I.depth+"</td>";L[J]='<tr id="row_'+J+'"data-model-id="'+J+'">'+G+M+K+H+"</tr>"}}return L}function x(){w.fitGuide.filteredModels=[];w.fitGuide.models=[];w.fitGuide.currentPageModels=[];w.fitGuide.modelPages=[];w.fitGuide.selectedModelPage="";y()}function v(){!(app.preferences.isMobile&&app.preferences.pageIsResponsive)&&(setTimeout(function(){p.reinitialise()},500))}function i(I,H,J,G){if(G&&a<w.fitGuide.filteredModels.length){n+=B;a+=B;if(a>w.fitGuide.filteredModels.length){a=w.fitGuide.filteredModels.length}if(n>w.fitGuide.filteredModels.length){n=w.fitGuide.filteredModels.length}y();p.scrollToElement($("#row_"+(a-B)))}if(J&&n>0){n-=B;a-=B;if(n<0){n=0}if(a<0){a=0}y();p.scrollToElement($("#row_"+(n+B)))}}function m(){setTimeout(function(){u=$(".js_brand_models");s=$(".js_modelswrapper");u.delegate("tr","click",D);y();e();if(t){s.bind("jsp-scroll-y",i)}!(app.preferences.isMobile&&app.preferences.pageIsResponsive)&&(p=s.jScrollPane({scrollbarWidth:5,verticalDragMinHeight:40,mouseWheelSpeed:10,contentWidth:660}).data("jsp"))},0)}function e(){$(".js_handEnterLink").on("click",function(){w.fitGuide.showMainForm=false})}function k(){var G=Math.ceil(w.fitGuide.filteredModels.length/w.fitGuide.pageSize);w.fitGuide.modelPages=[];for(var H=0;H<G;H++){w.fitGuide.modelPages.push({id:H,start:H*w.fitGuide.pageSize,name:app.resources.fitGuide.pageName.replace("{0}",(H+1)),isLast:(H+1==G)?true:false,isFirst:(H==0)?true:false,})}w.fitGuide.selectedModelPage=w.fitGuide.modelPages[0]}w.changePage=function(){w.fitGuide.currentPageModels=l(w.fitGuide.selectedModelPage.start);n=0;a=(w.fitGuide.currentPageModels.length>j&&t)?j:w.fitGuide.currentPageModels.length;y()};w.selectPrevPage=function(){w.fitGuide.selectedModelPage=g(w.fitGuide.selectedModelPage.id-1);w.fitGuide.currentPageModels=l(w.fitGuide.selectedModelPage.start);n=0;a=(w.fitGuide.currentPageModels.length>j&&t)?j:w.fitGuide.currentPageModels.length;y()};w.selectNextPage=function(){w.fitGuide.selectedModelPage=g(w.fitGuide.selectedModelPage.id+1);w.fitGuide.currentPageModels=l(w.fitGuide.selectedModelPage.start);n=0;a=(w.fitGuide.currentPageModels.length>j&&t)?j:w.fitGuide.currentPageModels.length;y()};function g(H){for(var G=0;G<w.fitGuide.modelPages.length;G++){if(w.fitGuide.modelPages[G].id==H){return w.fitGuide.modelPages[G]}}return w.fitGuide.modelPages[0]}function l(I){var J=parseInt(I),H=parseInt(I+w.fitGuide.pageSize),G=[];(H>w.fitGuide.filteredModels.length)?H=w.fitGuide.filteredModels.length:H;for(;J<H;J++){G.push(w.fitGuide.filteredModels[J])}return G}}]);angular.module("acead").controller("StaticStoreContent",["$scope","$element",function(b,a){var c=a.find("iframe")[0];c.src=c.src}]);angular.module("acead").controller("ContactUsCtrl",["$scope",function(a){a.submitted=false;a.formSubmit=function(){a.submitted=true}}]);angular.module("acead").controller("CorporateEmailCtrl",["$scope","$element","$timeout",function(d,c,e){var b=c.find("form")[0],a=angular.element(b).attr("name");d.wasFormSubmitted=false;d.formSubmit=function(){d.wasFormSubmitted=true};d.validateCorpEmailForm=function(){var f=false;if(d.embroideryValue=="null"){d.$apply(function(){d[a][d.embroideryField].$setValidity("value",false)});f=true}if(d.workedWithUsValue=="null"){d.$apply(function(){d[a][d.workedWithUsField].$setValidity("value",false)});f=true}if(d.purposeValue=="null"){d.$apply(function(){d[a][d.purposeField].$setValidity("value",false)});f=true}else{if(d.purposeValue=="Resale"&&app.utils.empty(d.asiNumberValue)){d.$apply(function(){d[a][d.asiNumberField].$setValidity("value",false)});f=true}}if(f){return false}};e(function(){d.$watch(a+"."+d.embroideryField+".$modelValue",function(f){if(f.length>0){d[a][d.embroideryField].$setValidity("value",true)}});d.$watch(a+"."+d.workedWithUsField+".$modelValue",function(f){if(f.length>0){d[a][d.workedWithUsField].$setValidity("value",true)}});d.$watch(a+"."+d.asiNumberField+".$modelValue",function(f){if(f.length>0){d[a][d.asiNumberField].$setValidity("value",true)}});d.$watch(a+"."+d.purposeField+".$modelValue",function(f){if(f.length>0){d[a][d.purposeField].$setValidity("value",true)}if(d.purposeValue!="Resale"){d[a][d.asiNumberField].$setValidity("value",true)}})},0)}]);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(b){b.fn.track=function(c){return this.each(function(){var h=b(this);if(h.hasClass("tracked")){return true}else{h.addClass("tracked")}var f=b.extend({},b.fn.track.defaults,c);var e=d(h,f.category);var g=d(h,f.action);var k=d(h,f.label);var l=d(h,f.value);var i=d(h,f.event_name);var j=d(h,f.noninteraction);var m="category:'"+e+"' action:'"+g+"' label:'"+k+"' value:'"+l+"' noninteraction:'"+j+"'";a("Tracking "+i+" "+m);h.bind(i+".track",function(){_gaq.push(["_trackEvent",e,g,k,l,j]);return true})});function d(f,e){if(typeof e=="function"){e=e(f)}return e}};function a(c){if(typeof console!="undefined"&&typeof console.debug!="undefined"&&b.fn.track.defaults.debug){console.debug(c)}}b.fn.track.defaults={category:function(c){return(c[0].hostname==location.hostname)?"internal":"external"},action:"action",label:"click",value:null,event_name:"click",noninteraction:false,debug:false}})(jQuery);var __lg_debug=false;var __lg_enabled=true;function Util(){}Util.callback=null;Util.config={urls:{shop:"/tb2/shop",product:"/tb2/products",custom:"/tb2/custom"},params:{size:"size"}};Util.getSizeName=function(a){if(a==0){return"XXS"}if(a==1){return"XS"}if(a==2){return"S"}if(a==3){return"OS"}if(a==4){return"M"}if(a==6){return"L"}if(a==7){return"XL"}if(a==8){return"XXL"}return""};Util.showPopup=function(a){$.colorbox({transition:"none",speed:0,opacity:0.9,width:"803px",innerHeight:"547px",iframe:true,href:"/static/laptopguide.html",scrolling:false,fixed:true,arrowKey:false,loop:false,top:"70px",onComplete:function(){window.laptopGuidePopupCallback=a;var b=new LaptopGuidePopup();$("#cboxClose").track({category:b.CATEGORY,action:"Closed",event_name:"mouseup"})},onClosed:function(){if(a==null){Util.refreshCurrentPage()}else{}},open:true})};Util.getParametersFromQueryString=function(g,a){if(!g){return{}}var c={};var b=/([^&=]+)=?([^&]*)/g;var f=function(e){return decodeURIComponent(e.replace(/\+/g," "))};if(typeof a==="undefined"||a){g=g.substring(1)}var d;while(d=b.exec(g)){c[f(d[1])]=f(d[2])}return c};Util.getQueryStringFromParameters=function(a){var c="";for(var b in a){c+=c?"&":"?";c+=b+"="+a[b]}return c};Util.showSearchResults=function(){var b=LaptopGuide.getSelectedModel();if(b==null){return null}var g=b.dims.depth;var d=b.dims.width;var c=b.dims.thickness;var e;var a=g+","+d+","+c;if(app.data.currentPage=="PLP"||app.data.currentPage=="search"){if(window.location.hash.length>0){var f=Util.getParametersFromQueryString(window.location.hash.replace("#/",""),false);f.size=a;e=app.utils.updateUrlQueryString(window.location.protocol+"//"+window.location.hostname+window.location.pathname,Util.getQueryStringFromParameters(f).replace("?",""))}else{var f=Util.getParametersFromQueryString(window.location.search);f.size=a;e=app.urls.shop+Util.getQueryStringFromParameters(f)}}else{e=app.urls.shop+Util.getQueryStringFromParameters({size:a})}window.parent.location.href=decodeURI(e)};Util.getFilteredUrl=function(){var a=LaptopGuide.getSelectedModel();if(a==null){return null}var d=Util.getParametersFromQueryString(window.parent.location.search);var e=a.dims.depth;var c=a.dims.width;var b=a.dims.thickness;d.size=e+","+c+","+b;return window.parent.location.pathname+Util.getQueryStringFromParameters(d)};Util.getUnfilteredUrl=function(){if(window.parent.location.pathname.indexOf(this.config.urls.shop)!=0){return null}var a=Util.getParametersFromQueryString(window.parent.location.search);delete a[this.config.params.size];return window.parent.location.pathname+Util.getQueryStringFromParameters(a)};Util.showUnfiltered=function(){window.parent.location.href=Util.getUnfilteredUrl()};Util.refreshCurrentPage=function(){window.parent.location.reload(true)};Util.onSearchResultsPage=function(){var a=window.parent.location.pathname;return(a.indexOf(this.config.urls.shop)>-1||a.indexOf("tb2/shop")>-1)};Util.onProductPage=function(){var a=window.parent.location.pathname;return a.indexOf(this.config.urls.product)>-1||a.indexOf("tb2/products")>-1||a.indexOf(this.config.urls.custom)==0||a.indexOf("tb2/customizer")>-1};Util.getParameterByName=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var d=new RegExp(a);var c=d.exec(window.location.href);if(c==null){return""}else{return decodeURIComponent(c[1].replace(/\+/g," "))}};Util.isIE7=function(){if($.browser.msie){var a=parseInt($.browser.version,10);if(a<=7){return true}}return false};Util.isIE8=function(){if($.browser.msie){var a=parseInt($.browser.version,10);if(a==8){return true}}return false};function Dims(c,b,a){if(c){c=parseFloat(c)}else{c=0}if(b){b=parseFloat(b)}else{b=0}if(a){a=parseFloat(a)}else{a=0}this.dims=new Array(c,b,a);this.dims.sort(function(e,d){return e-d});this.width=this.dims[2];this.depth=this.dims[1];this.thickness=this.dims[0]}Dims.prototype={getTrueWidth:function(){return this.width+this.thickness},getTrueDepth:function(){return this.depth+this.thickness},getVolume:function(){return(this.depth*this.width*this.thickness)},isUseTrueWidth:function(){return this.thickness==0},canFit:function(a){if(this.isUseTrueWidth()){if(this.getTrueWidth()>=a.getTrueWidth()&&this.getTrueDepth()>=a.getTrueDepth()){if(__lg_debug){console.log("fits based on stw/std")}return true}else{if(__lg_debug){console.log("no fit stw/std: bag/laptop/fits stw("+this.getTrueWidth()+"/"+a.getTrueWidth()+"/"+(this.getTrueWidth()>=a.getTrueWidth())+"), std("+this.getTrueDepth()+"/"+a.getTrueDepth()+"/"+(this.getTrueDepth()>=a.getTrueDepth())+")")}}}else{if(this.width>=a.width&&this.depth>=a.depth&&this.thickness>=a.thickness){if(__lg_debug){console.log("fits based on w/d/t")}return true}else{if(__lg_debug){console.log("no fit w/d/t: bag/laptop/fits w("+this.width+"/"+a.width+"/"+(this.width>=a.width)+"), d("+this.depth+"/"+a.depth+"/"+(this.depth>=a.depth)+"), t("+this.thickness+"/"+a.thickness+"/"+(this.thickness>=a.thickness)+")")}}}return false}};function BagDimension(b,e,d,a,c){this.sizeId=b;this.sizeName=c;this.dims=new Dims(e,d,a,c)}BagDimension.prototype={isLaptopFit:function(a){if(a){if(__lg_debug){console.log("compare size: "+this.sizeId+" against: "+a.name)}return this.dims.canFit(a.dims)}return false}};function LaptopModel(d,b,e,c,a){this.name=b;this.brandId=d;this.dims=new Dims(e,c,a)}LaptopModel.prototype={toCookieValue:function(){return this.dims.depth+LaptopModel.COOKIE_TOKEN+this.dims.width+LaptopModel.COOKIE_TOKEN+this.dims.thickness+LaptopModel.COOKIE_TOKEN+this.brandId+LaptopModel.COOKIE_TOKEN+this.name},equals:function(a){if(!a){return false}return this.name==a.name&&this.brandId==a.brandId}};LaptopModel.COOKIE_TOKEN="|";LaptopModel.fromCookieValue=function(b){var a=null;if(b){var c=b.split(LaptopModel.COOKIE_TOKEN);if(c&&c.length>=5){a=new LaptopModel(c[3],c[4],c[0],c[1],c[2])}}return a};function LaptopGuide(){this.sizeDimensions=null}LaptopGuide.COOKIE_NAME="laptop";LaptopGuide.getCookieConfig=function(){return{path:"/",expires:30}};LaptopGuide.getSelectedModel=function(){var a=$.cookie(LaptopGuide.COOKIE_NAME);return LaptopModel.fromCookieValue(a)};LaptopGuide.prototype={addCookie:function(a){if(__lg_debug){console.log("adding cookie: "+a.toCookieValue())}$.cookie(LaptopGuide.COOKIE_NAME,a.toCookieValue(),LaptopGuide.getCookieConfig());if(__lg_debug){console.log("added cookie: ",LaptopGuide.getSelectedModel())}},removeCookie:function(){if(__lg_debug){console.log("removing cookie")}$.cookie(LaptopGuide.COOKIE_NAME,null,LaptopGuide.getCookieConfig());if(__lg_debug){console.log("removed cookie: ",$.cookie(LaptopGuide.COOKIE_NAME))}},addSizeDimension:function(a){if(!this.sizeDimensions){this.sizeDimensions=new Object()}this.sizeDimensions[a.sizeId]=a},clearSizeDimensions:function(){this.sizeDimensions=null},getFitSizes:function(){if(!this.sizeDimensions){return null}laptopModel=LaptopGuide.getSelectedModel();if(!laptopModel){return null}var c=new Array();for(var a=0;a<app.preferences.fitGuide.maxSize;a++){if(!this.sizeDimensions[a]){continue}var b=this.sizeDimensions[a];if(b.isLaptopFit(laptopModel)){c.push(b.sizeName)}}return c},getWontFitSizes:function(){if(!this.sizeDimensions){return null}laptopModel=LaptopGuide.getSelectedModel();if(!laptopModel){return null}var c=new Array();for(var a=0;a<app.preferences.fitGuide.maxSize;a++){if(!this.sizeDimensions[a]){continue}var b=this.sizeDimensions[a];if(!b.isLaptopFit(laptopModel)){c.push(b.sizeName)}}return c},isSizeFitToLaptop:function(a){if(!a){return false}laptopModel=LaptopGuide.getSelectedModel();if(!laptopModel){return false}if(!this.sizeDimensions[a]){return false}var b=this.sizeDimensions[a];if(b.isLaptopFit(laptopModel)){return true}return false}};function LaptopGuidePopup(a){this.modelsTable=null;this.scrollData=null;this.search=null;this.brandSelect=null;this.enterWidth=null;this.enterDepth=null;this.enterThickness=null;this.defaultSearchMessage="Model name (if you know it)";this.defaultWidthMessage="width (in inches)";this.defaultDepthMessage="height (in inches)";this.defaultThicknessMessage="depth (in inches)";this.defaultErrorMessage="invalid entry";this.defaultBrandMessage="select a brand first";this.defaultHandEnterName="Self-Measured Device";this.checkImage=$("<img class='check-img' src='http://cdn.timbuk2.com/static/widgets/ltfg/ltfg_overlay_icon-valid.png'/>");this.errorMessage=$('<img class="error-img" src="http://cdn.timbuk2.com/static/widgets/ltfg/ltfg_overlay_icon-invalid.png"/><span class="text-error error-txt">'+this.defaultErrorMessage+"</span>");this.errorBrandMessage=$('<img class="error-img" src="http://cdn.timbuk2.com/static/widgets/ltfg/ltfg_overlay_icon-invalid.png"/><span class="text-error error-txt">'+this.defaultBrandMessage+"</span>");this.initCalled=false;if(typeof a==="function"){this.callbackFn=a}this.laptopGuide=new LaptopGuide();this.CATEGORY="LaptopFitGuidePopup";this.MAIN_CATEGORY=this.CATEGORY+"_Main_Form";this.HAND_CATEGORY=this.CATEGORY+"_Hand_Form"}LaptopGuidePopup.prototype={init:function(){if(this.initCalled){return}this.initCalled=true;var d=this;this.modelsTable=$("#models-table").dataTable({bAutoWidth:false,bFilter:true,bLengthChange:false,bSort:false,bProcessing:false,bPaginate:false,sScrollY:"227px",bScrollCollapse:false,aoColumnDefs:[{bVisible:false,aTargets:[0]},{sClass:"model-name",aTargets:[1]},{sClass:"model-width",aTargets:[2]},{sClass:"model-depth",aTargets:[3]},{sClass:"model-thickness",aTargets:[4]}],oLanguage:{sSearch:"",sInfo:"Showing _TOTAL_ results",sInfoEmpty:"Showing 0 results",sInfoFiltered:" (filtered from _MAX_ total results)",sEmptyTable:'Huh. We couldn&prime;t find your device.<br/><br/>Complete steps 1 & 2 above to find your device or go analog and  <span class="text-active-small link-hand-enter js_handEnterLink">enter your dimensions</span>.',sZeroRecords:'Huh. We couldn&prime;t find your device.<br/><br/>Complete steps 1 & 2 above to find your device or go analog and  <span class="text-active-small link-hand-enter js_handEnterLink">enter your dimensions</span>.',oPaginate:{sNext:"",sPrevious:"",sFirst:"",sLast:""}},sDom:'<i>r<"table-scroll"t><pf>',fnInitComplete:function(){}});$("#models-table_filter").prependTo("#step2-filter");$("#models-table_filter").keyup(function(h){if(h.which==13){$(".input-active").blur()}});var a=this.checkImage.clone();a.addClass("model-check-img");var b=function(h){return $(h).find("td").eq(0).hasClass("dataTables_empty")};$(".models-table > tbody").delegate("tr","click",function(l){if(b(this)){d.showHandEntryForm(true);return}a.detach();var m=d.brandSelect.val();var j=$(this).find("td").eq(0);var i=j.html();var k=$(this).find("td").eq(1).html();var n=$(this).find("td").eq(2).html();var h=$(this).find("td").eq(3).html();a.appendTo(j);d.handleModelSelect(m,i,n,k,h)});$(".models-table > tbody").delegate("tr","mouseenter",function(h){if(b(this)){return}a.detach();a.appendTo($(this).find("td").eq(0))});$(".models-table > tbody").delegate("tr","mouseleave",function(h){a.detach()});this.brandSelect=$("#brand-select");this.brandSelect.change(function(){var h=$("#brand-select option:selected");var j=h.val();var i=h.text();d.handleBrandSelect(j,i)});this.enterDepth=$("#enterDepth");this.enterWidth=$("#enterWidth");this.enterThickness=$("#enterThickness");this.search=$("#models-table_filter > label > input");var g=function(i,h){var j=$.trim(i.val());if(j===h){i.removeClass("input-inactive").addClass("input-active");i.val("")}};var e=function(j,i){var k=$.trim(j.val());var h=j.next(".validation-container");if(k.length==0||k===i){j.removeClass("input-active").addClass("input-inactive");j.val(i);h.empty()}else{j.removeClass("input-inactive").addClass("input-active")}};var f=function(){return !isNaN(Number(d.enterDepth.val()))&&!isNaN(Number(d.enterWidth.val()))&&!isNaN(Number(d.enterThickness.val()))};var c=function(j,i){var l=$.trim(j.val());var h=j.next(".validation-container");var k=$("#hand-submit");h.empty();if(l.length>0&&l!=d.defaultMessage){if(isNaN(Number(l))){h.append(d.errorMessage.clone());k.removeClass("hand-submit-enabled").addClass("hand-submit-disabled")}else{h.append(d.checkImage.clone());if(f()){k.removeClass("hand-submit-disabled").addClass("hand-submit-enabled")}else{k.removeClass("hand-submit-enabled").addClass("hand-submit-disabled")}}}if(l.length==0||l===i){k.removeClass("hand-submit-enabled").addClass("hand-submit-disabled")}};$("#hand-submit").click(function(){if($(this).hasClass("hand-submit-enabled")&&f()){var k="0";var i=d.defaultHandEnterName;var l=d.enterDepth.val();var j=d.enterWidth.val();var h=d.enterThickness.val();d.handleModelSelect(k,i,l,j,h)}});this.search.keyup(function(){var i=d.search;var j=$.trim(i.val());var h=i.parent().next(".validation-container");h.empty();if(j.length>0&&j!=d.defaultMessage){if(d.brandSelect.val()===""){h.append(d.errorBrandMessage.clone())}else{h.append(d.checkImage.clone());i.removeClass("input-inactive").addClass("input-active")}}if(j.length==0||j===d.defaultMessage){i.removeClass("input-active").addClass("input-inactive");d.modelsTable.fnFilter("")}});this.search.bind({focus:function(){g($(this),d.defaultSearchMessage)},blur:function(){e($(this),d.defaultSearchMessage)}});this.enterWidth.bind({focus:function(){g($(this),d.defaultWidthMessage)},blur:function(){e($(this),d.defaultWidthMessage)},keyup:function(){c($(this),d.defaultWidthMessage)}});this.enterDepth.bind({focus:function(){g($(this),d.defaultDepthMessage)},blur:function(){e($(this),d.defaultDepthMessage)},keyup:function(){c($(this),d.defaultDepthMessage)}});this.enterThickness.bind({focus:function(){g($(this),d.defaultThicknessMessage)},blur:function(){e($(this),d.defaultThicknessMessage)},keyup:function(){c($(this),d.defaultThicknessMessage)}});$(".link-hand-enter").click(function(){d.showHandEntryForm(true)});$(".link-hand-enter").next("img").click(function(){d.showHandEntryForm(true)});$(".link-main-form").click(function(){d.showHandEntryForm(false)});$(".link-main-form").next("img").click(function(){d.showHandEntryForm(false)});$(".link-clear-main").click(function(){d.laptopGuide.removeCookie();d.resetMainForm()});$(".link-clear-hand").click(function(){d.laptopGuide.removeCookie();d.resetEntryForm()});$(".link-hand-enter").track({category:this.MAIN_CATEGORY,action:"Enter_Own_Dimensions"});$(".link-hand-enter").next("img").track({category:this.MAIN_CATEGORY,action:"Enter_Own_Dimensions"});$(".link-clear-main").track({category:this.MAIN_CATEGORY,action:"Clear_Selections"});$("#brand-select").live("change",function(){var h=$("#brand-select option:selected").text()});$(".link-main-form").track({category:this.HAND_CATEGORY,action:"Enter_Name_Instead"});$(".link-main-form").next("img").track({category:this.HAND_CATEGORY,action:"Enter_Name_Instead"});$(".link-clear-hand").track({category:this.HAND_CATEGORY,action:"Clear_Dimensions"});$("#hand-submit").track({category:this.HAND_CATEGORY,action:"Submit"});this.clearFilter();this.resetEntryForm();this.getBrands();$(".model-name").width("445px");$(".model-width").width("82px");$(".model-depth").width("82px");$(".model-thickness").width("68px");$(".dataTables_scrollHeadInner").width("100%");$(".dataTables_scrollHeadInner > table").width("100%");$(".dataTables_scrollBody").css("overflow-x","hidden");$(".dataTables_scrollBody").css("overflow-y","scroll");$(".dataTables_scrollBody").css("border-collapse","collapse");$(".dataTables_scrollBody").css("border-bottom","1px solid #cbcbcb");$(".dataTables_scrollBody").css("border-left","1px solid #cbcbcb")},clearModels:function(){this.modelsTable.fnClearTable()},addModels:function(a){this.clearFilter();this.modelsTable.fnAddData(a)},clearFilter:function(){this.modelsTable.fnFilter("");this.search.val(this.defaultSearchMessage);this.search.blur()},addBrands:function(j){var g=LaptopGuide.getSelectedModel();var h=false;var d="";if(g!=null){d=g.brandId}var k="<option value=''>Select a Brand</option>";var a=this.getTopBrands(j);if(a!=null&&a.length>0){k+="<optgroup label='--- Top Brands ---'>";for(var f=0;f<a.length;f++){var c=a[f];var b=c[0];var e="";if(b==d&&!h){h=true;e=" SELECTED"}k+="<option value='"+b+"'"+e+">"+c[1]+"</option>"}k+="</optgroup>"}k+="<optgroup label='--- All Brands ---'>";j.sort(function(l,i){return l[1].localeCompare(i[1])});for(var f=0;f<j.length;f++){var c=j[f];var b=c[0];var e="";if(b==d&&!h){h=true;e=" SELECTED"}k+="<option value='"+b+"'"+e+">"+c[1]+"</option>"}k+="</optgroup>";this.brandSelect.html(k);this.brandSelect.change()},getTopBrands:function(e){var d=["acer","amazon.com","apple","asustek computer","barnes & noble","compaq","dell","gateway","google","hewlett-Packard","ibm","levono","samsung","sony","toshiba"];var a=[];for(var c=0;c<e.length;c++){var f=e[c];var b=f[1].toLowerCase();if($.inArray(b,d)>=0){a.push(f)}}a.sort(function(h,g){var l=h[1].toLowerCase();var k=g[1].toLowerCase();var j=$.inArray(l,d);var i=$.inArray(k,d);return j-i});return a},handleModelSelect:function(e,c,f,d,a){var b=new LaptopModel(e,c,f,d,a);this.laptopGuide.addCookie(b);if(this.callbackFn!=null){this.callbackFn();this.close()}else{if(Util.onProductPage()){Util.refreshCurrentPage()}else{Util.showSearchResults()}}},handleBrandSelect:function(c,b){this.clearModels();this.clearFilter();$(".validation-container").empty();if(!c){if(__lg_debug){console.log("handleBrandSelect(): removing cookie - no brand selected")}this.laptopGuide.removeCookie();return}var a=this;$.getJSON(Util.config.urls.brands+"?brand="+c+"",function(e){if(e){if(e.models){a.brandSelect.parent().next(".validation-container").append(a.checkImage.clone());a.addModels(e.models);var d=LaptopGuide.getSelectedModel();if(d!=null){if(d.brandId==c){}else{if(__lg_debug){console.log("handleBrandSelect(): removing cookie - brand changed")}a.laptopGuide.removeCookie()}}}}})},getBrands:function(){var a=this;this.brandSelect.html("<option>Please wait while we load laptop data...</option>");$.getJSON(Util.config.urls.brands,function(b){if(b){if(b.brands){a.addBrands(b.brands)}}})},showHandEntryForm:function(a){if(a){$("#main-form").hide();$("#hand-form").show()}else{$("#hand-form").hide();$("#main-form").show()}},resetEntryForm:function(){this.enterWidth.val(this.defaultWidthMessage);this.enterDepth.val(this.defaultDepthMessage);this.enterThickness.val(this.defaultThicknessMessage);this.enterWidth.blur();this.enterDepth.blur();this.enterThickness.blur()},resetMainForm:function(){this.brandSelect.val("");this.handleBrandSelect(null,"")},show:function(){this.init()},close:function(){if(parent.$.colorbox!=null){parent.$.colorbox.close()}}};function LaptopGuideCategoryPageSupport(a){this.initCalled=false;this.strip=null;this.leftStrip=null;this.laptopGuide=a;this.parent=null;this.CATEGORY="LaptopGuide_CategoryPage"}LaptopGuideCategoryPageSupport.prototype={init:function(c){if(this.initCalled){return}this.initCalled=true;$(".ltfg-popup-link").live("click",function(){Util.showPopup();return false});$(".ltfg-search-link").live("click",function(){Util.showSearchResults()});var b=this;$(".ltfg-strip-remove").live("click",function(){b.laptopGuide.removeCookie();Util.showUnfiltered()});this.strip=$('<div class="ltfg-strip"></div>');this.leftStrip=$('<div class="section ltfg"></div>');if(!this.parent){$(".ltfg-strip-container").append(this.strip);$(".category-img-tile").first().css("margin-top","0")}else{this.parent.prepend(this.strip)}var a=LaptopGuide.getSelectedModel();if(a!=null){this.showSelectedModel()}else{if(c){this.showLaptopGuideInfo()}}$(document).ready(function(){var e=$(".ltfg-strip");if(e.length==0){return}var f=e.offset().top+6;var d=function(){var g=$(window).scrollTop();if(g>=f){e.addClass("ltfg-strip-fixed")}else{if(e.hasClass("ltfg-strip-fixed")){e.removeClass("ltfg-strip-fixed");if(Util.isIE7()){e.css("left",null)}}}};$(window).scroll(function(g){d()});d()});$(".ltfg-strip-banner").track({category:this.CATEGORY,action:"No_Device_Popup"});$(".ltfg-strip-change").track({category:this.CATEGORY,action:"Change_Device_Popup"});$(".ltfg-nav-link").track({category:this.CATEGORY,action:"Filter_Nav"})},show:function(a){if(typeof a=="undefined"){a=true}this.init(a)},setParent:function(a){this.parent=$(a)},showLaptopGuideInfo:function(){var a=$('<img class="ltfg-popup-link ltfg-strip-banner" src="/static/widgets/ltfg/ltfg_cp_header_promo_412x31.png"/>');this.strip.empty().append(a)},showSelectedModel:function(){var a=LaptopGuide.getSelectedModel();var c=$('<div class=""><img class="ltfg-strip-icon" src="/static/widgets/ltfg/ltfg_icon_32x31.png"/><div class="ltfg-strip-info ltfg-strip-info-wide"><span class="ltfg-strip-title">Your Device: </span><span class="ltfg-strip-data">'+a.name+", "+a.dims.width+'" Wide x '+a.dims.depth+'" Deep x '+a.dims.thickness+'" Thick</span><span class="ltfg-popup-link ltfg-strip-change"><span>Change Device</span></span><span class="ltfg-strip-remove"><span>Remove</span></span></div></div>');if(!Util.onSearchResultsPage()){c.append('<div class="ltfg-strip-info-search"><span class="text-active-small ltfg-search-link">See all products that fit your device</span></div>')}this.strip.empty().append(c);var e=$(".section.ltfg .ltfg-holder");if(e.length){e.empty().append('<div class="laptop-info"><span class="name">'+a.name+"</span>&nbsp;-&nbsp"+a.dims.width+'" Wide x '+a.dims.depth+'" Deep x '+a.dims.thickness+'" Thick<div class="actions"><a class="ltfg-popup-link ltfg-strip-change no-shop-navigation"><span>Change Device</span></a><a class="ltfg-strip-remove no-shop-navigation"><span>Remove</span></a></div><hr /></div><ul><li><a title="All Products" href="" class="all-link">All Products</a></li><li><a title="Products That Fit Device" href="" class="fit-link">Products That Fit Device</a></li></ul>');var d=e.find("a.all-link");var b=e.find("a.fit-link");if(!Util.onSearchResultsPage()){d.parent().addClass("checked")}else{b.parent().addClass("checked")}d.attr("href",Util.getUnfilteredUrl());b.attr("href",Util.getFilteredUrl())}$(".ltfg-search-link").next("img").click(function(){Util.showSearchResults()});if(Util.onSearchResultsPage()){$(".ltfg-strip-info-wide").addClass("ltfg-strip-info-wide-full")}},addSkusetFitMessage:function(c){var a=this.laptopGuide.getFitSizes();if(a!=null&&a.length>0){var d="";for(var b=0;b<a.length;b++){d+="<strong>"+a[b]+"</strong>";if(b<a.length-1){d+=","}}$(c).empty().html('<span class="ltfg-skuset-fit-message"><strong>Yes. </strong>Your device will fit in size: </span><span class="ltfg-skuset-fit-size">'+d+"</span>");$(c).addClass("ltfg-fits")}}};function LaptopGuideProductPageSupport(a){this.laptopGuide=a;this.initCalled=false;this.CATEGORY="LaptopGuide_ProductPage"}LaptopGuideProductPageSupport.prototype={init:function(){if(this.initCalled){return}this.initCalled=true;var c=this;var a=function(){var e="Open_Popup";if($(this).hasClass("ltfg-strip-change")){e="Change_Device"}Util.showPopup();return true};var b=function(){Util.showSearchResults();return true};var d=function(){var e="Open_Search_Popup";Util.showPopup();return true};$(".ltfg-popup-link").live("click",function(){a()});$(".ltfg-popup-search-link").live("click",function(){d()});$(".ltfg-search-link").live("click",function(){b()});var c=this;$(".ltfg-strip-remove").live("click",function(){c.laptopGuide.removeCookie();window.location.reload()})},addDimsBanner:function(){var d=LaptopGuide.getSelectedModel();var e=$(".ltfg-info");var c=$(".ltfg-dims-info");var k=$(".ltfg-small-banner");e.empty();c.empty();k.empty();if(d==null){var h=$('<div class="hr-dotted"><hr /></div>');k.append(h)}else{var h=$('<div class="ltfg-strip ltfg-strip-pdp"><div class="ltfg-strip-info"><span class="ltfg-strip-title">Your Device: </span><span class="ltfg-strip-data">'+d.name+'</span><br><span class="ltfg-strip-data">'+d.dims.width+'" Wide x '+d.dims.depth+'" Deep x '+d.dims.thickness+'" Thick</span><span class="ltfg-popup-link ltfg-strip-change"><span>Change Device</span></span><span class="ltfg-strip-remove"><span>Remove</span></span></div></div>');e.append(h);var h=$('<div class="ltfg-strip-title">Your Device:</div><div class="info"><span class="line"><span class="ltfg-strip-data ltfg-larger-device-name">'+d.name+'</span><span class="ltfg-strip-data">'+d.dims.width+'" Wide x '+d.dims.depth+'" Deep x '+d.dims.thickness+'" Thick</span></span><span class="ltfg-popup-link ltfg-strip-change"><span>Change Device</span></span><span class="ltfg-strip-remove"><span>Remove</span></span></div><div class="ltfg-dims-search"><span class="text-active-small ltfg-search-link">See all products that fit your device</span></div>');c.append(h);var b=$(".dimensions.laptop .ltfg").length==0;if(b){$(".dimensions.laptop thead tr:first").append('<th class="padded ltfg" rowspan="2">Will your Laptop Fit?</th>')}var l="";var a="";for(var i=0;i<app.preferences.fitGuide.maxSize;i++){if(!this.laptopGuide.sizeDimensions[i]){continue}var f=this.laptopGuide.sizeDimensions[i];var g=Util.getSizeName(i);var j=$(".dimensions.laptop tbody tr."+i);if(f.isLaptopFit(d)){if(l.length>0){l+=", "}l+=g;if(b){j.append('<td><span class="ltfg-skuset-fit-message"><strong>Yes. </strong>Your device will fit.</span></td>')}}else{if(a.length>0){a+=", "}a+=g;if(b){j.append('<td><span class="ltfg-skuset-no-fit-message"><strong>No. </strong>Your device will <strong>not</strong> fit.</span></td>')}}}}},checkFit:function(){this.init();if(this.laptopGuide==null){if(__lg_debug){console.log("laptopGuide is null")}return}this.addDimsBanner()}};(function(c){var b,a;c.customizer||(c.customizer={});angular.extend(c.customizer,{init:function(){b=arguments[0];a=arguments[1]},showProductInfo:function(d,e){if(!d||!d.pid){return}b.trigger("PC_showProductInfo",{params:{pid:d.pid},callback:e})},removeProductInfo:function(){b.trigger("PC_removeProductInfo")},addProduct:function(d,e){if(!d||!d.pid){return}b.trigger("PC_addProduct",{params:{pid:d.pid,cbid:d.cbid||null,qty:d.quantity||1},callback:e})},updateCart:function(){b.trigger("PC_updateCart")},shareMail:function(d,e){if(d&&d.to&&d.from&&d.cbid){b.trigger("PC_shareEmail",{params:{cbid:d.cbid,to:d.to,from:d.from,name:d.name,message:d.message},callback:e})}},shareTweeter:function(e){var d=c.urls.shareWithTwitter;d=c.utils.updateURL(d,"url",c.urls.editCustomProductPage.replace("{0}",e.cbid));d=c.utils.updateURL(d,"original_referer",c.urls.absCustomizerShow);d=c.utils.updateURL(d,"via",c.resources.storeName);window.open(d,c.resources.shareWithTwitterTitle,"width=600,height=400")},sharePinterest:function(e){var d=c.urls.shareWithPinterest;d=c.utils.updateURL(d,"url",c.urls.editCustomProductPage.replace("{0}",e.cbid));d=c.utils.updateURL(d,"media",e.bag._data.imageUrl);d=c.utils.updateURL(d,"description",c.data.product.name);window.open(d,c.resources.shareWithPinterestTitle,"width=600,height=400")},shareFacebook:function(e){var d=c.utils.updateURL(c.urls.shareWithFacebook,"u",c.urls.absCustomizerShow);window.open(d,c.resources.shareWithFacebookTitle,"width=626,height=436")},showFitGuide:function(){window.Util.showPopup(Customizer.T2Shim.selectedLaptopChanged)},goToDimensionsTab:function(){a.$apply(function(){b.trigger("goToDimensionsTab")})},goToReviewsTab:function(){a.$apply(function(){b.trigger("goToReviewsTab")})},getRatings:function(d,e){if(d&&d.pid&&angular.isFunction(e)){b.trigger("PC_updateRatings",{params:{pid:d.pid},callback:e})}}})})(window.app||(window.app={}));angular.module("tb2.analytics.ga",["acead.analytics"]).run(["analyticService",function(a){a.register("ga",{pdp:{defaults:{category:"ProductPage"},change_quantity:{action:"Quantity"},add_to_cart:{action:"AddToCart"},add_to_wishlist:{action:"AddToWishList"},compare_products:{action:"Compare"},show_all_variants:{action:"AllColorsSizes"},change_gift_certificate_amount_radio:{action:"SelectGift"},change_gift_certificate_amount_textbox:{action:"SelectGift",label:"DefineValue"},change_gift_certificate_delivery_date:{action:"DeliverOn"},write_review:{action:"WriteReview"},select_variation:{},socialbuttons:{defaults:{action:"Share"},share_with_email:{label:"Email"},share_with_facebook:{label:"Facebook"},share_with_twitter:{label:"Twitter"},share_with_pinterest:{label:"Pinterest"}},activate_tab:{action:"Tab"},back_to_top:{action:"BackToTop",label:"Click"},open_custom_cousin:{action:"ColorwayCustomize"},similar_products_carousel:{defaults:{category:"ProductPage",label:"Click"},view_product:{action:"SimilarProducts"},show_prev_product:{action:"SimilarProductsPrev"},show_next_product:{action:"SimilarProductsNext"}},change_image:{action:"Image"},add_frequently_products:{action:"CrossSellAddtoCart"},check_frequently_product:{action:"CrossSell",label:"Click"}},plp:{defaults:{category:"CategoryPage",action:"View",label:"Click"},apply_refinement:{action:"FilterBy"},change_sorting_option:{action:"Sort By"},change_items_per_page:{action:"View",label:"Click"},change_page:{action:"PageSelect"},change_url:{action:"Shop"},add_device:{action:"AddDevice",label:"AddDevice"},open_quick_view:{action:"QuickView"},add_to_compare_list:{action:"Compare"},search_by_query:{action:"Shop"},show_more_less_click:{action:"Click"}},cart:{defaults:{category:"ShoppingCart",label:"Click"},continue_shopping:{action:"ContinueShopping"},cart_banner_click:{category:"ShoppingCartCrossSell",action:"CartBanner"},cross_sell_recommendations:{defaults:{category:"ShoppingCartCrossSell"},next:{action:"CarouselNext",value:"Click"},previous:{action:"CarouselPrevious",value:"Click"},click_item:{action:"ClickItem",}},checkout:{action:"Checkout"},update_cart:{action:"UpdateCart"},remove_item:{action:"Remove"},edit_item:{action:"EditItem"},edit_custom_item:{action:"EditCustom"},view_item_details:{action:"ClickItem"},view_return_policy:{action:"ReturnPolicy"}},checkout:{defaults:{category:"CheckOut2014",action:"Click"},minisummary_product_click:{label:"OrderSummary"},edit_cart:{label:"EditCart"},edit_address:{label:"Edit Address"},"continue":{label:"Continue"},shipping_country_change:{label:"SelectCountry"},shipping_state_change:{label:"SelectState"},shipping_method_change:{label:"Edit Shipping Method"},submit_order:{label:"SubmitOrder"},apply_coupon:{label:"ApplyCoupon"},apply_credit:{label:"ApplyCredit"},back_to_address_step:{label:"Address"},add_gift_message:{label:"AddMessage"},continue_shopping:{label:"ContinueShopping"},print_receipt:{label:"PrintReceipt"},track_order:{label:"OrderTracking"},view_custom_bag_details:{label:"MoreDetails"},logo_click:{category:"Timbuk2 Logo"},paypal:{defaults:{category:"ShoppingCart",action:"Click",label:"Paypal"},cart:{value:"Cart"},modal:{value:"Modal"},select_CREDIT_CARD:{value:"CreditCard"},select_PayPal:{value:"Paypal"},add_payment:{value:"AddPaypal"},"switch":{value:"Switch"}}},account:{defaults:{category:"MyAccount",action:"Click"},sign_in:{label:"Sign In"},sign_out:{label:"Sign Out"},create_account:{label:"Create Account"},forgot_password:{label:"Forgot Password"},track_order:{label:"Check Order"},view_overview:{label:"Overview"},view_personal_info:{label:"Personal Info"},manage_personal_info:{label:"Manage Personal Info"},view_address_book:{label:"Address Book"},manage_address_book:{label:"Manage Address Book"},view_paymemt_settings:{label:"Payment Settings"},manage_payment_info:{label:"Manage Payment Info"},view_orders:{label:"Orders"},view_order_history:{label:"Order History"},view_returns:{label:"Returns"},view_wishlist:{label:"Wish List"},modify_wishlist:{label:"Modify Wish List"},manage_wishlist:{label:"Manage Wish List"},search_wishlist:{label:"Search Wish List"},view_privacy_policy:{label:"Privacy Policy"},view_secure_shopping:{label:"Secure Shopping"},contact_cs_via_email:{label:"CS Email"},contact_cs_via_chat:{label:"CS Chat"},wishlist:{edit:{defaults:{action:"EditWishList",value:"Click"},add_address:{label:"Add Address"},select_address:{label:"SelectAddress"},make_private:{label:"Make Private"},make_public:{label:"Make Public"},send_to_friend:{label:"Send to a Friend"},copy_url:{label:"Copy URL"},explain:{label:"Explain Wish List"},open_pdp:{label:"Product Name"},edit_product:{label:"Edit Product"},delete_product:{label:"Delete Product"},save_changes:{label:"Save Changes"},add_to_cart:{label:"Add to Cart"},change_item_priority:{label:"Select Priority"},change_item_access:{label:"Make this Item"},view_explain_wishlist:{label:"Explain Wish List"}},search_wishlist:{action:"SearchWishList",label:"Click"},view_wishlist:{action:"SearchWishList",label:"ViewWishList"}},edit_profile:{defaults:{action:"EditPersonalInfo"},save:{label:"Save Personal",value:"Click"}}},home:{main_carousel:{defaults:{category:"CarouselWide",label:"Click"},show_left_item:{action:"left arrow"},show_right_item:{action:"right arrow"},view_section:{},tab_click:{}},customizer_feed:{defaults:{category:"CustomFeed",label:"Click"},refresh:{action:"Refresh"},view_all:{action:"ViewAll"},customize_this_bag:{action:"CustomizeThisBag"}}},header:{defaults:{category:"Header",action:"click"},open_device_fit_guide:{category:"HeaderOffer",action:"click",label:"#showLaptopGuide"},logo_click:{category:"Timbuk2 Logo"},sign_in:{label:"sign in"},search_stores:{label:"store locator"},check_order_status:{label:"order status"}},footer:{defaults:{category:"Footer",label:"click"},view_privacy_policy:{action:"Privacy Policy"},email_signup:{action:"SignUp"},unsubscribe:{action:"Unsubscribe"},view_terms_of_use:{action:"TermsOfUse"},view_site_map:{action:"SiteMap"},logo_click:{action:"Logo"},about:{view_people:{action:"People"},view_product:{action:"Product"},view_environment:{action:"Environment"},view_manufacturing:{action:"Manufacturing"},view_retail_stores:{action:"RetailStores"}},promotions:{view_first:{action:"Promo 1"},view_second:{action:"Promo 2"},view_third:{action:"Promo 3"},}},global:{breadcrumbs_click:{defaults:{category:"BreadCrumb",action:"Click"}},print_page:{action:"click"},minicart:{defaults:{category:"MiniCart",label:"click"},checkout:{action:"Checkout"},remove_item:{action:"Remove"},edit_item:{action:"EditItem"},view_details:{action:"ClickItem"},view_cart:{action:"ViewCart",label:"click"}},compare:{carousel:{defaults:{category:"ProductPage",label:"Click"},view_product:{action:"SimilarProducts"},show_prev_product:{action:"SimilarProductsPrev"},show_next_product:{action:"SimilarProductsNext"}}},fitguide:{defaults:{category:"LaptopFitGuidePopup_Main_Form"},change_brand:{action:"Brand_Selected"},clear_dimensions:{action:"Clear_Dimensions",label:"Click"},enter_dimensions:{action:"Enter_Own_Dimensions",label:"Click"},select_model:{action:"Model"},enter_device_name:{action:"Type_Name"}},form_element_blur:{label:"Click"},track_link:{action:"click"},add_to_cart:{category:"AddToCart Tracking",action:"AddToCart"},add_to_wishlist:{category:"AddToWishList Tracking",action:"AddToWishList"}}},function(){(function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create",app.preferences.googleAnalyticKey);ga("require","displayfeatures");ga("send","pageview");ga("set","User Type",(app.customer.registered?"Member":"Visitor"))},function(c,b,d){if(!ga){return false}d=angular.extend(this.getTrackingParams(c),(d||{}));ga("send","event",d.category,d.action,d.label,d.value)},{addToCart:function(b){if(app.data.currentPage.toLowerCase()==="pdp"){this.track("pdp.add_to_cart",null,{label:b})}else{if(app.data.currentPage==="wishlist"){this.track("account.wishlist.edit.add_to_cart",null,null)}}this.track("global.add_to_cart",null,{label:b})},addToWishlist:function(b){if(app.data.currentPage.toLowerCase()==="pdp"){this.track("pdp.add_to_wishlist",null,{label:b})}this.track("global.add_to_wishlist",null,{label:b})},wishlistItemPriorityChanged:function(b){this.track("account.wishlist.edit.change_item_priority",null,{value:b})},wishlistItemAccessChanged:function(c){var b=c?"Public":"Private";this.track("account.wishlist.edit.change_item_access",null,{value:b})},changeProductQuantity:function(b){this.track("pdp.change_quantity",null,{label:b})},writeReview:function(b){this.track("pdp.write_review",null,{label:b})},openReviewsTab:function(){this.track("pdp.activate_tab",null,{label:"Reviews"})},showAllVariants:function(b){this.track("pdp.show_all_variants",null,{label:b})},changeGiftCertificateAmountRadio:function(b){this.track("pdp.change_gift_certificate_amount_radio",null,{label:"{0}{1}".replace("{0}",app.preferences.currencySymbol).replace("{1}",b)})},changeGiftCertificateAmountTextBox:function(b){this.track("pdp.change_gift_certificate_amount_textbox",null,{value:"{0}{1}".replace("{0}",app.preferences.currencySymbol).replace("{1}",b)})},changeGiftCertificateDeliveryDate:function(b){this.track("pdp.change_gift_certificate_delivery_date",null,{label:b})},selectVariation:function(d){var c,b;switch(d.variationAttributeID){case app.preferences.sizeVariationAttributeID:c="Size";b="Product Name: {0}".replace("{0}",d.variationAttributeValue.value);break;case app.preferences.colorVariationAttributeID:c="View";b=d.variationAttributeValue.value;break;default:c="SelectGift";b=d.variationAttributeValue.value;break}this.track("pdp.select_variation",null,{action:c,label:b})},changeProductImage:function(b){this.track("pdp.change_image",null,{label:b})},checkFrequentlyProduct:function(b){this.track("pdp.check_frequently_product",null,{value:b})},applyRefinement:function(e){var c,d,b=e.refinementValue;switch(e.refinementID){case"category":d=e.isSelected?"RemoveCategory":"AddCategory";break;case"function":d=e.isSelected?"RemoveFunction":"AddFunction";break;case"collection":d=e.isSelected?"RemoveCollection":"AddCollection";break;case"price":d=e.isSelected?"RemovePrice":"AddPrice";break;case"refinementColor":d=e.isSelected?"RemoveColor":"AddColor";break;case"fabrics":d=e.isSelected?"RemoveFabric":"AddFabric";break;case"size":c="LaptopFitGuidePopup_Main_Form";d="Brand_Selected";b="Select a Brand";break;default:d="FilterBy";break}trackingParams={action:d,label:b};c&&(trackingParams.category=c);this.track("plp.apply_refinement",null,trackingParams);this.track("plp.change_url",null,{label:e.url})},changeSortingOption:function(b){this.track("plp.change_sorting_option",null,{label:b})},changeItemsPerPage:function(b){this.track("plp.change_items_per_page",null,{label:b})},addProductToCompareList:function(c){var b="Compare {0}".replace("{0}",c);this.track("plp.add_to_compare_list",null,{label:b})},openQuickViewModal:function(b){if(!app.data.productHits){return}this.track("plp.open_quick_view",null,null)},searchByQuery:function(c){var b="q={0}".replace("{0}",c);this.track("plp.search_by_query",null,{label:b})},showMoreLessClick:function(b){this.track("plp.show_more_less_click",null,{label:b})},formElementChange:function(h){var d=app.data.currentPage,e,g="Click",c=h.formElementName,b=h.eventObject,f=null;if(!d){return false}d=d.toLowerCase();switch(d){case"pdp":e="ProductPage";g=h.formElementName;if(h.formElementName==="SelectGift"){c="DefineValue";f=app.preferences.currencySymbol+b.value}else{c="Click"}break;case"checkout":e="CheckOut2014";break;case"account":e="MyAccount";g="Click";if(h.formElementName==="subscribe"){c="New User - Email List"}break;case"editprofile":e="MyAccount";g="EditPersonalInfo";f="Click";if(b.nodeName==="SELECT"&&/year|month|day/.test(h.formElementName)){c="Select Birthday";f=({year:"Year",month:"Month",day:"Day"})[h.formElementName]}if(h.formElementName==="SelectGender"){c="Select Gender";f=b.value==1?"Male":"Female"}else{if(h.formElementName==="subscribe"){c="Email List"}}break;case"wishlist":case"searchwishlist":e="MyAccount";g="SearchWishList";break}this.track("global.form_element_blur",null,{category:e,action:g,label:c,value:f})},shippingCountryChange:function(b){this.track("checkout.shipping_country_change",null,{action:b})},shippingStateChange:function(b){this.track("checkout.shipping_state_change",null,null)},shippingMethodChange:function(b){this.track("checkout.shipping_method_change",null,{value:b})},addGiftMessage:function(){this.track("checkout.add_gift_message",null)},fitGuideBrandChanged:function(b){this.track("global.fitguide.change_brand",null,{label:b})},fitGuideModelSelected:function(b){this.track("global.fitguide.select_model",null,{label:b})},printWindow:function(){var c="CheckOut2014",b="PrintReceipt";this.track("global.print_page",null,{category:c,label:b})},trackLink:function(c){var b=c.eventObject,d=c.trackingParams;this.track("global.track_link",null,{category:d.category,action:d.action,label:d.label||b.href})},confirmationPageLoaded:function(b){var d=app.preferences.currencySymbol,c=app.preferences.currencyCode,e=b.shipments[0];ga("require","ecommerce","ecommerce.js");f(b);angular.forEach(b.childOrders,function(g){f(g)});function f(g){var j=app.preferences.currencySymbol,h=app.preferences.currencyCode,k=g.shipments[0],l=k.giftCertificates||[],i=k.items||[];ga("ecommerce:clear");ga("ecommerce:addTransaction",{id:g.orderNumber,affiliation:app.resources.storeName,revenue:+g.adjustedMerchandizeTotalNetPrice.replace(j,"")||+g.orderTotal.replace(j,""),shipping:k.price.replace(j,""),tax:g.salesTax.replace(j,""),currency:h});angular.forEach(i,function(m){ga("ecommerce:addItem",{id:g.orderNumber,name:m.name,sku:m.id,category:(m.product.primaryCategory?m.product.primaryCategory.name:""),price:+(m.proratedPrice.replace(j,""))/m.quantity,quantity:m.quantity,currency:h})});angular.forEach(l,function(m){var n=m.bindedProduct;ga("ecommerce:addItem",{id:g.orderNumber,name:n.name,sku:n.id,category:(n.primaryCategory?n.primaryCategory.name:""),price:+m.price.replace(j,""),quantity:1,currency:h})});ga("ecommerce:send")}}})}]);angular.module("tb2.analytics.dw",["acead.analytics"]).run(["analyticService","httpWrapper",function(a,b){a.register("dw",null,null,null,{customerRegistered:function(){b.get(app.urls.reportUserRegistration,{},{},function(){})}})}]);(function(d,c,b){d.urls||(d.urls={});var a;window.popup=null;angular.extend(Util,{config:{urls:{shop:d.urls.shop||"/shop",product:d.urls.product||"/products",custom:d.urls.customizer||"/customizer",brands:d.urls.brands},params:{size:"size"}},init:function(){a=arguments[0]},showPopup:function(f){a.$broadcast("showFitGuidePopup",f)}});angular.extend(LaptopGuidePopup.prototype,{close:function(){parent.popup&&parent.popup.close()}});b(window).on("resize",function(){angular.extend(d.preferences,{isMobile:b(window).width()<=767,isTablet:b(window).width()>767&&b(window).width()<981,isTouchDevice:"ontouchstart" in window||navigator.msMaxTouchPoints>0,detectMobile:e()})}).trigger("resize");angular.extend(d.utils,{documentWrite:document.write,appendIframe:function(g){var f=document.createElement("iframe");f.style.width="1px";f.style.height="1px";f.frameBorder="0";f.src=g;document.body.appendChild(f)},appendScript:function(f){var g=document.createElement("script");g.setAttribute("src",f);g.setAttribute("async","true");g.setAttribute("type","text/javascript");document.body.appendChild(g)},appendConversionScript:function(g){var f=document.write;document.write=function(i){b(".t2-analytics").append(i)};var h=function(){document.write=f};b.ajax({url:g,dataType:"script",complete:h,async:false})},loadScript:function(f,h){var g=document.createElement("script");g.setAttribute("src",f);g.setAttribute("async","true");g.setAttribute("type","text/javascript");g.onload=g.onreadystatechange=function(){if(!g.readyState||/loaded|complete/.test(g.readyState)){g.onload=g.onreadystatechange=null;if(g.parentNode){g.parentNode.removeChild(g)}if(h&&angular.isFunction(h)){h()}}};document.body.appendChild(g)},jumpTo:function(g){var f=document.getElementById(g);f.scrollIntoView(true)},executeTemplateScripts:function(h){var h=angular.element("<div>").append(h),g=h.find("script"),f,i;b.each(g,function(k,j){f=j.text;i=document.createElement("script");try{i.appendChild(document.createTextNode(f));document.body.appendChild(i)}catch(l){i.text=f;document.body.appendChild(i)}})},appendUrlParams:function(h,g){if(g.constructor===Object){var g=b.param(g)}else{if(!g.constructor==String){return h}}var f=(i("?"))?"&":"?";if(!i("#")){return h+f+decodeURIComponent(g)}else{var l=h.slice(0,i("#")),k=h.slice(i("#")),j=decodeURIComponent(l+f+g+k);return j}function i(m){return(h.indexOf(m)!=-1)?h.indexOf(m):false}}});c.run(["$timeout","eventService","$rootScope",function(j,g,f){i();g.bind("LoadingEnd",function(){i()});function i(){h()}function h(){f.$watch("showFullHeader",function(k){setTimeout(function(){if(!d.preferences.isTouchDevice){b(".js_menu_item").on("mouseover",function(l){b(this).addClass("js_menu_item_active")}).on("mouseleave",function(l){b(this).removeClass("js_menu_item_active")})}else{b(".js_menu_item .js_menu_item_link").on("click",function(l){if(!b(this).parent().hasClass("js_menu_item_active")){b(this).parent().addClass("js_menu_item_active");if(typeof b(this).parent().attr("data-mobile-flyout")!=="undefined"){l.preventDefault()}}});b(document).on("touchstart",function(m){var n=b(".js_menu_item_active"),l=m.target;if(n.length){while(b(l).parent()[0]){if(b(l).parent()[0]==b(n)[0]){return}l=b(l).parent()}n.removeClass("js_menu_item_active")}})}},0)},false)}}]);function e(){var f=false;(function(g){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(g)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(g.substr(0,4))){f=true}})(navigator.userAgent||navigator.vendor||window.opera);return f}})(app||(window.app={}),window.acead,jQuery);var Query=function(m){var j=function(h){var u,q,v,a,o=[];if(h===void 0||null===h||""===h){return o}for(0===h.indexOf("?")&&(h=h.substring(1)),q=(""+h).split(/[&;]/),u=0;q.length>u;u++){v=q[u],a=v.split("="),o.push([a[0],a[1]])}return o},b=j(m),d=function(){var a,h,i="";for(a=0;b.length>a;a++){h=b[a],i.length>0&&(i+="&"),i+=h.join("=")}return i.length>0?"?"+i:i},f=function(a){return a=decodeURIComponent(a),a=a.replace("+"," ")},p=function(a){var h,i;for(i=0;b.length>i;i++){if(h=b[i],f(a)===f(h[0])){return h[1]}}},c=function(a){var i,o,h=[];for(i=0;b.length>i;i++){o=b[i],f(a)===f(o[0])&&h.push(o[1])}return h},k=function(q,v){var x,r,w,h,i=[];for(x=0;b.length>x;x++){r=b[x],w=f(r[0])===f(q),h=f(r[1])===f(v),(1===arguments.length&&!w||2===arguments.length&&!w&&!h)&&i.push(r)}return b=i,this},l=function(a,h,i){return 3===arguments.length&&-1!==i?(i=Math.min(i,b.length),b.splice(i,0,[a,h])):arguments.length>0&&b.push([a,h]),this},g=function(a,r,v){var q,u,i=-1;if(3===arguments.length){for(q=0;b.length>q;q++){if(u=b[q],f(u[0])===f(a)&&decodeURIComponent(u[1])===f(v)){i=q;break}}k(a,v).addParam(a,r,i)}else{for(q=0;b.length>q;q++){if(u=b[q],f(u[0])===f(a)){i=q;break}}k(a),l(a,r,i)}return this};return{getParamValue:p,getParamValues:c,deleteParam:k,addParam:l,replaceParam:g,toString:d}},Uri=function(H){var aa=!1,L=function(e){for(var g={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],d={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=g[aa?"strict":"loose"].exec(e),h={},c=14;c--;){h[l[c]]=f[c]||""}return h[d.name]={},h[l[12]].replace(d.parser,function(a,m,i){m&&(h[d.name][m]=i)}),h},S=L(H||""),W=new Query(S.query),J=function(a){return a!==void 0&&(S.protocol=a),S.protocol},R=null,ad=function(a){return a!==void 0&&(R=a),null===R?-1!==S.source.indexOf("//"):R},G=function(a){return a!==void 0&&(S.userInfo=a),S.userInfo},X=function(a){return a!==void 0&&(S.host=a),S.host},ac=function(a){return a!==void 0&&(S.port=a),S.port},Z=function(a){return a!==void 0&&(S.path=a),S.path},U=function(a){return a!==void 0&&(W=new Query(a)),W},ab=function(a){return a!==void 0&&(S.anchor=a),S.anchor},Y=function(a){return J(a),this},N=function(a){return ad(a),this},T=function(a){return G(a),this},F=function(a){return X(a),this},E=function(a){return ac(a),this},D=function(a){return Z(a),this},z=function(a){return U(a),this},A=function(a){return ab(a),this},K=function(a){return U().getParamValue(a)},k=function(a){return U().getParamValues(a)},ae=function(a,c){return 2===arguments.length?U().deleteParam(a,c):U().deleteParam(a),this},b=function(a,d,c){return 3===arguments.length?U().addParam(a,d,c):U().addParam(a,d),this},M=function(a,d,c){return 3===arguments.length?U().replaceParam(a,d,c):U().replaceParam(a,d),this},q=function(){var a="",c=function(d){return null!==d&&""!==d};return c(J())?(a+=J(),J().indexOf(":")!==J().length-1&&(a+=":"),a+="//"):ad()&&c(X())&&(a+="//"),c(G())&&c(X())&&(a+=G(),G().indexOf("@")!==G().length-1&&(a+="@")),c(X())&&(a+=X(),c(ac())&&(a+=":"+ac())),c(Z())?a+=Z():c(X())&&(c(""+U())||c(ab()))&&(a+="/"),c(""+U())&&(0!==(""+U()).indexOf("?")&&(a+="?"),a+=""+U()),c(ab())&&(0!==ab().indexOf("#")&&(a+="#"),a+=ab()),a},j=function(){return new Uri(q())};return{protocol:J,hasAuthorityPrefix:ad,userInfo:G,host:X,port:ac,path:Z,query:U,anchor:ab,setProtocol:Y,setHasAuthorityPrefix:N,setUserInfo:T,setHost:F,setPort:E,setPath:D,setQuery:z,setAnchor:A,getQueryParamValue:K,getQueryParamValues:k,deleteQueryParam:ae,addQueryParam:b,replaceQueryParam:M,toString:q,clone:j}},jsUri=Uri;(function(a){function c(e){this.imageCandidates=[],this.srcValue=e.src,this.srcsetValue=e.srcset,this.isValid=!0,this.error="",this._parse(this.srcsetValue),this.isValid||console.error("Error: "+this.error)}function b(e){this.src=e.src,this.w=e.w||1/0,this.h=e.h||1/0,this.x=e.x||1}var d=/^[0-9]+$/;c.prototype._parse=function(){for(var q,l,g=this.srcsetValue,j=0,r=[];""!==g;){for(;" "===g.charAt(0);){g=g.slice(1)}if(j=g.indexOf(" "),-1!==j){if(q=g.slice(0,j),""===q){break}g=g.slice(j+1),j=g.indexOf(","),-1===j?(l=g,g=""):(l=g.slice(0,j),g=g.slice(j+1)),r.push({url:q,descriptors:l})}else{r.push({url:g,descriptors:""}),g=""}}for(var f=0,m=r.length;m>f;f++){var p=r[f],k=this._parseDescriptors(p.descriptors);this._addCandidate(new b({src:p.url,x:k.x,w:k.w,h:k.h}))}this.srcValue&&this._addCandidate(new b({src:this.srcValue}))},c.prototype._addCandidate=function(f){for(var h=0;this.imageCandidates.length>h;h++){var g=this.imageCandidates[h];if(g.x==f.x&&g.w==f.w&&g.h==f.h){return}}this.imageCandidates.push(f)},c.prototype._parseDescriptors=function(p){for(var l=p.split(/\s/),f={},j=0;l.length>j;j++){var q=l[j];if(q.length>0){var g=q[q.length-1],m=q.substring(0,q.length-1),n=parseInt(m,10),k=parseFloat(m);m.match(d)&&"w"===g?f[g]=n:m.match(d)&&"h"==g?f[g]=n:isNaN(k)||"x"!=g?(this.error='Invalid srcset descriptor found in "'+q+'".',this.isValid=!1):f[g]=k}}return f},a.SrcsetInfo=c})(window),function(a){function b(){this.w=null,this.h=null,this.x=null}b.prototype.compute=function(){this.w=window.innerWidth||document.documentElement.clientWidth,this.h=window.innerHeight||document.documentElement.clientHeight,this.x=window.devicePixelRatio},b.prototype.setForTesting=function(c){this.w=c.w,this.h=c.h,this.x=c.x},b.prototype.getBestImage=function(d){var h=d.imageCandidates.slice(0),g=this._getBestCandidateIf(h,function(i,l){return i.w>l.w});this._removeCandidatesIf(h,function(e){return function(i){return i.w<e.w}}(this)),0===h.length&&(h=[g]);var k=this._getBestCandidateIf(h,function(i,l){return i.h>l.h});this._removeCandidatesIf(h,function(e){return function(i){return i.h<e.h}}(this)),0===h.length&&(h=[k]);var c=this._getBestCandidateIf(h,function(i,l){return i.x>l.x});this._removeCandidatesIf(h,function(e){return function(i){return i.x<e.x}}(this)),0===h.length&&(h=[c]);var f=this._getBestCandidateIf(h,function(i,l){return i.w<l.w});this._removeCandidatesIf(h,function(e){return e.w>f.w}),this._getBestCandidateIf(h,function(i,l){return i.h<l.h}),this._removeCandidatesIf(h,function(e){return e.h>f.h});var j=this._getBestCandidateIf(h,function(i,l){return i.x<l.x});return this._removeCandidatesIf(h,function(e){return e.x>j.x}),h[0]},b.prototype._getBestCandidateIf=function(d,g){for(var f=d[0],h=0;d.length>h;h++){var c=d[h];g(c,f)&&(f=c)}return f},b.prototype._removeCandidatesIf=function(c,f){for(var d=c.length-1;d>=0;d--){var g=c[d];f(g)&&c.splice(d,1)}return c},b.prototype.getBestImage2=function(d){for(var h=null,g=d.imageCandidates,j=0;g.length>j;j++){var c=g[j],f=h?h.x:0;if(c.x>=f&&c.x<=this.x){if(null===h){h=c;continue}this.w<=c.w&&c.w<=h.w&&(h=c)}}return h},a.ViewportInfo=b}(window),function(){function a(){var d=new Image;return"srcset" in d}function c(){if(!a()){var j=new ViewportInfo;j.compute();for(var h=document.querySelectorAll("img"),l=0;h.length>l;l++){var f=h[l],g=f.getAttribute("srcset");if(g){var k=new SrcsetInfo({src:f.src,srcset:g}),d=j.getBestImage(k);f.src=d.src,f.width||f.height||f.style.height||f.style.width||(f.style.webkitTransform="scale("+1/d.x+")",f.style.webkitTransformOrigin="0 0")}}}}var b=setInterval(function(){"complete"===document.readyState&&(c(),clearInterval(b))},10)}(window);